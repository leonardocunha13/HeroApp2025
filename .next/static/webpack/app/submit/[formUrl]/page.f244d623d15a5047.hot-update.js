"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/submit/[formUrl]/page",{

/***/ "(app-pages-browser)/./actions/form.tsx":
/*!**************************!*\
  !*** ./actions/form.tsx ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CreateForm: () => (/* binding */ CreateForm),\n/* harmony export */   GetClientWithProjects: () => (/* binding */ GetClientWithProjects),\n/* harmony export */   GetClients: () => (/* binding */ GetClients),\n/* harmony export */   GetEquipmentTagsForForm: () => (/* binding */ GetEquipmentTagsForForm),\n/* harmony export */   GetFormById: () => (/* binding */ GetFormById),\n/* harmony export */   GetFormContentByUrl: () => (/* binding */ GetFormContentByUrl),\n/* harmony export */   GetFormStats: () => (/* binding */ GetFormStats),\n/* harmony export */   GetFormSubmissionById: () => (/* binding */ GetFormSubmissionById),\n/* harmony export */   GetFormWithSubmissionDetails: () => (/* binding */ GetFormWithSubmissionDetails),\n/* harmony export */   GetFormWithSubmissions: () => (/* binding */ GetFormWithSubmissions),\n/* harmony export */   GetForms: () => (/* binding */ GetForms),\n/* harmony export */   GetFormsByClientName: () => (/* binding */ GetFormsByClientName),\n/* harmony export */   GetFormsInformation: () => (/* binding */ GetFormsInformation),\n/* harmony export */   GetFormsWithClient: () => (/* binding */ GetFormsWithClient),\n/* harmony export */   GetProjects: () => (/* binding */ GetProjects),\n/* harmony export */   GetProjectsFromClientName: () => (/* binding */ GetProjectsFromClientName),\n/* harmony export */   GetSubmissionWithTagInfo: () => (/* binding */ GetSubmissionWithTagInfo),\n/* harmony export */   PublishForm: () => (/* binding */ PublishForm),\n/* harmony export */   SaveFormAfterTest: () => (/* binding */ SaveFormAfterTest),\n/* harmony export */   SubmitForm: () => (/* binding */ SubmitForm),\n/* harmony export */   UpdateFormContent: () => (/* binding */ UpdateFormContent),\n/* harmony export */   getContentByFormIDandTagID: () => (/* binding */ getContentByFormIDandTagID),\n/* harmony export */   getEquipmentTagID: () => (/* binding */ getEquipmentTagID),\n/* harmony export */   publishFormAction: () => (/* binding */ publishFormAction),\n/* harmony export */   runForm: () => (/* binding */ runForm),\n/* harmony export */   saveFormAction: () => (/* binding */ saveFormAction),\n/* harmony export */   submitFormAction: () => (/* binding */ submitFormAction)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\":\"GetClients\",\"0056b66f5e0bfda60da83a467cac83458903790355\":\"GetProjects\",\"005890e9ace11382590dfe256d18a985d80ef53664\":\"GetFormStats\",\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\":\"GetFormsInformation\",\"00ad1843f1c28ec580071c5c56699400132f7f9d12\":\"GetForms\",\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\":\"publishFormAction\",\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\":\"saveFormAction\",\"40226b3b5d44a7254f49759d036f24d7c23272d040\":\"GetFormById\",\"403145f8835472f5e7741c1a435bba5cc897cb941f\":\"GetFormContentByUrl\",\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\":\"GetEquipmentTagsForForm\",\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\":\"GetFormsWithClient\",\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\":\"submitFormAction\",\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\":\"GetProjectsFromClientName\",\"408519304d22a0e05a5b296d09cb48801817b8def8\":\"GetFormSubmissionById\",\"40b077053238d0a2659c40cea672092d6d0cf1893c\":\"GetFormWithSubmissionDetails\",\"40c066748347b8b677aeb8f39299abc748f5c0f25e\":\"GetSubmissionWithTagInfo\",\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\":\"GetFormWithSubmissions\",\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\":\"GetFormsByClientName\",\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\":\"GetClientWithProjects\",\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\":\"getEquipmentTagID\",\"60922447ba3f326fdf23eac6584943278d55d45d32\":\"getContentByFormIDandTagID\",\"60cb494246e13d01c97932a238a3d4622a74f55852\":\"UpdateFormContent\",\"702a21f6cf4717559298ad70c1798c88ee23f93130\":\"SubmitForm\",\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\":\"CreateForm\",\"70512de972c6c1b3fffa11e6c3274976b337deee8b\":\"PublishForm\",\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\":\"SaveFormAfterTest\",\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\":\"runForm\"} */ \nvar GetClients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClients\");\nvar GetProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"0056b66f5e0bfda60da83a467cac83458903790355\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjects\");\nvar GetFormStats = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"005890e9ace11382590dfe256d18a985d80ef53664\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormStats\");\nvar GetForms = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00ad1843f1c28ec580071c5c56699400132f7f9d12\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetForms\");\nvar GetFormById = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40226b3b5d44a7254f49759d036f24d7c23272d040\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormById\");\nvar UpdateFormContent = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60cb494246e13d01c97932a238a3d4622a74f55852\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"UpdateFormContent\");\nvar saveFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"saveFormAction\");\nvar PublishForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70512de972c6c1b3fffa11e6c3274976b337deee8b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"PublishForm\");\nvar publishFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"publishFormAction\");\nvar GetFormContentByUrl = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403145f8835472f5e7741c1a435bba5cc897cb941f\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormContentByUrl\");\nvar SubmitForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"702a21f6cf4717559298ad70c1798c88ee23f93130\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SubmitForm\");\nvar submitFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"submitFormAction\");\nvar GetFormWithSubmissions = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormWithSubmissions\");\nvar GetSubmissionWithTagInfo = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40c066748347b8b677aeb8f39299abc748f5c0f25e\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetSubmissionWithTagInfo\");\nvar GetFormWithSubmissionDetails = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40b077053238d0a2659c40cea672092d6d0cf1893c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormWithSubmissionDetails\");\nvar GetFormSubmissionById = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"408519304d22a0e05a5b296d09cb48801817b8def8\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormSubmissionById\");\nvar GetEquipmentTagsForForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetEquipmentTagsForForm\");\nvar GetClientWithProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClientWithProjects\");\nvar GetFormsWithClient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsWithClient\");\nvar GetFormsInformation = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsInformation\");\nvar GetProjectsFromClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjectsFromClientName\");\nvar CreateForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"CreateForm\");\nvar runForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"runForm\");\nvar GetFormsByClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsByClientName\");\nvar SaveFormAfterTest = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SaveFormAfterTest\");\nvar getContentByFormIDandTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60922447ba3f326fdf23eac6584943278d55d45d32\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getContentByFormIDandTagID\");\nvar getEquipmentTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getEquipmentTagID\");\n /*getEquipmentTagID(\"Equip1\", \"Tag1\")\r\n.then((updatedForm) => {\r\n  console.log(\"Equip TAG ID:\", updatedForm);\r\n})\r\n.catch((error) => {\r\n  console.error(\"Error updating form:\", error);\r\n});*/ \n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FjdGlvbnMvZm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBdUlzQkEsMkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBDQUMsNEJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXFCQUMsNkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXNDQUMseUJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQW1CQUMsNEJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQThEQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXNCQUMsK0JBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBCQUMsNEJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdCQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQVFBQyxvQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBcUNBQywyQkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBc0NBQyxpQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBa0JBQyx1Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBNkJBQyx5Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBNkNBQyw2Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBc0VBQyxzQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBa0JBQyx3Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBc0RBQyxzQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBOEJBQyxtQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBNkNBQyxvQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBZ0VBQywwQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBK0JBQywyQkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBMENUQyx3QkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBa0hTQyxxQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBdUhBQyxrQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBNkNBQywyQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBeUNBQyxrQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0NBaUN0Qjs7Ozs7O0dBTUciLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcbGRlamVzdXMuSEVST1xcT25lRHJpdmUgLSBIZXJvIEVuZ2luZWVyaW5nXFxEZXNrdG9wXFxIZXJvQXVkaXRBcHAyMDI1XFxIZXJvQXVkaXRBcHAyMDI1XFxhY3Rpb25zXFxmb3JtLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcclxuXHJcbmltcG9ydCB7IEFtcGxpZnkgfSBmcm9tIFwiYXdzLWFtcGxpZnlcIjtcclxuaW1wb3J0IG91dHB1dHMgZnJvbSBcIi4uL2FtcGxpZnlfb3V0cHV0cy5qc29uXCI7XHJcbmltcG9ydCB0eXBlIHsgU2NoZW1hIH0gZnJvbSBcIi4uL2FtcGxpZnkvZGF0YS9yZXNvdXJjZVwiO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZUNsaWVudCB9IGZyb20gXCJhd3MtYW1wbGlmeS9kYXRhXCI7XHJcbmltcG9ydCB7IGdldEN1cnJlbnRVc2VyIH0gZnJvbSBcImF3cy1hbXBsaWZ5L2F1dGhcIjsgLy8gRW5zdXJlIGdldEN1cnJlbnRVc2VyIGlzIGltcG9ydGVkIGNvcnJlY3RseVxyXG4vLy9pbXBvcnQgeyB2aSB9IGZyb20gXCJkYXRlLWZucy9sb2NhbGVcIjtcclxuLy9pbXBvcnQgeyBzdWIgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcclxuLy9pbXBvcnQgeyBzdHJpbmcgfSBmcm9tICd6b2QnO1xyXG4vL2ltcG9ydCB7IGZvcm1TY2hlbWFUeXBlIH0gZnJvbSBcIi4uL3NjaGVtYXMvZm9ybVwiO1xyXG5cclxuQW1wbGlmeS5jb25maWd1cmUob3V0cHV0cyk7XHJcblxyXG5jb25zdCBjbGllbnQgPSBnZW5lcmF0ZUNsaWVudDxTY2hlbWE+KCk7XHJcblxyXG4vLyBVc2VyTm90Rm91bmRFcnIgY2xhc3MgZm9yIGN1c3RvbSBlcnJvciBoYW5kbGluZ1xyXG5jbGFzcyBVc2VyTm90Rm91bmRFcnIgZXh0ZW5kcyBFcnJvciB7fVxyXG5cclxuLypleHBvcnQgYXN5bmMgZnVuY3Rpb24gSW5zZXJ0Q2xpZW50KE5hbWVDbGllbnQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQuY3JlYXRlKHtcclxuICAgICAgQ2xpZW50TmFtZTogTmFtZUNsaWVudCxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5zZXJ0IGNsaWVudC5cIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YTsgLy8gUmV0dXJucyB0aGUgaW5zZXJ0ZWQgY2xpZW50IGRhdGFcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn0qL1xyXG4vKkluc2VydENsaWVudChcIkZvcnRlc2N1ZVwiKVxyXG4gIC50aGVuKChkYXRhKSA9PiBjb25zb2xlLmxvZyhcIkNsaWVudDpcIiwgZGF0YSkpXHJcbiAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNsaWVudCB3aXRoIHByb2plY3RzOlwiLCBlcnJvcikpOyovXHJcblxyXG4vLyBGdW5jdGlvbiB0byBpbnNlcnQgYSBzaW5nbGUgcHJvamVjdCAoeW91IG1heSBhbHJlYWR5IGhhdmUgc29tZXRoaW5nIGxpa2UgdGhpcylcclxuLypleHBvcnQgYXN5bmMgZnVuY3Rpb24gSW5zZXJ0UHJvamVjdChuYW1lOiBzdHJpbmcsIHByb2pOdW06IHN0cmluZywgY2xpZW50SUQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5jcmVhdGUoe1xyXG4gICAgICBwcm9qZWN0SUQ6IHByb2pOdW0sXHJcbiAgICAgIHByb2plY3ROYW1lOiBuYW1lLFxyXG4gICAgICBDbGllbnRJRDogY2xpZW50SURcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5zZXJ0IGNsaWVudC5cIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YTsgLy8gUmV0dXJucyB0aGUgaW5zZXJ0ZWQgY2xpZW50IGRhdGFcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn0qL1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gaW5zZXJ0IG11bHRpcGxlIHByb2plY3RzXHJcbi8qZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEluc2VydE11bHRpcGxlUHJvamVjdHMobmFtZXM6IHN0cmluZ1tdLCBwcm9qTnVtOiBzdHJpbmdbXSwgY2xpZW50SURzOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IGluc2VydGVkUHJvamVjdHM6IGFueVtdID0gW107IC8vIEFycmF5IHRvIHN0b3JlIHN1Y2Nlc3NmdWxseSBpbnNlcnRlZCBwcm9qZWN0c1xyXG4gIGNvbnN0IGZhaWxlZFByb2plY3RzOiBzdHJpbmdbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBwcm9qZWN0IG5hbWVzIHRoYXQgZmFpbGVkIHRvIGluc2VydFxyXG5cclxuICAvLyBFbnN1cmUgdGhhdCBpbnB1dCBhcnJheXMgaGF2ZSB0aGUgc2FtZSBsZW5ndGhcclxuICBpZiAobmFtZXMubGVuZ3RoICE9PSBwcm9qTnVtLmxlbmd0aCB8fCBwcm9qTnVtLmxlbmd0aCAhPT0gY2xpZW50SURzLmxlbmd0aCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW5wdXQgYXJyYXlzIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGguXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gTG9vcCB0aHJvdWdoIHRoZSBhcnJheXMgYW5kIGluc2VydCBwcm9qZWN0cyBvbmUgYnkgb25lXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgbmFtZSA9IG5hbWVzW2ldO1xyXG4gICAgY29uc3QgcHJvamVjdE51bWJlciA9IHByb2pOdW1baV07XHJcbiAgICBjb25zdCBjbGllbnRJRCA9IGNsaWVudElEc1tpXTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBwcm9qZWN0RGF0YSA9IGF3YWl0IEluc2VydFByb2plY3QobmFtZSwgcHJvamVjdE51bWJlciwgY2xpZW50SUQpOyAvLyBDYWxsIHRvIGluc2VydCBhIHNpbmdsZSBwcm9qZWN0XHJcbiAgICAgIGluc2VydGVkUHJvamVjdHMucHVzaChwcm9qZWN0RGF0YSk7IC8vIFN0b3JlIHRoZSBzdWNjZXNzZnVsIGluc2VydCByZXN1bHRcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBpbnNlcnQgcHJvamVjdDogJHtuYW1lfWAsIGVycm9yKTtcclxuICAgICAgZmFpbGVkUHJvamVjdHMucHVzaChuYW1lKTsgLy8gU3RvcmUgdGhlIGZhaWxlZCBwcm9qZWN0IG5hbWVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFJldHVybiB0aGUgcmVzdWx0czogc3VjY2Vzc2Z1bCBpbnNlcnRpb25zIGFuZCBmYWlsZWQgb25lc1xyXG4gIHJldHVybiB7XHJcbiAgICBpbnNlcnRlZFByb2plY3RzLFxyXG4gICAgZmFpbGVkUHJvamVjdHMsXHJcbiAgfTtcclxufSovXHJcblxyXG4vKmV4cG9ydCBhc3luYyBmdW5jdGlvbiBJbnNlcnRNdWx0aXBsZUNsaWVudHMobmFtZXM6IHN0cmluZ1tdKSB7XHJcbiAgY29uc3QgaW5zZXJ0ZWRDbGllbnRzOiBhbnlbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBzdWNjZXNzZnVsbHkgaW5zZXJ0ZWQgY2xpZW50c1xyXG4gIGNvbnN0IGZhaWxlZENsaWVudHM6IHN0cmluZ1tdID0gW107IC8vIEFycmF5IHRvIHN0b3JlIGNsaWVudCBuYW1lcyB0aGF0IGZhaWxlZCB0byBpbnNlcnRcclxuXHJcbiAgZm9yIChsZXQgbmFtZSBvZiBuYW1lcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2xpZW50RGF0YSA9IGF3YWl0IEluc2VydENsaWVudChuYW1lKTsgLy8gQ2FsbCB0aGUgc2luZ2xlIGNsaWVudCBpbnNlcnQgZnVuY3Rpb25cclxuICAgICAgaW5zZXJ0ZWRDbGllbnRzLnB1c2goY2xpZW50RGF0YSk7IC8vIFN0b3JlIHRoZSBzdWNjZXNzZnVsIGluc2VydCByZXN1bHRcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBpbnNlcnQgY2xpZW50OiAke25hbWV9YCwgZXJyb3IpO1xyXG4gICAgICBmYWlsZWRDbGllbnRzLnB1c2gobmFtZSk7IC8vIFN0b3JlIHRoZSBmYWlsZWQgY2xpZW50IG5hbWVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFJldHVybiB0aGUgcmVzdWx0c1xyXG4gIHJldHVybiB7XHJcbiAgICBpbnNlcnRlZENsaWVudHMsXHJcbiAgICBmYWlsZWRDbGllbnRzLFxyXG4gIH07XHJcbn0qL1xyXG5cclxuLypjb25zdCBjbGllbnRzID0gYXdhaXQgR2V0Q2xpZW50cygpOyovXHJcblxyXG4vKmNvbnN0IGNJRCA9IGNsaWVudHMuY2xpZW50SURzO1xyXG5jb25zb2xlLmxvZyhjSUQpO1xyXG5jb25zdCBwcm9qZWN0cyA9IFtcInByb2plY3QxXCIsIFwicHJvamVjdDJcIixcInByb2plY3QzXCIsXCJwcm9qZWN0NFwiXTtcclxuY29uc3QgIHByb2pOdW1iZXJzID0gW1wicHJvak51bWJlcjFcIixcInByb2pOdW1iZXIyXCIsXCJwcm9qTnVtYmVyM1wiLFwicHJvak51bWJlcjRcIl07Ki9cclxuXHJcbi8qSW5zZXJ0UHJvamVjdChwcm9qZWN0c1swXSxwcm9qTnVtYmVyc1swXSxjSURbMF0pO1xyXG5JbnNlcnRQcm9qZWN0KHByb2plY3RzWzFdLHByb2pOdW1iZXJzWzFdLGNJRFsxXSk7XHJcbkluc2VydFByb2plY3QocHJvamVjdHNbMl0scHJvak51bWJlcnNbMl0sY0lEWzJdKTtcclxuSW5zZXJ0UHJvamVjdChwcm9qZWN0c1szXSxwcm9qTnVtYmVyc1szXSxjSURbM10pOyovXHJcblxyXG4vKmNvbnN0IGNsaWVudE5hbWVzID0gW1wiQ2xpZW50NFwiXTsgLy8gRXhhbXBsZSBjbGllbnQgbmFtZXNcclxuXHJcbkluc2VydE11bHRpcGxlQ2xpZW50cyhjbGllbnROYW1lcylcclxuICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NmdWxseSBpbnNlcnRlZCBjbGllbnRzOlwiLCByZXN1bHQuaW5zZXJ0ZWRDbGllbnRzKTtcclxuICAgIGNvbnNvbGUubG9nKFwiRmFpbGVkIHRvIGluc2VydCBjbGllbnRzOlwiLCByZXN1bHQuZmFpbGVkQ2xpZW50cyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5zZXJ0aW5nIGNsaWVudHM6XCIsIGVycm9yKTtcclxuICB9KTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldENsaWVudHMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXJyb3JzLCBkYXRhIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5saXN0KCk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBjbGllbnRzLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBFeHRyYWN0IGNsaWVudCBuYW1lcyBhbmQgY2xpZW50IElEc1xyXG4gICAgY29uc3QgY2xpZW50TmFtZXMgPSBkYXRhLm1hcCgoY2xpZW50KSA9PiBjbGllbnQuQ2xpZW50TmFtZSk7XHJcbiAgICBjb25zdCBjbGllbnRJRHMgPSBkYXRhLm1hcCgoY2xpZW50KSA9PiBjbGllbnQuaWQpO1xyXG5cclxuICAgIC8vIFJldHVybiBib3RoIGNsaWVudCBuYW1lcyBhbmQgSURzIGluIGFuIG9iamVjdCBvciBhbiBhcnJheVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2xpZW50TmFtZXMsXHJcbiAgICAgIGNsaWVudElEcyxcclxuICAgIH07XHJcblxyXG4gICAgLy8gQWx0ZXJuYXRpdmVseSwgaWYgeW91IHdhbnQgdG8gcmV0dXJuIGFuIGFycmF5OlxyXG4gICAgLy8gcmV0dXJuIFtjbGllbnROYW1lcywgY2xpZW50SURzXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qYXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCkge1xyXG4gIGNvbnN0IGNsaWVudHMgPSBhd2FpdCBHZXRDbGllbnRzKCk7XHJcbiAgY29uc3QgY0lEID0gY2xpZW50cy5jbGllbnRJRHM7XHJcbiAgY29uc29sZS5sb2coY0lEKTtcclxuICBjb25zdCBwcm9qZWN0cyA9IFtcInByb2plY3QxXCIsIFwicHJvamVjdDJcIiwgXCJwcm9qZWN0M1wiLCBcInByb2plY3Q0XCJdO1xyXG4gIGNvbnN0IHByb2pOdW1iZXJzID0gW1wicHJvak51bWJlcjFcIiwgXCJwcm9qTnVtYmVyMlwiLCBcInByb2pOdW1iZXIzXCIsIFwicHJvak51bWJlcjRcIl07XHJcbiBcclxuICBhd2FpdCBJbnNlcnRQcm9qZWN0KHByb2plY3RzWzBdLCBwcm9qTnVtYmVyc1swXSwgY0lEWzBdKTtcclxuICBhd2FpdCBJbnNlcnRQcm9qZWN0KHByb2plY3RzWzFdLCBwcm9qTnVtYmVyc1sxXSwgY0lEWzFdKTtcclxuICBhd2FpdCBJbnNlcnRQcm9qZWN0KHByb2plY3RzWzJdLCBwcm9qTnVtYmVyc1syXSwgY0lEWzJdKTtcclxuICBhd2FpdCBJbnNlcnRQcm9qZWN0KHByb2plY3RzWzNdLCBwcm9qTnVtYmVyc1szXSwgY0lEWzNdKTtcclxufSovXHJcblxyXG4vL2ZldGNoRGF0YSgpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldFByb2plY3RzKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KCk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBwcm9qZWN0cy5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2VwYXJhdGUgcHJvamVjdElEcyBhbmQgcHJvamVjdE5hbWVzXHJcbiAgICBjb25zdCBwcm9qZWN0SURzID0gZGF0YS5tYXAoKHByb2plY3QpID0+IHByb2plY3QucHJvamVjdElEKTsgLy8gTGlzdCBvZiBhbGwgcHJvamVjdElEc1xyXG4gICAgY29uc3QgcHJvamVjdE5hbWVzID0gZGF0YS5tYXAoKHByb2plY3QpID0+IHByb2plY3QucHJvamVjdE5hbWUpOyAvLyBMaXN0IG9mIGFsbCBwcm9qZWN0TmFtZXNcclxuXHJcbiAgICAvLyBSZXR1cm4gYm90aCBzZXBhcmF0ZWx5XHJcbiAgICByZXR1cm4geyBwcm9qZWN0SURzLCBwcm9qZWN0TmFtZXMgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtU3RhdHMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIGFsbCBmb3Jtc1xyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtcywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4geyB2aXNpdHM6IDAsIHN1Ym1pc3Npb25zOiAwLCBzdWJtaXNzaW9uUmF0ZTogMCwgYm91bmNlUmF0ZTogMCB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGFyIHN0YXRzIGNvbSBUT0RPUyBvcyBmb3JtcyAoc2VtIGZpbHRyYXIgdXNlcklkKVxyXG4gICAgY29uc3QgdmlzaXRzID0gZm9ybXMucmVkdWNlKChzdW0sIGZvcm0pID0+IHN1bSArIChmb3JtLnZpc2l0cyB8fCAwKSwgMCk7XHJcbiAgICBjb25zdCBzdWJtaXNzaW9ucyA9IGZvcm1zLnJlZHVjZShcclxuICAgICAgKHN1bSwgZm9ybSkgPT4gc3VtICsgKGZvcm0uc3VibWlzc2lvbnMgfHwgMCksXHJcbiAgICAgIDAsXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBzdWJtaXNzaW9uUmF0ZSA9IDA7XHJcbiAgICBpZiAodmlzaXRzID4gMCkge1xyXG4gICAgICBzdWJtaXNzaW9uUmF0ZSA9IChzdWJtaXNzaW9ucyAvIHZpc2l0cykgKiAxMDA7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm91bmNlUmF0ZSA9IDEwMCAtIHN1Ym1pc3Npb25SYXRlO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHZpc2l0cyxcclxuICAgICAgc3VibWlzc2lvbnMsXHJcbiAgICAgIHN1Ym1pc3Npb25SYXRlLFxyXG4gICAgICBib3VuY2VSYXRlLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm0gc3RhdHM6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiB7IHZpc2l0czogMCwgc3VibWlzc2lvbnM6IDAsIHN1Ym1pc3Npb25SYXRlOiAwLCBib3VuY2VSYXRlOiAwIH07XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtcygpIHtcclxuICB0cnkge1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm1zLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KCk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIC8vY29uc29sZS5sb2coXCJGb3JtczpcIiwgZm9ybXMpO1xyXG4gICAgcmV0dXJuIGZvcm1zO1xyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtczpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtQnlJZChpZDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybSwgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0uZ2V0KHsgaWQgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZm9ybSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByb2plY3ROYW1lID0gbnVsbDtcclxuICAgIGxldCBjbGllbnROYW1lID0gbnVsbDtcclxuICAgIGxldCBzaGFyZVVSTCA9IG51bGw7XHJcblxyXG4gICAgaWYgKGZvcm0ucHJvaklEKSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdERhdGEsIGVycm9yczogcHJvamVjdEVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgcHJvamVjdElEOiB7IGVxOiBmb3JtLnByb2pJRCB9IH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHByb2plY3RFcnJvcnMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBwcm9qZWN0ID0gcHJvamVjdERhdGE/LlswXTtcclxuICAgICAgaWYgKHByb2plY3QpIHtcclxuICAgICAgICBwcm9qZWN0TmFtZSA9IHByb2plY3QucHJvamVjdE5hbWU7XHJcblxyXG4gICAgICAgIGlmIChwcm9qZWN0LkNsaWVudElEKSB7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IGNsaWVudERhdGEsIGVycm9yczogY2xpZW50RXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5nZXQoe1xyXG4gICAgICAgICAgICBpZDogcHJvamVjdC5DbGllbnRJRCxcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGlmIChjbGllbnRFcnJvcnMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihjbGllbnRFcnJvcnMpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChjbGllbnREYXRhKSB7XHJcbiAgICAgICAgICAgIGNsaWVudE5hbWUgPSBjbGllbnREYXRhLkNsaWVudE5hbWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0b3JuYXIgdGFtYsOpbSB2aXNpdGFzIGUgc3VibWlzc8O1ZXNcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGZvcm0sXHJcbiAgICAgIHByb2plY3ROYW1lLFxyXG4gICAgICBjbGllbnROYW1lLFxyXG4gICAgICBzaGFyZVVSTDogZm9ybS5zaGFyZVVSTCxcclxuICAgICAgdmlzaXRzOiBmb3JtLnZpc2l0cyA/PyAwLFxyXG4gICAgICBzdWJtaXNzaW9uczogZm9ybS5zdWJtaXNzaW9ucyA/PyAwLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm0gYnkgSUQ6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBVcGRhdGVGb3JtQ29udGVudChpZDogc3RyaW5nLCBjb250ZW50OiBhbnkpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybSA9IHtcclxuICAgICAgaWQsXHJcbiAgICAgIGNvbnRlbnQsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZEZvcm0sIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLnVwZGF0ZShmb3JtKTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBmb3JtIGNvbnRlbnQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1cGRhdGVkRm9ybTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGZvcm0gY29udGVudDpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBmb3JtIGNvbnRlbnQuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gRGVmaW5lIHlvdXIgc2VydmVyLXNpZGUgYWN0aW9uXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlRm9ybUFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpIHtcclxuICBjb25zdCBpZCA9IGZvcm1EYXRhLmdldChcImlkXCIpIGFzIHN0cmluZztcclxuICBjb25zdCBjb250ZW50ID0gZm9ybURhdGEuZ2V0KFwiY29udGVudFwiKSBhcyBzdHJpbmc7XHJcblxyXG4gIC8vIENhbGwgeW91ciBleGlzdGluZyBzZXJ2ZXItc2lkZSBmdW5jdGlvbiAoVXBkYXRlRm9ybUNvbnRlbnQpXHJcbiAgYXdhaXQgVXBkYXRlRm9ybUNvbnRlbnQoaWQsIGNvbnRlbnQpO1xyXG59XHJcbi8qY29uc3QgZGF0YSA9IFtcclxuICBbJ1NlY3Rpb24gMScsICdBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRiddLFxyXG4gIFsnRScsICdGJywgJ0cnLCAnSCcsICdJJ10sXHJcbiAgWydKJywgJ0snLCAnTCcsICdNJywgJ04nXSxcclxuXTtcclxuXHJcbi8vIENvbnZlcnQgdGhlIGRhdGEgdG8gYSBKU09OIHN0cmluZ1xyXG5jb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcblxyXG5cclxuVXBkYXRlRm9ybUNvbnRlbnQoXCJiNWExMWQ3Ny1mZWY3LTQzMzAtODQ3OS1kYjVkN2FlYTNhZmZcIiwgY29udGVudClcclxuICAudGhlbih1cGRhdGVkRm9ybSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnRm9ybSB1cGRhdGVkOicsIHVwZGF0ZWRGb3JtKTtcclxuICB9KVxyXG4gIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBmb3JtOicsIGVycm9yKTtcclxuICB9KTtcclxuKi9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQdWJsaXNoRm9ybShpZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIHNoYXJlVVJMOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG5cclxuICAgIGNvbnN0IGZvcm0gPSB7XHJcbiAgICAgIGlkOiBpZCxcclxuICAgICAgY29udGVudDogY29udGVudCxcclxuICAgICAgc2hhcmVVUkw6IHNoYXJlVVJMLFxyXG4gICAgICBwdWJsaXNoZWQ6IHRydWUsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogdXBkYXRlZEZvcm0sIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLnVwZGF0ZShmb3JtKTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHB1Ymxpc2ggdGhlIGZvcm0uXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1cGRhdGVkRm9ybTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHB1Ymxpc2hpbmcgZm9ybTpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHB1Ymxpc2ggdGhlIGZvcm0uXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1Ymxpc2hGb3JtQWN0aW9uKGZvcm1EYXRhOiBGb3JtRGF0YSkge1xyXG4gIGNvbnN0IGlkID0gZm9ybURhdGEuZ2V0KFwiaWRcIikgYXMgc3RyaW5nO1xyXG4gIGNvbnN0IGNvbnRlbnQgPSBmb3JtRGF0YS5nZXQoXCJjb250ZW50XCIpIGFzIHN0cmluZztcclxuICBjb25zdCBzaGFyZVVSTCA9IGZvcm1EYXRhLmdldChcInNoYXJlVVJMXCIpIGFzIHN0cmluZztcclxuXHJcbiAgYXdhaXQgUHVibGlzaEZvcm0oaWQsIGNvbnRlbnQsIHNoYXJlVVJMKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1Db250ZW50QnlVcmwoZm9ybVVybDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIFxyXG4gICAgLy9jb25zdCBmb3JtVVJMID0gYC9zdWJtaXQvJHtmb3JtVXJsfWA7XHJcbiAgICBjb25zdCBmb3JtVVJMID0gZm9ybVVybC5zdGFydHNXaXRoKCcvc3VibWl0LycpID8gZm9ybVVybCA6IGAvc3VibWl0LyR7Zm9ybVVybH1gO1xyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtcywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCh7XHJcbiAgICAgIGZpbHRlcjogeyBzaGFyZVVSTDogeyBlcTogZm9ybVVSTCB9IH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzIHx8ICFmb3JtcyB8fCBmb3Jtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMgfHwgXCJGb3JtIG5vdCBmb3VuZCwgcGxlYXNlIHRyeSBhZ2Fpbi5cIik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm0gbm90IGZvdW5kLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtID0gZm9ybXNbMF07XHJcbiAgICBjb25zdCB1cGRhdGVkVmlzaXRzID0gZm9ybS52aXNpdHMgPyBmb3JtLnZpc2l0cyArIDEgOiAxO1xyXG5cclxuICAgIGNvbnN0IHVwZGF0ZWRGb3JtID0ge1xyXG4gICAgICBpZDogZm9ybS5pZCxcclxuICAgICAgdmlzaXRzOiB1cGRhdGVkVmlzaXRzLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yczogdXBkYXRlRXJyb3JzIH0gPVxyXG4gICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0udXBkYXRlKHVwZGF0ZWRGb3JtKTtcclxuXHJcbiAgICBpZiAodXBkYXRlRXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IodXBkYXRlRXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHVwZGF0ZSBmb3JtIHZpc2l0cy5cIik7XHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiZm9ybTpcIiwgZm9ybSk7XHJcbiAgICByZXR1cm4gZm9ybTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm0gY29udGVudCBieSBVUkw6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm0gY29udGVudCBieSBVUkwuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFN1Ym1pdEZvcm0oZm9ybUlkOiBzdHJpbmcsIHRhZ0lkOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHN1Ym1pc3Npb24gPSB7XHJcbiAgICBmb3JtSWQsXHJcbiAgICBjb250ZW50LFxyXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgfTtcclxuICBcclxuICBjb25zdCB7IGRhdGE6IHN1Ym1pc3Npb25EYXRhIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1TdWJtaXNzaW9ucy5jcmVhdGUoc3VibWlzc2lvbik7XHJcblxyXG4gIGlmICghc3VibWlzc2lvbkRhdGE/LmlkKSB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB0byBjcmVhdGUgdGhlIHN1Ym1zc2lvblwiKTtcclxuXHJcbiAgY29uc3Qgc3VibWlzc2lvbklkID0gc3VibWlzc2lvbkRhdGEuaWQ7XHJcblxyXG4gIGNvbnN0IHsgZGF0YTogZm9ybUxpc3QgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgIGZpbHRlcjogeyBpZDogeyBlcTogZm9ybUlkIH0gfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgZm9ybSA9IGZvcm1MaXN0WzBdO1xyXG4gIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoe1xyXG4gICAgaWQ6IGZvcm0uaWQsXHJcbiAgICBzdWJtaXNzaW9uczogKGZvcm0uc3VibWlzc2lvbnMgfHwgMCkgKyAxLFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCB7IGRhdGE6IGZvcm1UYWdzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgZmlsdGVyOiB7IHRhZ0lEOiB7IGVxOiB0YWdJZCB9IH0sXHJcbiAgfSk7XHJcblxyXG4gIGlmICghZm9ybVRhZ3MubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtVGFnMiBub3QgZm91bmRcIik7XHJcblxyXG4gIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIudXBkYXRlKHtcclxuICAgIGlkOiBmb3JtVGFnc1swXS5pZCxcclxuICAgIGNvbnRlbnRUZXN0OiBzdWJtaXNzaW9uSWQsXHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBzdWJtaXNzaW9uRGF0YTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdWJtaXRGb3JtQWN0aW9uKGZvcm1EYXRhOiBGb3JtRGF0YSkge1xyXG4gIGNvbnN0IGZvcm1JZCA9IGZvcm1EYXRhLmdldChcImZvcm1JZFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3QgdGFnSWQgPSBmb3JtRGF0YS5nZXQoXCJ0YWdJZFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3QgcmF3UmVzcG9uc2VzID0gZm9ybURhdGEuZ2V0KFwicmVzcG9uc2VzXCIpIGFzIHN0cmluZztcclxuICBjb25zdCByYXdGb3JtQ29udGVudCA9IGZvcm1EYXRhLmdldChcImZvcm1Db250ZW50XCIpIGFzIHN0cmluZztcclxuXHJcbiAgY29uc3Qgc3VibWlzc2lvbiA9IHtcclxuICAgIHJlc3BvbnNlczogSlNPTi5wYXJzZShyYXdSZXNwb25zZXMpLFxyXG4gICAgZm9ybUNvbnRlbnQ6IEpTT04ucGFyc2UocmF3Rm9ybUNvbnRlbnQpLFxyXG4gICAgc3VibWl0dGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICB9O1xyXG5cclxuICBjb25zdCBqc29uQ29udGVudCA9IEpTT04uc3RyaW5naWZ5KHN1Ym1pc3Npb24pO1xyXG4gIGF3YWl0IFN1Ym1pdEZvcm0oZm9ybUlkLCB0YWdJZCwganNvbkNvbnRlbnQpO1xyXG59XHJcblxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtV2l0aFN1Ym1pc3Npb25zKGlkOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5nZXQoeyBpZCB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZvcm0pIHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBzdWJtaXNzaW9ucywgZXJyb3JzOiBzdWJtaXNzaW9uRXJyb3JzIH0gPVxyXG4gICAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVN1Ym1pc3Npb25zLmxpc3Qoe1xyXG4gICAgICAgICAgZmlsdGVyOiB7IGZvcm1JZDogeyBlcTogZm9ybS5pZCB9IH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoc3VibWlzc2lvbkVycm9ycykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3Ioc3VibWlzc2lvbkVycm9ycyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IGZvcm0sIHN1Ym1pc3Npb25zIH07XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybSBub3QgZm91bmQuXCIpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybSB3aXRoIHN1Ym1pc3Npb25zOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZm9ybSB3aXRoIHN1Ym1pc3Npb25zLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRTdWJtaXNzaW9uV2l0aFRhZ0luZm8oc3VibWlzc2lvbklkOiBzdHJpbmcpIHtcclxuXHJcbiAgY29uc3Qgc3VibWlzc2lvblJlc3BvbnNlID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtU3VibWlzc2lvbnMuZ2V0KHsgaWQ6IHN1Ym1pc3Npb25JZCB9KTtcclxuXHJcblxyXG4gIGNvbnN0IHN1Ym1pc3Npb24gPSBzdWJtaXNzaW9uUmVzcG9uc2UuZGF0YTtcclxuICBpZiAoIXN1Ym1pc3Npb24pIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm1TdWJtaXNzaW9uIG5vdCBmb3VuZC5cIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmb3JtSWQgPSBzdWJtaXNzaW9uLmZvcm1JZDtcclxuICBpZiAoIWZvcm1JZCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZm9ybUlkIG5vdCBmb3VuZCBpbiBzdWJtaXNzaW9ucy5cIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmb3JtVGFnc1Jlc3BvbnNlID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgIGZpbHRlcjoge1xyXG4gICAgICBjb250ZW50VGVzdDogeyBjb250YWluczogc3VibWlzc2lvbklkIH0sXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG5cclxuICBpZiAoIWZvcm1UYWdzUmVzcG9uc2UuZGF0YS5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm1UYWcyIG5vdCBmb3VuZCB3aXRoIHRoZSBhc3NvY2lhdGVkIGNvbnRlbnRUZXN0LlwiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGZvcm1UYWcgPSBmb3JtVGFnc1Jlc3BvbnNlLmRhdGFbMF07XHJcblxyXG4gIGNvbnN0IGVxdWlwbWVudFRhZ1Jlc3BvbnNlID0gYXdhaXQgY2xpZW50Lm1vZGVscy5FcXVpcG1lbnRUYWcyLmdldCh7XHJcbiAgICBpZDogZm9ybVRhZy50YWdJRCA/PyBcIlwiLCBcclxuICB9KTtcclxuXHJcbiAgaWYgKCFlcXVpcG1lbnRUYWdSZXNwb25zZS5kYXRhKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcXVpcG1lbnRUYWcyIG5vdCBmb3VuZC5cIik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZm9ybUlkOiBmb3JtSWQsXHJcbiAgICBzdWJtaXNzaW9uSWQ6IHN1Ym1pc3Npb24uaWQsXHJcbiAgICBzdWJtaXR0ZWRBdDogc3VibWlzc2lvbi5jcmVhdGVkQXQsXHJcbiAgICBlcXVpcG1lbnROYW1lOiBlcXVpcG1lbnRUYWdSZXNwb25zZS5kYXRhLkVxdWlwbWVudE5hbWUgPz8gXCJObyBuYW1lXCIsXHJcbiAgICB0YWc6IGVxdWlwbWVudFRhZ1Jlc3BvbnNlLmRhdGEuVGFnID8/IFwiTm8gdGFnXCIsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1XaXRoU3VibWlzc2lvbkRldGFpbHMoaWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGZXRjaCB0aGUgZm9ybSB3aXRoIHN1Ym1pc3Npb25zXHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm0sIGVycm9yczogZm9ybUVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmdldCh7IGlkIH0pO1xyXG5cclxuICAgIGlmIChmb3JtRXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybUVycm9ycyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZm9ybSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggdGhlIHN1Ym1pc3Npb25zIHJlbGF0ZWQgdG8gdGhlIGZvcm1cclxuICAgIGNvbnN0IHsgZGF0YTogc3VibWlzc2lvbnMsIGVycm9yczogc3VibWlzc2lvbkVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtU3VibWlzc2lvbnMubGlzdCh7XHJcbiAgICAgIGZpbHRlcjogeyBmb3JtSWQ6IHsgZXE6IGZvcm0uaWQgfSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHN1Ym1pc3Npb25FcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihzdWJtaXNzaW9uRXJyb3JzKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggYWRkaXRpb25hbCB0YWcgYW5kIGVxdWlwbWVudCBkZXRhaWxzIGZvciBlYWNoIHN1Ym1pc3Npb25cclxuICAgIGNvbnN0IHN1Ym1pc3Npb25EZXRhaWxzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgIHN1Ym1pc3Npb25zLm1hcChhc3luYyAoc3VibWlzc2lvbikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZvcm1JZCA9IHN1Ym1pc3Npb24uZm9ybUlkO1xyXG4gICAgICAgIGNvbnN0IHN1Ym1pc3Npb25JZCA9IHN1Ym1pc3Npb24uaWQ7XHJcblxyXG4gICAgICAgIC8vIEZldGNoIHRoZSBhc3NvY2lhdGVkIHRhZyBhbmQgZXF1aXBtZW50IGluZm9cclxuICAgICAgICBjb25zdCBmb3JtVGFnc1Jlc3BvbnNlID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgICAgICBjb250ZW50VGVzdDogeyBjb250YWluczogc3VibWlzc2lvbklkIH0sIC8vIEZpbmQgcmVsYXRlZCB0YWdzIGJ5IHN1Ym1pc3Npb24gSURcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghZm9ybVRhZ3NSZXNwb25zZS5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgcmV0dXJuIHsgLi4uc3VibWlzc2lvbiwgZXJyb3I6IFwiTm8gZm9ybSB0YWcgZm91bmQgZm9yIHRoaXMgc3VibWlzc2lvbi5cIiB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZm9ybVRhZyA9IGZvcm1UYWdzUmVzcG9uc2UuZGF0YVswXTtcclxuICAgICAgICBjb25zdCBlcXVpcG1lbnRUYWdSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5nZXQoe1xyXG4gICAgICAgICAgaWQ6IGZvcm1UYWcudGFnSUQgPz8gXCJcIiwgLy8gVXNlIHRoZSB0YWdJRCBmcm9tIEZvcm1UYWcyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICghZXF1aXBtZW50VGFnUmVzcG9uc2UuZGF0YSkge1xyXG4gICAgICAgICAgcmV0dXJuIHsgLi4uc3VibWlzc2lvbiwgZXJyb3I6IFwiTm8gZXF1aXBtZW50IHRhZyBmb3VuZCBmb3IgdGhpcyBzdWJtaXNzaW9uLlwiIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgZm9ybUlkLFxyXG4gICAgICAgICAgc3VibWlzc2lvbklkLFxyXG4gICAgICAgICAgc3VibWl0dGVkQXQ6IHN1Ym1pc3Npb24uY3JlYXRlZEF0LFxyXG4gICAgICAgICAgZXF1aXBtZW50TmFtZTogZXF1aXBtZW50VGFnUmVzcG9uc2UuZGF0YS5FcXVpcG1lbnROYW1lID8/IFwiTm8gRXF1aXBtZW50IE5hbWVcIixcclxuICAgICAgICAgIHRhZzogZXF1aXBtZW50VGFnUmVzcG9uc2UuZGF0YS5UYWcgPz8gXCJObyBFcXVpcG1lbnQgVGFnXCIsXHJcbiAgICAgICAgfTtcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZm9ybSxcclxuICAgICAgc3VibWlzc2lvbnM6IHN1Ym1pc3Npb25EZXRhaWxzLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm0gd2l0aCBzdWJtaXNzaW9uIGRldGFpbHM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBmb3JtIGFuZCBzdWJtaXNzaW9uIGRldGFpbHMuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1TdWJtaXNzaW9uQnlJZChzdWJtaXNzaW9uSWQ6IHN0cmluZykge1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBjb250ZW50LCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVN1Ym1pc3Npb25zLmdldCh7IGlkOiBzdWJtaXNzaW9uSWQgfSk7XHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtOlwiLCBlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICghY29udGVudCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250ZW50IG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gIGNvbnRlbnQgO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gR2V0Rm9ybVN1Ym1pc3Npb25CeUlkOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRFcXVpcG1lbnRUYWdzRm9yRm9ybShpZDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIHRoZSBmb3JtIGRhdGFcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybSwgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0uZ2V0KHsgaWQgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybTpcIiwgZXJyb3JzKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFmb3JtKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm0gbm90IGZvdW5kLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBlcXVpcG1lbnQgdGFncyByZWxhdGVkIHRvIHRoZSBmb3JtXHJcbiAgICBjb25zdCB7IGRhdGE6IGVxdWlwbWVudFRhZ3MsIGVycm9yczogZXF1aXBtZW50VGFnc0Vycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgZm9ybUlEOiB7IGVxOiBmb3JtLmlkIH0gfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKGVxdWlwbWVudFRhZ3NFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVxdWlwbWVudCB0YWdzOlwiLCBlcXVpcG1lbnRUYWdzRXJyb3JzKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFlcXVpcG1lbnRUYWdzIHx8IGVxdWlwbWVudFRhZ3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gZXF1aXBtZW50IHRhZ3MgZm91bmQuXCIpO1xyXG4gICAgICByZXR1cm4geyBmb3JtLCBlcXVpcG1lbnRUYWdzOiBbXSB9O1xyXG4gICAgfVxyXG5cclxuICAgICAgLy8gRmV0Y2ggcmVsYXRlZCBlcXVpcG1lbnQgZGV0YWlscyBmb3IgZWFjaCB0YWdcclxuICAgIGNvbnN0IGVxdWlwbWVudERldGFpbHMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgZXF1aXBtZW50VGFncy5tYXAoYXN5bmMgKHRhZykgPT4ge1xyXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRhZy50YWdJRCBpcyB2YWxpZCBiZWZvcmUgbWFraW5nIHRoZSBBUEkgY2FsbFxyXG4gICAgICAgIGNvbnN0IGVxdWlwbWVudFRhZyA9IHRhZy50YWdJRCA/IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5nZXQoeyBpZDogdGFnLnRhZ0lEIH0pIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGVxdWlwbWVudFRhZykge1xyXG4gICAgICAgICAgcmV0dXJuIGVxdWlwbWVudFRhZztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgdGFnSUQ6XCIsIHRhZy50YWdJRCk7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICByZXR1cm4geyBmb3JtLCBlcXVpcG1lbnRUYWdzOiBlcXVpcG1lbnREZXRhaWxzLmZpbHRlcih0YWcgPT4gdGFnICE9PSBudWxsKSB9O1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVxdWlwbWVudCB0YWdzIGZvciBmb3JtOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Q2xpZW50V2l0aFByb2plY3RzKENsaWVudElEOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50LmdldCh7IGlkOiBDbGllbnRJRCB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzIHx8ICFjbGllbnQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNsaWVudDpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggYWxsIHByb2plY3RzIHJlbGF0ZWQgdG8gdGhpcyBjbGllbnRcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdHMsIGVycm9yczogcHJvamVjdEVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IENsaWVudElEIH0gfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzOlwiLCBwcm9qZWN0RXJyb3JzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyAuLi5kYXRhLCBwcm9qZWN0cyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLypHZXRDbGllbnRXaXRoUHJvamVjdHMoXCIxYWQ3NGJjZS1iZDlkLTQxMzEtODNlZi1lZmZlY2JhNzRjN2RcIilcclxuICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coXCJDbGllbnQgd2l0aCBQcm9qZWN0czpcIiwgZGF0YSkpXHJcbiAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNsaWVudCB3aXRoIHByb2plY3RzOlwiLCBlcnJvcikpOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXNXaXRoQ2xpZW50KENsaWVudElEOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IHVzZXJJZCB9ID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcclxuICBpZiAoIXVzZXJJZCkge1xyXG4gICAgdGhyb3cgbmV3IFVzZXJOb3RGb3VuZEVycigpO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIHByb2plY3RzIGxpbmtlZCB0byB0aGUgQ2xpZW50SURcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdHMsIGVycm9yczogcHJvamVjdEVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IENsaWVudElEIH0gfSxcclxuICAgICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhcIlByb2plY3RzIEZvdW5kOlwiLCBwcm9qZWN0cyk7XHJcbiAgICBpZiAocHJvamVjdEVycm9ycyB8fCAhcHJvamVjdHMgfHwgcHJvamVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IocHJvamVjdEVycm9ycyB8fCBcIk5vIHByb2plY3RzIGZvdW5kIGZvciB0aGlzIGNsaWVudC5cIik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHByb2plY3RzIGZvdW5kIGZvciB0aGlzIGNsaWVudC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggZm9ybXMgZm9yIGVhY2ggcHJvamVjdFxyXG4gICAgY29uc3QgZm9ybXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgcHJvamVjdHMubWFwKGFzeW5jIChwcm9qZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwcm9qZWN0Rm9ybXMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgICAgICAgIGZpbHRlcjogeyBwcm9qSUQ6IHsgZXE6IHByb2plY3QucHJvamVjdElEIH0gfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlByb2plY3QgSUQ6XCIsIHByb2plY3QucHJvamVjdElEKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRm9ybXMgZm9yIFByb2plY3QgJHtwcm9qZWN0LnByb2plY3ROYW1lfTpgLCBwcm9qZWN0Rm9ybXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvamVjdEZvcm1zLm1hcCgoZm9ybSkgPT4gKHtcclxuICAgICAgICAgIC4uLmZvcm0sXHJcbiAgICAgICAgICBwcm9qZWN0TmFtZTogcHJvamVjdC5wcm9qZWN0TmFtZSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH0pLFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gZm9ybXMuZmxhdCgpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybXMgd2l0aCBjbGllbnQ6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBmb3JtcyBmb3IgdGhlIGNsaWVudC5cIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKkdldEZvcm1zV2l0aENsaWVudChcIjFhZDc0YmNlLWJkOWQtNDEzMS04M2VmLWVmZmVjYmE3NGM3ZFwiKVxyXG4udGhlbigoZm9ybXMpID0+IGNvbnNvbGUubG9nKFwiRm9ybXM6XCIsIGZvcm1zKSlcclxuLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcikpOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXNJbmZvcm1hdGlvbigpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnM6IGNsaWVudEVycm9ycywgZGF0YTogY2xpZW50c0RhdGEgfSA9XHJcbiAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50Lmxpc3QoKTtcclxuXHJcbiAgICBpZiAoY2xpZW50RXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgY2xpZW50RXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGZvcm1zLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0cyA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgY2xpZW50SXRlbSBvZiBjbGllbnRzRGF0YSkge1xyXG4gICAgICBjb25zdCB7IGVycm9yczogcHJvamVjdEVycm9ycywgZGF0YTogcHJvamVjdHNEYXRhIH0gPVxyXG4gICAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IGNsaWVudEl0ZW0uaWQgfSB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIHByb2plY3RFcnJvcnMpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHByb2plY3RJdGVtIG9mIHByb2plY3RzRGF0YSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coYEZldGNoaW5nIGZvcm1zIGZvciBwcm9qZWN0OiAke3Byb2plY3RJdGVtLnByb2plY3ROYW1lfSwgSUQ6ICR7cHJvamVjdEl0ZW0ucHJvamVjdElEfWApO1xyXG5cclxuICAgICAgICBjb25zdCB7IGVycm9yczogZm9ybUVycm9ycywgZGF0YTogZm9ybXNEYXRhIH0gPVxyXG4gICAgICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICAgICAgICBmaWx0ZXI6IHsgcHJvaklEOiB7IGVxOiBwcm9qZWN0SXRlbS5wcm9qZWN0SUQgfSB9LCAvLyBFbnN1cmUgdGhlIGNvcnJlY3Qga2V5IGlzIHVzZWRcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZm9ybUVycm9ycykge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBmb3JtRXJyb3JzKTtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm1zXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgIGNsaWVudE5hbWU6IGNsaWVudEl0ZW0uQ2xpZW50TmFtZSxcclxuICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0SXRlbS5wcm9qZWN0TmFtZSxcclxuICAgICAgICAgIHByb2plY3RJRDogcHJvamVjdEl0ZW0ucHJvamVjdElELFxyXG4gICAgICAgICAgZm9ybXM6IGZvcm1zRGF0YS5tYXAoKGZvcm0pID0+ICh7XHJcbiAgICAgICAgICAgIGlkOiBmb3JtLmlkLFxyXG4gICAgICAgICAgICBuYW1lOiBmb3JtLm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmb3JtLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBwdWJsaXNoZWQ6IGZvcm0ucHVibGlzaGVkLFxyXG4gICAgICAgICAgICBjb250ZW50OiBmb3JtLmNvbnRlbnQsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogZm9ybS5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIHZpc2l0czogZm9ybS52aXNpdHMsXHJcbiAgICAgICAgICAgIHN1Ym1pc3Npb25zOiBmb3JtLnN1Ym1pc3Npb25zLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiUmVzdWx0czpcIiwgcmVzdWx0cyk7XHJcbiAgICByZXR1cm4gcmVzdWx0cztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLypjb25zdCBmb3Jtc0luZm8gPSBhd2FpdCBHZXRGb3Jtc0luZm9ybWF0aW9uKClcclxuY29uc29sZS5sb2coJ0Zvcm0gSW5mbzonLCBmb3Jtc0luZm8pOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0UHJvamVjdHNGcm9tQ2xpZW50TmFtZShDbGllbnROYW1lOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgLy8gRmV0Y2ggQ2xpZW50IGJhc2VkIG9uIENsaWVudE5hbWVcclxuICAgIGNvbnN0IHsgZXJyb3JzLCBkYXRhOiBjbGllbnREYXRhIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7IENsaWVudE5hbWU6IHsgZXE6IENsaWVudE5hbWUgfSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycyB8fCBjbGllbnREYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2xpZW50IG9yIGNsaWVudCBub3QgZm91bmQ6XCIsIGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNsaWVudCBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFzc3VtaW5nIGVhY2ggY2xpZW50IGhhcyBhbiBhcnJheSBvZiBwcm9qZWN0c1xyXG4gICAgY29uc3QgQ2xpZW50cyA9IGNsaWVudERhdGFbMF07IC8vIEFzc3VtaW5nIHRoZSBmaXJzdCBjbGllbnQgaW4gdGhlIGxpc3QgaXMgdGhlIG9uZSB3ZSdyZSBpbnRlcmVzdGVkIGluXHJcbiAgICBjb25zdCB7IGRhdGE6IHByb2plY3RzLCBlcnJvcnM6IHByb2plY3RFcnJvcnMgfSA9XHJcbiAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IENsaWVudElEOiB7IGVxOiBDbGllbnRzLmlkIH0gfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzOlwiLCBwcm9qZWN0RXJyb3JzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHByb2plY3ROYW1lcyA9IHByb2plY3RzLm1hcCgocHJvamVjdCkgPT4gcHJvamVjdC5wcm9qZWN0TmFtZSk7XHJcbiAgICAvLyBSZXR1cm4gY2xpZW50IGFuZCBhc3NvY2lhdGVkIHByb2plY3RzXHJcbiAgICByZXR1cm4geyBwcm9qZWN0TmFtZXMgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBDcmVhdGVGb3JtKFxyXG4gIG5hbWU6IHN0cmluZyxcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gIHByb2plY3ROYW1lOiBzdHJpbmcsXHJcbikge1xyXG4gIC8vIEZldGNoIHRoZSBwcm9qZWN0IGRldGFpbHMgdXNpbmcgcHJvamVjdE5hbWVcclxuICBjb25zdCB7IGVycm9yczogcHJvamVjdEVycm9ycywgZGF0YTogcHJvamVjdHNEYXRhIH0gPVxyXG4gICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7IHByb2plY3ROYW1lOiB7IGVxOiBwcm9qZWN0TmFtZSB9IH0sXHJcbiAgICB9KTtcclxuXHJcbiAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9qZWN0czpcIiwgcHJvamVjdEVycm9ycyk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggcHJvamVjdHMuXCIpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHByb2plY3RzRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgUHJvamVjdCB3aXRoIG5hbWUgXCIke3Byb2plY3ROYW1lfVwiIG5vdCBmb3VuZC5gKTtcclxuICB9XHJcblxyXG4gIC8vIEdldCB0aGUgZmlyc3QgbWF0Y2hpbmcgcHJvamVjdCdzIElEXHJcbiAgY29uc3QgcHJvaklEID0gcHJvamVjdHNEYXRhWzBdLnByb2plY3RJRDtcclxuXHJcbiAgLy8gTm93IGNyZWF0ZSB0aGUgZm9ybSB1c2luZyBwcm9qSURcclxuICBjb25zdCB7IGVycm9yczogZm9ybWVycm9ycywgZGF0YTogZm9ybSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmNyZWF0ZSh7XHJcbiAgICBwcm9qSUQ6IHByb2pJRCxcclxuICAgIG5hbWU6IG5hbWUsXHJcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgfSk7XHJcblxyXG4gIGlmIChmb3JtZXJyb3JzKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcgZm9ybTpcIiwgZm9ybWVycm9ycyk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBjcmVhdGluZyB0aGUgZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBmb3JtSWQ6IGZvcm0/LmlkLFxyXG4gICAgcHJvaklEOiBwcm9qSUQsXHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBydW5Gb3JtID0gYXN5bmMgKFxyXG4gIGZvcm1Vcmw6c3RyaW5nLFxyXG4gIEVxdWlwTmFtZTogc3RyaW5nLFxyXG4gIEVxdWlwVGFnOiBzdHJpbmcsXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgY3JlYXRlZFRhZ0lEPzogc3RyaW5nO1xyXG4gIHRhZ0NyZWF0ZWRBdD86IHN0cmluZztcclxufT4gPT4ge1xyXG4gIC8vY29uc29sZS5sb2coXCJydW5Gb3JtIGNhbGxlZCB3aXRoOlwiLCBmb3JtVXJsLCBFcXVpcE5hbWUsIEVxdWlwVGFnKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybVJlc3AgPSBhd2FpdCBHZXRGb3JtQ29udGVudEJ5VXJsKGZvcm1VcmwpO1xyXG4gICAgXHJcbiAgICBpZiAoIWZvcm1SZXNwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGb3JtIG5vdCBmb3VuZCB3aXRoIHRoZSBwcm92aWRlZCBUZXN0TmFtZSBhbmQgUHJvamVjdElEXCIpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm0gPSBmb3JtUmVzcDtcclxuXHJcbiAgICBjb25zdCBleGlzdGluZ1RhZ1Jlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkVxdWlwbWVudFRhZzIubGlzdCh7XHJcbiAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgIFRhZzogeyBlcTogRXF1aXBUYWcgfSxcclxuICAgICAgICBFcXVpcG1lbnROYW1lOiB7IGVxOiBFcXVpcE5hbWUgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGV4aXN0aW5nVGFnID0gZXhpc3RpbmdUYWdSZXNwLmRhdGE/LlswXTtcclxuXHJcbiAgICBpZiAoZXhpc3RpbmdUYWcpIHtcclxuICAgICAgY29uc3QgbGlua2VkRm9ybVJlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgICAgdGFnSUQ6IHsgZXE6IGV4aXN0aW5nVGFnLmlkIH0sXHJcbiAgICAgICAgICBmb3JtSUQ6IHsgZXE6IGZvcm0uaWQgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChsaW5rZWRGb3JtUmVzcC5kYXRhPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgIFwiVGhpcyBlcXVpcG1lbnQgYW5kIHRhZyBhcmUgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggdGhpcyBmb3JtIGFuZCBwcm9qZWN0LlwiLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYWxlcnQoXHJcbiAgICAgICAgICBcIkVycm9yOiBUaGlzIGVxdWlwbWVudCBhbmQgdGFnIGFyZSBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGZvcm0gYW5kIHByb2plY3QuXCIsXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNyZWF0ZVJlc3AgPSBudWxsO1xyXG4gICAgbGV0IGNyZWF0ZWRUYWdJRDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG4gICAgbGV0IHRhZ0NyZWF0ZWRBdDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGlmICghZXhpc3RpbmdUYWcpIHtcclxuICAgICAgY3JlYXRlUmVzcCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5jcmVhdGUoe1xyXG4gICAgICAgIFRhZzogRXF1aXBUYWcsXHJcbiAgICAgICAgRXF1aXBtZW50TmFtZTogRXF1aXBOYW1lLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghY3JlYXRlUmVzcC5kYXRhKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgRXF1aXBtZW50VGFnXCIpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNyZWF0ZWRUYWdJRCA9IGNyZWF0ZVJlc3AuZGF0YS5pZDtcclxuICAgICAgdGFnQ3JlYXRlZEF0ID0gbmV3IERhdGUoY3JlYXRlUmVzcC5kYXRhLmNyZWF0ZWRBdClcclxuICAgICAgICAudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIC5zcGxpdChcIlRcIilbMF07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybVRhZ1Jlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmNyZWF0ZSh7XHJcbiAgICAgIGZvcm1JRDogZm9ybS5pZCxcclxuICAgICAgdGFnSUQ6IGV4aXN0aW5nVGFnID8gZXhpc3RpbmdUYWcuaWQgOiBjcmVhdGVkVGFnSUQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIWZvcm1UYWdSZXNwLmRhdGEpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgRm9ybVRhZ1wiKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBjcmVhdGVkVGFnSUQsIHRhZ0NyZWF0ZWRBdCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZXhlY3V0aW5nIHJ1bkZvcm06XCIsIGVycm9yKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRmV0Y2ggZm9ybUlkIGJ5IFRlc3ROYW1lIGFuZCBQcm9qZWN0SURcclxuY29uc3QgZmV0Y2hGb3JtQnlOYW1lQW5kUHJvamVjdCA9IGFzeW5jIChcclxuICBUZXN0TmFtZTogc3RyaW5nLFxyXG4gIFByb2plY3RJRDogc3RyaW5nLFxyXG4pID0+IHtcclxuICB0cnkge1xyXG4gICAgLy9jb25zb2xlLmxvZyhcIkZldGNoaW5nIGZvcm0gd2l0aCBUZXN0TmFtZTpcIiwgVGVzdE5hbWUsIFwiYW5kIFByb2plY3RJRDpcIiwgUHJvamVjdElEKTtcclxuICAgIGNvbnN0IGZvcm1SZXNwID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHtcclxuICAgICAgICBuYW1lOiB7IGVxOiBUZXN0TmFtZSB9LFxyXG4gICAgICAgIHByb2pJRDogeyBlcTogUHJvamVjdElEIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL2NvbnNvbGUubG9nKFwiRm9ybSBmZXRjaCByZXNwb25zZTpcIiwgZm9ybVJlc3ApO1xyXG5cclxuICAgIC8vIElmIGZvcm0gZXhpc3RzLCByZXR1cm4gdGhlIGZpcnN0IHJlc3VsdFxyXG4gICAgcmV0dXJuIGZvcm1SZXNwLmRhdGE/LlswXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm06XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufTtcclxuXHJcbi8qYXdhaXQgcnVuRm9ybShcIlRlc3QgbmFtZSAxXCIsIFwiSEUxMDFQMDAxXCIsIFwiQ29tcHJlc3NvciBYXCIsIFwiVEFHLTAwMVwiKVxyXG4udGhlbigobmV3RXF1aXBtZW50VGFnKSA9PiBjb25zb2xlLmxvZyhcIkNyZWF0ZWQgRm9ybVRhZzpcIiwgbmV3RXF1aXBtZW50VGFnKSlcclxuLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcikpOyAvLyBIYW5kbGUgYW55IGVycm9ycyAqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1zQnlDbGllbnROYW1lKENsaWVudE5hbWU6IHN0cmluZykge1xyXG4gIC8vIDEuIEZldGNoIHRoZSBDbGllbnQgSURcclxuICBjb25zdCBjbGllbnRSZXN1bHQgPSBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5saXN0KHtcclxuICAgIGZpbHRlcjogeyBDbGllbnROYW1lOiB7IGVxOiBDbGllbnROYW1lIH0gfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgY2xpZW50RGF0YSA9IGNsaWVudFJlc3VsdC5kYXRhPy5bMF07XHJcbiAgaWYgKCFjbGllbnREYXRhKSByZXR1cm4gW107XHJcblxyXG4gIGNvbnN0IGNsaWVudElEID0gY2xpZW50RGF0YS5pZDtcclxuXHJcbiAgLy8gMi4gRmV0Y2ggYWxsIFByb2plY3RzIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgQ2xpZW50SURcclxuICBjb25zdCBwcm9qZWN0c1Jlc3VsdCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IGNsaWVudElEIH0gfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcHJvamVjdHMgPSBwcm9qZWN0c1Jlc3VsdC5kYXRhO1xyXG4gIGlmICghcHJvamVjdHMubGVuZ3RoKSByZXR1cm4gW107XHJcblxyXG4gIGNvbnN0IHByb2plY3RJRHMgPSBwcm9qZWN0cy5tYXAoKHByb2plY3QpID0+IHByb2plY3QucHJvamVjdElEKTtcclxuXHJcbiAgLy8gMy4gRmV0Y2ggYWxsIEZvcm1zIGZvciB0aGUgZm91bmQgcHJvamVjdHNcclxuICBjb25zdCBhbGxGb3JtcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgcHJvamVjdElEcy5tYXAoYXN5bmMgKHByb2plY3RJRCkgPT4ge1xyXG4gICAgICBjb25zdCBmb3Jtc1Jlc3VsdCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgcHJvaklEOiB7IGVxOiBwcm9qZWN0SUQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGZvcm1zID0gZm9ybXNSZXN1bHQuZGF0YTtcclxuICAgICAgY29uc3QgZm9ybUlEcyA9IGZvcm1zLm1hcCgoZm9ybSkgPT4gZm9ybS5pZCk7XHJcblxyXG4gICAgICBjb25zdCBmb3JtRGV0YWlsc1dpdGhFcXVpcG1lbnQgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICBmb3JtSURzLm1hcChhc3luYyAoZm9ybUlkKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IGZvcm1UYWdzLCBlcnJvcnM6IGZvcm1UYWdzRXJyb3JzIH0gPVxyXG4gICAgICAgICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICAgICAgICAgIGZpbHRlcjogeyBmb3JtSUQ6IHsgZXE6IGZvcm1JZCB9IH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGlmIChmb3JtVGFnc0Vycm9ycykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICAgIGBFcnJvciBmZXRjaGluZyBmb3JtIHRhZ3MgZm9yIGZvcm0gSUQgJHtmb3JtSWR9OmAsXHJcbiAgICAgICAgICAgICAgZm9ybVRhZ3NFcnJvcnMsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IHRhZ0lEcyA9IGZvcm1UYWdzLm1hcCgodGFnKSA9PiB0YWcudGFnSUQpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGVxdWlwbWVudEFuZFRhZ3MgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgdGFnSURzLm1hcChhc3luYyAodGFnSUQpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IGVxdWlwbWVudERhdGEsIGVycm9yczogZXF1aXBtZW50RXJyb3JzIH0gPVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5FcXVpcG1lbnRUYWcyLmxpc3Qoe1xyXG4gICAgICAgICAgICAgICAgICBmaWx0ZXI6IHRhZ0lEID8geyBpZDogeyBlcTogdGFnSUQgfSB9IDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChlcXVpcG1lbnRFcnJvcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgIGBFcnJvciBmZXRjaGluZyBlcXVpcG1lbnQgZm9yIHRhZ0lEICR7dGFnSUR9OmAsXHJcbiAgICAgICAgICAgICAgICAgIGVxdWlwbWVudEVycm9ycyxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBlcXVpcG1lbnREYXRhLm1hcCgoZXF1aXBtZW50KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgZXF1aXBtZW50TmFtZTogZXF1aXBtZW50LkVxdWlwbWVudE5hbWUsXHJcbiAgICAgICAgICAgICAgICBlcXVpcG1lbnRUYWc6IGVxdWlwbWVudC5UYWcsXHJcbiAgICAgICAgICAgICAgICB0YWdDcmVhdGVkQXQ6IG5ldyBEYXRlKGVxdWlwbWVudC5jcmVhdGVkQXQpXHJcbiAgICAgICAgICAgICAgICAgIC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgIC5zcGxpdChcIlRcIilbMF0sIC8vIDwtLSBBZGljaW9uYWRvIGFxdWlcclxuICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IGZvcm1zLmZpbmQoKGZvcm0pID0+IGZvcm0uaWQgPT09IGZvcm1JZCk7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjbGllbnROYW1lOiBjbGllbnREYXRhLkNsaWVudE5hbWUsXHJcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0cy5maW5kKFxyXG4gICAgICAgICAgICAgIChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3RJRCA9PT0gcHJvamVjdElELFxyXG4gICAgICAgICAgICApPy5wcm9qZWN0TmFtZSxcclxuICAgICAgICAgICAgcHJvamVjdElELFxyXG4gICAgICAgICAgICBmb3JtTmFtZTogZm9ybURhdGE/Lm5hbWUsXHJcbiAgICAgICAgICAgIGVxdWlwbWVudDogZXF1aXBtZW50QW5kVGFncy5mbGF0KCksXHJcbiAgICAgICAgICAgIHN1Ym1pc3Npb246IGZvcm1EYXRhPy5zdWJtaXNzaW9ucyB8fCAwLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZm9ybURhdGE/LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBmb3JtSWQ6IGZvcm1JZCxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSksXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4gZm9ybURldGFpbHNXaXRoRXF1aXBtZW50LmZpbHRlcigoZGV0YWlsKSA9PiBkZXRhaWwgIT09IG51bGwpO1xyXG4gICAgfSksXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgZmxhdHRlbmVkRm9ybXMgPSBhbGxGb3Jtcy5mbGF0KCk7XHJcblxyXG4gIHJldHVybiBmbGF0dGVuZWRGb3Jtcy5tYXAoKGZvcm1EZXRhaWwpID0+ICh7XHJcbiAgICBjbGllbnROYW1lOiBmb3JtRGV0YWlsLmNsaWVudE5hbWUsXHJcbiAgICBwcm9qZWN0TmFtZTogZm9ybURldGFpbC5wcm9qZWN0TmFtZSxcclxuICAgIHByb2plY3RJRDogZm9ybURldGFpbC5wcm9qZWN0SUQsXHJcbiAgICBmb3JtSUQ6IGZvcm1EZXRhaWwuZm9ybUlkLFxyXG4gICAgZm9ybU5hbWU6IGZvcm1EZXRhaWwuZm9ybU5hbWUsXHJcbiAgICBkZXNjcmlwdGlvbjogZm9ybURldGFpbC5kZXNjcmlwdGlvbixcclxuICAgIGVxdWlwbWVudERldGFpbHM6IGZvcm1EZXRhaWwuZXF1aXBtZW50Lm1hcCgoZXF1aXBtZW50KSA9PiAoe1xyXG4gICAgICBlcXVpcG1lbnROYW1lOiBlcXVpcG1lbnQ/LmVxdWlwbWVudE5hbWUgfHwgXCJVbmtub3duXCIsXHJcbiAgICAgIGVxdWlwbWVudFRhZzogZXF1aXBtZW50Py5lcXVpcG1lbnRUYWcgfHwgXCJVbmtub3duXCIsXHJcbiAgICAgIHRhZ0NyZWF0ZWRBdDogZXF1aXBtZW50Py50YWdDcmVhdGVkQXQgfHwgXCJVbmtub3duXCIsIC8vIDwtLSBBZGljaW9uYWRvIGFxdWkgdGFtYsOpbVxyXG4gICAgfSkpLFxyXG4gICAgc3VibWlzc2lvbjogZm9ybURldGFpbC5zdWJtaXNzaW9uLFxyXG4gIH0pKTtcclxufVxyXG5cclxuLyphd2FpdCBHZXRGb3Jtc0J5Q2xpZW50TmFtZShcIlJpbyBUaW50b1wiKVxyXG4gIC50aGVuKChmbGF0dGVuZWRGb3JtcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCLinIUgRm9ybXMgZnJvbSBjbGllbnQ6XCIsIGZsYXR0ZW5lZEZvcm1zKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZmV0Y2hpbmcgZm9ybXM6XCIsIGVycm9yKTtcclxuICB9KTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFNhdmVGb3JtQWZ0ZXJUZXN0KFxyXG4gIEZvcm1JRDogc3RyaW5nLFxyXG4gIFRhZ0lEOiBzdHJpbmcsXHJcbiAgY29udGVudDogc3RyaW5nLFxyXG4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtVGFncywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHtcclxuICAgICAgICBmb3JtSUQ6IHsgZXE6IEZvcm1JRCB9LFxyXG4gICAgICAgIHRhZ0lEOiB7IGVxOiBUYWdJRCB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9ycyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtVGFnVG9VcGRhdGUgPSBmb3JtVGFnc1swXTtcclxuXHJcbiAgICBpZiAoIWZvcm1UYWdUb1VwZGF0ZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiTm90aGluZyBmb3VuZCBmb3IgdGhpcyBmb3JtSUQgYW5kIHRhZ0lEXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIudXBkYXRlKHtcclxuICAgICAgaWQ6IGZvcm1UYWdUb1VwZGF0ZS5pZCxcclxuICAgICAgY29udGVudFRlc3Q6IGNvbnRlbnQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZWQ6XCIsIHVwZGF0ZWQpO1xyXG4gICAgcmV0dXJuIHVwZGF0ZWQ7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgU2F2ZUZvcm1BZnRlclRlc3Q6XCIsIGVycik7XHJcbiAgfVxyXG59XHJcblxyXG4vKiAgU2F2ZUZvcm1BZnRlclRlc3QoXCI5NmEzNGNhMC0wM2EyLTRmNzktODg1My00OTVlN2VhM2QwNjBcIiwgXCI0MGRmNTk4MS1lOGQwLTQ1ZTEtYjhmNC05OTIyZjVjY2NlNTJcIiwgXCJUZXN0IGNvbnRlbnRcIilcclxuLnRoZW4oKHVwZGF0ZWRGb3JtKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJGb3JtIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5OlwiLCB1cGRhdGVkRm9ybSk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgZm9ybTpcIiwgZXJyb3IpO1xyXG59KTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnRlbnRCeUZvcm1JRGFuZFRhZ0lEKFxyXG4gIEZvcm1JRDogc3RyaW5nLFxyXG4gIFRhZ0lEOiBzdHJpbmcsXHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm1UYWdzLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIubGlzdCh7XHJcbiAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgIGZvcm1JRDogeyBlcTogRm9ybUlEIH0sXHJcbiAgICAgICAgdGFnSUQ6IHsgZXE6IFRhZ0lEIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm1UYWcgPSBmb3JtVGFnc1swXTtcclxuXHJcbiAgICBpZiAoIWZvcm1UYWcpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk5vdGhpbmcgZm91bmQgZm9yIHRoaXMgZm9ybUlEIGFuZCB0YWdJRFwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbnRlbnQgPSBmb3JtVGFnLmNvbnRlbnRUZXN0O1xyXG5cclxuICAgIC8vY29uc29sZS5sb2coXCJGZXRjaGVkIGNvbnRlbnQ6XCIsIGNvbnRlbnQpO1xyXG4gICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0Q29udGVudEJ5Rm9ybUlEYW5kVGFnSUQ6XCIsIGVycik7XHJcbiAgfVxyXG59XHJcblxyXG4vKmdldENvbnRlbnRCeUZvcm1JRGFuZFRhZ0lEKFwiMmUwNjlkZmEtM2U2ZC00MmQyLWJlMDYtNTQ0YjVhYTk5YjQwXCIsIFwiOTM5OTkzNWEtNTllYS00MTNmLTgzMDMtNDFiOGZjNGY5N2I3XCIpXHJcbi50aGVuKCh1cGRhdGVkRm9ybSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiRm9ybSB1cGRhdGVkIHN1Y2Nlc3NmdWxseTpcIiwgdXBkYXRlZEZvcm0pO1xyXG59KVxyXG4uY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGZvcm06XCIsIGVycm9yKTtcclxufSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFcXVpcG1lbnRUYWdJRChcclxuICBlcXVpcG1lbnROYW1lOiBzdHJpbmcsXHJcbiAgZXF1aXBtZW50VGFnOiBzdHJpbmcsXHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBRdWVyeSB0byBmZXRjaCBlcXVpcG1lbnQgYnkgaXRzIG5hbWUgYW5kIHRhZ1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgRXF1aXBtZW50TmFtZTogeyBlcTogZXF1aXBtZW50TmFtZSB9LFxyXG4gICAgICAgIFRhZzogeyBlcTogZXF1aXBtZW50VGFnIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDaGVjayBmb3IgZXJyb3JzXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBlcXVpcG1lbnQgdGFnOlwiLCBlcnJvcnMpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgZGF0YSBleGlzdHNcclxuICAgIGNvbnN0IGVxdWlwbWVudFRhZ0RhdGEgPSBkYXRhWzBdOyAvLyBBc3N1bWluZyB0aGUgZmlyc3QgZW50cnkgbWF0Y2hlcyB0aGUgc2VhcmNoXHJcbiAgICBpZiAoIWVxdWlwbWVudFRhZ0RhdGEpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk5vIG1hdGNoaW5nIGVxdWlwbWVudCBmb3VuZCBmb3IgZ2l2ZW4gbmFtZSBhbmQgdGFnLlwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgZXF1aXBtZW50VGFnSURcclxuICAgIHJldHVybiBlcXVpcG1lbnRUYWdEYXRhLmlkOyAvLyBBc3N1bWluZyBgaWRgIGlzIHRoZSBlcXVpcG1lbnRUYWdJRFxyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldEVxdWlwbWVudFRhZ0lEOlwiLCBlcnIpO1xyXG4gIH1cclxufVxyXG5cclxuLypnZXRFcXVpcG1lbnRUYWdJRChcIkVxdWlwMVwiLCBcIlRhZzFcIilcclxuLnRoZW4oKHVwZGF0ZWRGb3JtKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJFcXVpcCBUQUcgSUQ6XCIsIHVwZGF0ZWRGb3JtKTtcclxufSlcclxuLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBmb3JtOlwiLCBlcnJvcik7XHJcbn0pOyovXHJcbiJdLCJuYW1lcyI6WyJHZXRDbGllbnRzIiwiR2V0UHJvamVjdHMiLCJHZXRGb3JtU3RhdHMiLCJHZXRGb3JtcyIsIkdldEZvcm1CeUlkIiwiVXBkYXRlRm9ybUNvbnRlbnQiLCJzYXZlRm9ybUFjdGlvbiIsIlB1Ymxpc2hGb3JtIiwicHVibGlzaEZvcm1BY3Rpb24iLCJHZXRGb3JtQ29udGVudEJ5VXJsIiwiU3VibWl0Rm9ybSIsInN1Ym1pdEZvcm1BY3Rpb24iLCJHZXRGb3JtV2l0aFN1Ym1pc3Npb25zIiwiR2V0U3VibWlzc2lvbldpdGhUYWdJbmZvIiwiR2V0Rm9ybVdpdGhTdWJtaXNzaW9uRGV0YWlscyIsIkdldEZvcm1TdWJtaXNzaW9uQnlJZCIsIkdldEVxdWlwbWVudFRhZ3NGb3JGb3JtIiwiR2V0Q2xpZW50V2l0aFByb2plY3RzIiwiR2V0Rm9ybXNXaXRoQ2xpZW50IiwiR2V0Rm9ybXNJbmZvcm1hdGlvbiIsIkdldFByb2plY3RzRnJvbUNsaWVudE5hbWUiLCJDcmVhdGVGb3JtIiwicnVuRm9ybSIsIkdldEZvcm1zQnlDbGllbnROYW1lIiwiU2F2ZUZvcm1BZnRlclRlc3QiLCJnZXRDb250ZW50QnlGb3JtSURhbmRUYWdJRCIsImdldEVxdWlwbWVudFRhZ0lEIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./actions/form.tsx\n"));

/***/ })

});