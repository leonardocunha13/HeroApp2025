"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/submit/[formUrl]/page",{

/***/ "(app-pages-browser)/./actions/form.tsx":
/*!**************************!*\
  !*** ./actions/form.tsx ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CreateForm: () => (/* binding */ CreateForm),\n/* harmony export */   GetClientWithProjects: () => (/* binding */ GetClientWithProjects),\n/* harmony export */   GetClients: () => (/* binding */ GetClients),\n/* harmony export */   GetEquipmentTagsForForm: () => (/* binding */ GetEquipmentTagsForForm),\n/* harmony export */   GetFormById: () => (/* binding */ GetFormById),\n/* harmony export */   GetFormContentByUrl: () => (/* binding */ GetFormContentByUrl),\n/* harmony export */   GetFormStats: () => (/* binding */ GetFormStats),\n/* harmony export */   GetFormSubmissionById: () => (/* binding */ GetFormSubmissionById),\n/* harmony export */   GetFormWithSubmissions: () => (/* binding */ GetFormWithSubmissions),\n/* harmony export */   GetForms: () => (/* binding */ GetForms),\n/* harmony export */   GetFormsByClientName: () => (/* binding */ GetFormsByClientName),\n/* harmony export */   GetFormsInformation: () => (/* binding */ GetFormsInformation),\n/* harmony export */   GetFormsWithClient: () => (/* binding */ GetFormsWithClient),\n/* harmony export */   GetProjects: () => (/* binding */ GetProjects),\n/* harmony export */   GetProjectsFromClientName: () => (/* binding */ GetProjectsFromClientName),\n/* harmony export */   PublishForm: () => (/* binding */ PublishForm),\n/* harmony export */   SaveFormAfterTest: () => (/* binding */ SaveFormAfterTest),\n/* harmony export */   SubmitForm: () => (/* binding */ SubmitForm),\n/* harmony export */   UpdateFormContent: () => (/* binding */ UpdateFormContent),\n/* harmony export */   getContentByFormIDandTagID: () => (/* binding */ getContentByFormIDandTagID),\n/* harmony export */   getEquipmentTagID: () => (/* binding */ getEquipmentTagID),\n/* harmony export */   publishFormAction: () => (/* binding */ publishFormAction),\n/* harmony export */   runForm: () => (/* binding */ runForm),\n/* harmony export */   saveFormAction: () => (/* binding */ saveFormAction),\n/* harmony export */   submitFormAction: () => (/* binding */ submitFormAction)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\":\"GetClients\",\"0056b66f5e0bfda60da83a467cac83458903790355\":\"GetProjects\",\"005890e9ace11382590dfe256d18a985d80ef53664\":\"GetFormStats\",\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\":\"GetFormsInformation\",\"00ad1843f1c28ec580071c5c56699400132f7f9d12\":\"GetForms\",\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\":\"publishFormAction\",\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\":\"saveFormAction\",\"40226b3b5d44a7254f49759d036f24d7c23272d040\":\"GetFormById\",\"403145f8835472f5e7741c1a435bba5cc897cb941f\":\"GetFormContentByUrl\",\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\":\"GetEquipmentTagsForForm\",\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\":\"GetFormsWithClient\",\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\":\"submitFormAction\",\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\":\"GetProjectsFromClientName\",\"408519304d22a0e05a5b296d09cb48801817b8def8\":\"GetFormSubmissionById\",\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\":\"GetFormWithSubmissions\",\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\":\"GetFormsByClientName\",\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\":\"GetClientWithProjects\",\"602a21f6cf4717559298ad70c1798c88ee23f93130\":\"SubmitForm\",\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\":\"getEquipmentTagID\",\"60922447ba3f326fdf23eac6584943278d55d45d32\":\"getContentByFormIDandTagID\",\"60cb494246e13d01c97932a238a3d4622a74f55852\":\"UpdateFormContent\",\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\":\"CreateForm\",\"70512de972c6c1b3fffa11e6c3274976b337deee8b\":\"PublishForm\",\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\":\"SaveFormAfterTest\",\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\":\"runForm\"} */ \nvar GetClients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClients\");\nvar GetProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"0056b66f5e0bfda60da83a467cac83458903790355\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjects\");\nvar GetFormStats = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"005890e9ace11382590dfe256d18a985d80ef53664\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormStats\");\nvar GetForms = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00ad1843f1c28ec580071c5c56699400132f7f9d12\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetForms\");\nvar GetFormById = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40226b3b5d44a7254f49759d036f24d7c23272d040\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormById\");\nvar UpdateFormContent = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60cb494246e13d01c97932a238a3d4622a74f55852\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"UpdateFormContent\");\nvar saveFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"saveFormAction\");\nvar PublishForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70512de972c6c1b3fffa11e6c3274976b337deee8b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"PublishForm\");\nvar publishFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"publishFormAction\");\nvar GetFormContentByUrl = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403145f8835472f5e7741c1a435bba5cc897cb941f\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormContentByUrl\");\nvar SubmitForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"602a21f6cf4717559298ad70c1798c88ee23f93130\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SubmitForm\");\nvar submitFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"submitFormAction\");\nvar GetFormWithSubmissions = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormWithSubmissions\");\nvar GetFormSubmissionById = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"408519304d22a0e05a5b296d09cb48801817b8def8\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormSubmissionById\");\nvar GetEquipmentTagsForForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetEquipmentTagsForForm\");\nvar GetClientWithProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClientWithProjects\");\nvar GetFormsWithClient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsWithClient\");\nvar GetFormsInformation = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsInformation\");\nvar GetProjectsFromClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjectsFromClientName\");\nvar CreateForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"CreateForm\");\nvar runForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"runForm\");\nvar GetFormsByClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsByClientName\");\nvar SaveFormAfterTest = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SaveFormAfterTest\");\nvar getContentByFormIDandTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60922447ba3f326fdf23eac6584943278d55d45d32\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getContentByFormIDandTagID\");\nvar getEquipmentTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getEquipmentTagID\");\n /*getEquipmentTagID(\"Equip1\", \"Tag1\")\r\n.then((updatedForm) => {\r\n  console.log(\"Equip TAG ID:\", updatedForm);\r\n})\r\n.catch((error) => {\r\n  console.error(\"Error updating form:\", error);\r\n});*/ \n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FjdGlvbnMvZm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXVJc0JBLDJCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUEwQ0FDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFxQkFDLDZCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFzQ0FDLHlCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFtQkFDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUE4REFDLGtDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFzQkFDLCtCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUEwQkFDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUF3QkFDLGtDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFRQUMsb0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXFDQUMsMkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTJEQUMsaUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdCQUMsdUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTRCQUMsc0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtCQUMsd0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdEQUMsc0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQThCQUMsbUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZDQUMsb0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdFQUMsMENBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStCQUMsMkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBDVEMsd0JBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtIU0MscUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXVIQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZDQUMsMkNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXlDQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtDQWlDdEI7Ozs7OztHQU1HIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxkZWplc3VzLkhFUk9cXE9uZURyaXZlIC0gSGVybyBFbmdpbmVlcmluZ1xcRGVza3RvcFxcSGVyb0F1ZGl0QXBwMjAyNVxcSGVyb0F1ZGl0QXBwMjAyNVxcYWN0aW9uc1xcZm9ybS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XHJcblxyXG5pbXBvcnQgeyBBbXBsaWZ5IH0gZnJvbSBcImF3cy1hbXBsaWZ5XCI7XHJcbmltcG9ydCBvdXRwdXRzIGZyb20gXCIuLi9hbXBsaWZ5X291dHB1dHMuanNvblwiO1xyXG5pbXBvcnQgdHlwZSB7IFNjaGVtYSB9IGZyb20gXCIuLi9hbXBsaWZ5L2RhdGEvcmVzb3VyY2VcIjtcclxuaW1wb3J0IHsgZ2VuZXJhdGVDbGllbnQgfSBmcm9tIFwiYXdzLWFtcGxpZnkvZGF0YVwiO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlciB9IGZyb20gXCJhd3MtYW1wbGlmeS9hdXRoXCI7IC8vIEVuc3VyZSBnZXRDdXJyZW50VXNlciBpcyBpbXBvcnRlZCBjb3JyZWN0bHlcclxuLy8vaW1wb3J0IHsgdmkgfSBmcm9tIFwiZGF0ZS1mbnMvbG9jYWxlXCI7XHJcbi8vaW1wb3J0IHsgc3ViIH0gZnJvbSBcImRhdGUtZm5zXCI7XHJcbi8vaW1wb3J0IHsgc3RyaW5nIH0gZnJvbSAnem9kJztcclxuLy9pbXBvcnQgeyBmb3JtU2NoZW1hVHlwZSB9IGZyb20gXCIuLi9zY2hlbWFzL2Zvcm1cIjtcclxuXHJcbkFtcGxpZnkuY29uZmlndXJlKG91dHB1dHMpO1xyXG5cclxuY29uc3QgY2xpZW50ID0gZ2VuZXJhdGVDbGllbnQ8U2NoZW1hPigpO1xyXG5cclxuLy8gVXNlck5vdEZvdW5kRXJyIGNsYXNzIGZvciBjdXN0b20gZXJyb3IgaGFuZGxpbmdcclxuY2xhc3MgVXNlck5vdEZvdW5kRXJyIGV4dGVuZHMgRXJyb3Ige31cclxuXHJcbi8qZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEluc2VydENsaWVudChOYW1lQ2xpZW50OiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50LmNyZWF0ZSh7XHJcbiAgICAgIENsaWVudE5hbWU6IE5hbWVDbGllbnQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluc2VydCBjbGllbnQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybnMgdGhlIGluc2VydGVkIGNsaWVudCBkYXRhXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59Ki9cclxuLypJbnNlcnRDbGllbnQoXCJGb3J0ZXNjdWVcIilcclxuICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coXCJDbGllbnQ6XCIsIGRhdGEpKVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjbGllbnQgd2l0aCBwcm9qZWN0czpcIiwgZXJyb3IpKTsqL1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gaW5zZXJ0IGEgc2luZ2xlIHByb2plY3QgKHlvdSBtYXkgYWxyZWFkeSBoYXZlIHNvbWV0aGluZyBsaWtlIHRoaXMpXHJcbi8qZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEluc2VydFByb2plY3QobmFtZTogc3RyaW5nLCBwcm9qTnVtOiBzdHJpbmcsIGNsaWVudElEOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQuY3JlYXRlKHtcclxuICAgICAgcHJvamVjdElEOiBwcm9qTnVtLFxyXG4gICAgICBwcm9qZWN0TmFtZTogbmFtZSxcclxuICAgICAgQ2xpZW50SUQ6IGNsaWVudElEXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluc2VydCBjbGllbnQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybnMgdGhlIGluc2VydGVkIGNsaWVudCBkYXRhXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59Ki9cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGluc2VydCBtdWx0aXBsZSBwcm9qZWN0c1xyXG4vKmV4cG9ydCBhc3luYyBmdW5jdGlvbiBJbnNlcnRNdWx0aXBsZVByb2plY3RzKG5hbWVzOiBzdHJpbmdbXSwgcHJvak51bTogc3RyaW5nW10sIGNsaWVudElEczogc3RyaW5nW10pIHtcclxuICBjb25zdCBpbnNlcnRlZFByb2plY3RzOiBhbnlbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBzdWNjZXNzZnVsbHkgaW5zZXJ0ZWQgcHJvamVjdHNcclxuICBjb25zdCBmYWlsZWRQcm9qZWN0czogc3RyaW5nW10gPSBbXTsgLy8gQXJyYXkgdG8gc3RvcmUgcHJvamVjdCBuYW1lcyB0aGF0IGZhaWxlZCB0byBpbnNlcnRcclxuXHJcbiAgLy8gRW5zdXJlIHRoYXQgaW5wdXQgYXJyYXlzIGhhdmUgdGhlIHNhbWUgbGVuZ3RoXHJcbiAgaWYgKG5hbWVzLmxlbmd0aCAhPT0gcHJvak51bS5sZW5ndGggfHwgcHJvak51bS5sZW5ndGggIT09IGNsaWVudElEcy5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIklucHV0IGFycmF5cyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlwiKTtcclxuICB9XHJcblxyXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgYXJyYXlzIGFuZCBpbnNlcnQgcHJvamVjdHMgb25lIGJ5IG9uZVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IG5hbWUgPSBuYW1lc1tpXTtcclxuICAgIGNvbnN0IHByb2plY3ROdW1iZXIgPSBwcm9qTnVtW2ldO1xyXG4gICAgY29uc3QgY2xpZW50SUQgPSBjbGllbnRJRHNbaV07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcHJvamVjdERhdGEgPSBhd2FpdCBJbnNlcnRQcm9qZWN0KG5hbWUsIHByb2plY3ROdW1iZXIsIGNsaWVudElEKTsgLy8gQ2FsbCB0byBpbnNlcnQgYSBzaW5nbGUgcHJvamVjdFxyXG4gICAgICBpbnNlcnRlZFByb2plY3RzLnB1c2gocHJvamVjdERhdGEpOyAvLyBTdG9yZSB0aGUgc3VjY2Vzc2Z1bCBpbnNlcnQgcmVzdWx0XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gaW5zZXJ0IHByb2plY3Q6ICR7bmFtZX1gLCBlcnJvcik7XHJcbiAgICAgIGZhaWxlZFByb2plY3RzLnB1c2gobmFtZSk7IC8vIFN0b3JlIHRoZSBmYWlsZWQgcHJvamVjdCBuYW1lXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHM6IHN1Y2Nlc3NmdWwgaW5zZXJ0aW9ucyBhbmQgZmFpbGVkIG9uZXNcclxuICByZXR1cm4ge1xyXG4gICAgaW5zZXJ0ZWRQcm9qZWN0cyxcclxuICAgIGZhaWxlZFByb2plY3RzLFxyXG4gIH07XHJcbn0qL1xyXG5cclxuLypleHBvcnQgYXN5bmMgZnVuY3Rpb24gSW5zZXJ0TXVsdGlwbGVDbGllbnRzKG5hbWVzOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IGluc2VydGVkQ2xpZW50czogYW55W10gPSBbXTsgLy8gQXJyYXkgdG8gc3RvcmUgc3VjY2Vzc2Z1bGx5IGluc2VydGVkIGNsaWVudHNcclxuICBjb25zdCBmYWlsZWRDbGllbnRzOiBzdHJpbmdbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBjbGllbnQgbmFtZXMgdGhhdCBmYWlsZWQgdG8gaW5zZXJ0XHJcblxyXG4gIGZvciAobGV0IG5hbWUgb2YgbmFtZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsaWVudERhdGEgPSBhd2FpdCBJbnNlcnRDbGllbnQobmFtZSk7IC8vIENhbGwgdGhlIHNpbmdsZSBjbGllbnQgaW5zZXJ0IGZ1bmN0aW9uXHJcbiAgICAgIGluc2VydGVkQ2xpZW50cy5wdXNoKGNsaWVudERhdGEpOyAvLyBTdG9yZSB0aGUgc3VjY2Vzc2Z1bCBpbnNlcnQgcmVzdWx0XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gaW5zZXJ0IGNsaWVudDogJHtuYW1lfWAsIGVycm9yKTtcclxuICAgICAgZmFpbGVkQ2xpZW50cy5wdXNoKG5hbWUpOyAvLyBTdG9yZSB0aGUgZmFpbGVkIGNsaWVudCBuYW1lXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHNcclxuICByZXR1cm4ge1xyXG4gICAgaW5zZXJ0ZWRDbGllbnRzLFxyXG4gICAgZmFpbGVkQ2xpZW50cyxcclxuICB9O1xyXG59Ki9cclxuXHJcbi8qY29uc3QgY2xpZW50cyA9IGF3YWl0IEdldENsaWVudHMoKTsqL1xyXG5cclxuLypjb25zdCBjSUQgPSBjbGllbnRzLmNsaWVudElEcztcclxuY29uc29sZS5sb2coY0lEKTtcclxuY29uc3QgcHJvamVjdHMgPSBbXCJwcm9qZWN0MVwiLCBcInByb2plY3QyXCIsXCJwcm9qZWN0M1wiLFwicHJvamVjdDRcIl07XHJcbmNvbnN0ICBwcm9qTnVtYmVycyA9IFtcInByb2pOdW1iZXIxXCIsXCJwcm9qTnVtYmVyMlwiLFwicHJvak51bWJlcjNcIixcInByb2pOdW1iZXI0XCJdOyovXHJcblxyXG4vKkluc2VydFByb2plY3QocHJvamVjdHNbMF0scHJvak51bWJlcnNbMF0sY0lEWzBdKTtcclxuSW5zZXJ0UHJvamVjdChwcm9qZWN0c1sxXSxwcm9qTnVtYmVyc1sxXSxjSURbMV0pO1xyXG5JbnNlcnRQcm9qZWN0KHByb2plY3RzWzJdLHByb2pOdW1iZXJzWzJdLGNJRFsyXSk7XHJcbkluc2VydFByb2plY3QocHJvamVjdHNbM10scHJvak51bWJlcnNbM10sY0lEWzNdKTsqL1xyXG5cclxuLypjb25zdCBjbGllbnROYW1lcyA9IFtcIkNsaWVudDRcIl07IC8vIEV4YW1wbGUgY2xpZW50IG5hbWVzXHJcblxyXG5JbnNlcnRNdWx0aXBsZUNsaWVudHMoY2xpZW50TmFtZXMpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgaW5zZXJ0ZWQgY2xpZW50czpcIiwgcmVzdWx0Lmluc2VydGVkQ2xpZW50cyk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBpbnNlcnQgY2xpZW50czpcIiwgcmVzdWx0LmZhaWxlZENsaWVudHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluc2VydGluZyBjbGllbnRzOlwiLCBlcnJvcik7XHJcbiAgfSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRDbGllbnRzKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggY2xpZW50cy5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXh0cmFjdCBjbGllbnQgbmFtZXMgYW5kIGNsaWVudCBJRHNcclxuICAgIGNvbnN0IGNsaWVudE5hbWVzID0gZGF0YS5tYXAoKGNsaWVudCkgPT4gY2xpZW50LkNsaWVudE5hbWUpO1xyXG4gICAgY29uc3QgY2xpZW50SURzID0gZGF0YS5tYXAoKGNsaWVudCkgPT4gY2xpZW50LmlkKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gYm90aCBjbGllbnQgbmFtZXMgYW5kIElEcyBpbiBhbiBvYmplY3Qgb3IgYW4gYXJyYXlcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNsaWVudE5hbWVzLFxyXG4gICAgICBjbGllbnRJRHMsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEFsdGVybmF0aXZlbHksIGlmIHlvdSB3YW50IHRvIHJldHVybiBhbiBhcnJheTpcclxuICAgIC8vIHJldHVybiBbY2xpZW50TmFtZXMsIGNsaWVudElEc107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKmFzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHtcclxuICBjb25zdCBjbGllbnRzID0gYXdhaXQgR2V0Q2xpZW50cygpO1xyXG4gIGNvbnN0IGNJRCA9IGNsaWVudHMuY2xpZW50SURzO1xyXG4gIGNvbnNvbGUubG9nKGNJRCk7XHJcbiAgY29uc3QgcHJvamVjdHMgPSBbXCJwcm9qZWN0MVwiLCBcInByb2plY3QyXCIsIFwicHJvamVjdDNcIiwgXCJwcm9qZWN0NFwiXTtcclxuICBjb25zdCBwcm9qTnVtYmVycyA9IFtcInByb2pOdW1iZXIxXCIsIFwicHJvak51bWJlcjJcIiwgXCJwcm9qTnVtYmVyM1wiLCBcInByb2pOdW1iZXI0XCJdO1xyXG4gXHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1swXSwgcHJvak51bWJlcnNbMF0sIGNJRFswXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1sxXSwgcHJvak51bWJlcnNbMV0sIGNJRFsxXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1syXSwgcHJvak51bWJlcnNbMl0sIGNJRFsyXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1szXSwgcHJvak51bWJlcnNbM10sIGNJRFszXSk7XHJcbn0qL1xyXG5cclxuLy9mZXRjaERhdGEoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRQcm9qZWN0cygpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggcHJvamVjdHMuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlcGFyYXRlIHByb2plY3RJRHMgYW5kIHByb2plY3ROYW1lc1xyXG4gICAgY29uc3QgcHJvamVjdElEcyA9IGRhdGEubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3RJRCk7IC8vIExpc3Qgb2YgYWxsIHByb2plY3RJRHNcclxuICAgIGNvbnN0IHByb2plY3ROYW1lcyA9IGRhdGEubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3ROYW1lKTsgLy8gTGlzdCBvZiBhbGwgcHJvamVjdE5hbWVzXHJcblxyXG4gICAgLy8gUmV0dXJuIGJvdGggc2VwYXJhdGVseVxyXG4gICAgcmV0dXJuIHsgcHJvamVjdElEcywgcHJvamVjdE5hbWVzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybVN0YXRzKCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgZm9ybXNcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybXMsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3QoKTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcclxuICAgICAgcmV0dXJuIHsgdmlzaXRzOiAwLCBzdWJtaXNzaW9uczogMCwgc3VibWlzc2lvblJhdGU6IDAsIGJvdW5jZVJhdGU6IDAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhciBzdGF0cyBjb20gVE9ET1Mgb3MgZm9ybXMgKHNlbSBmaWx0cmFyIHVzZXJJZClcclxuICAgIGNvbnN0IHZpc2l0cyA9IGZvcm1zLnJlZHVjZSgoc3VtLCBmb3JtKSA9PiBzdW0gKyAoZm9ybS52aXNpdHMgfHwgMCksIDApO1xyXG4gICAgY29uc3Qgc3VibWlzc2lvbnMgPSBmb3Jtcy5yZWR1Y2UoXHJcbiAgICAgIChzdW0sIGZvcm0pID0+IHN1bSArIChmb3JtLnN1Ym1pc3Npb25zIHx8IDApLFxyXG4gICAgICAwLFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgc3VibWlzc2lvblJhdGUgPSAwO1xyXG4gICAgaWYgKHZpc2l0cyA+IDApIHtcclxuICAgICAgc3VibWlzc2lvblJhdGUgPSAoc3VibWlzc2lvbnMgLyB2aXNpdHMpICogMTAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvdW5jZVJhdGUgPSAxMDAgLSBzdWJtaXNzaW9uUmF0ZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2aXNpdHMsXHJcbiAgICAgIHN1Ym1pc3Npb25zLFxyXG4gICAgICBzdWJtaXNzaW9uUmF0ZSxcclxuICAgICAgYm91bmNlUmF0ZSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIHN0YXRzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyB2aXNpdHM6IDAsIHN1Ym1pc3Npb25zOiAwLCBzdWJtaXNzaW9uUmF0ZTogMCwgYm91bmNlUmF0ZTogMCB9O1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtcywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiRm9ybXM6XCIsIGZvcm1zKTtcclxuICAgIHJldHVybiBmb3JtcztcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybXM6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybUJ5SWQoaWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm0sIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmdldCh7IGlkIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZvcm0pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybSBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcm9qZWN0TmFtZSA9IG51bGw7XHJcbiAgICBsZXQgY2xpZW50TmFtZSA9IG51bGw7XHJcbiAgICBsZXQgc2hhcmVVUkwgPSBudWxsO1xyXG5cclxuICAgIGlmIChmb3JtLnByb2pJRCkge1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHByb2plY3REYXRhLCBlcnJvcnM6IHByb2plY3RFcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IHByb2plY3RJRDogeyBlcTogZm9ybS5wcm9qSUQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChwcm9qZWN0RXJyb3JzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihwcm9qZWN0RXJyb3JzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcHJvamVjdCA9IHByb2plY3REYXRhPy5bMF07XHJcbiAgICAgIGlmIChwcm9qZWN0KSB7XHJcbiAgICAgICAgcHJvamVjdE5hbWUgPSBwcm9qZWN0LnByb2plY3ROYW1lO1xyXG5cclxuICAgICAgICBpZiAocHJvamVjdC5DbGllbnRJRCkge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBjbGllbnREYXRhLCBlcnJvcnM6IGNsaWVudEVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQuZ2V0KHtcclxuICAgICAgICAgICAgaWQ6IHByb2plY3QuQ2xpZW50SUQsXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoY2xpZW50RXJyb3JzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2xpZW50RXJyb3JzKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoY2xpZW50RGF0YSkge1xyXG4gICAgICAgICAgICBjbGllbnROYW1lID0gY2xpZW50RGF0YS5DbGllbnROYW1lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldG9ybmFyIHRhbWLDqW0gdmlzaXRhcyBlIHN1Ym1pc3PDtWVzXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBmb3JtLFxyXG4gICAgICBwcm9qZWN0TmFtZSxcclxuICAgICAgY2xpZW50TmFtZSxcclxuICAgICAgc2hhcmVVUkw6IGZvcm0uc2hhcmVVUkwsXHJcbiAgICAgIHZpc2l0czogZm9ybS52aXNpdHMgPz8gMCxcclxuICAgICAgc3VibWlzc2lvbnM6IGZvcm0uc3VibWlzc2lvbnMgPz8gMCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGJ5IElEOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gVXBkYXRlRm9ybUNvbnRlbnQoaWQ6IHN0cmluZywgY29udGVudDogYW55KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZvcm0gPSB7XHJcbiAgICAgIGlkLFxyXG4gICAgICBjb250ZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRGb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoZm9ybSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSBjb250ZW50LlwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXBkYXRlZEZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBmb3JtIGNvbnRlbnQ6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSBjb250ZW50LlwiKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIERlZmluZSB5b3VyIHNlcnZlci1zaWRlIGFjdGlvblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUZvcm1BY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKSB7XHJcbiAgY29uc3QgaWQgPSBmb3JtRGF0YS5nZXQoXCJpZFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3QgY29udGVudCA9IGZvcm1EYXRhLmdldChcImNvbnRlbnRcIikgYXMgc3RyaW5nO1xyXG5cclxuICAvLyBDYWxsIHlvdXIgZXhpc3Rpbmcgc2VydmVyLXNpZGUgZnVuY3Rpb24gKFVwZGF0ZUZvcm1Db250ZW50KVxyXG4gIGF3YWl0IFVwZGF0ZUZvcm1Db250ZW50KGlkLCBjb250ZW50KTtcclxufVxyXG4vKmNvbnN0IGRhdGEgPSBbXHJcbiAgWydTZWN0aW9uIDEnLCAnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnXSxcclxuICBbJ0UnLCAnRicsICdHJywgJ0gnLCAnSSddLFxyXG4gIFsnSicsICdLJywgJ0wnLCAnTScsICdOJ10sXHJcbl07XHJcblxyXG4vLyBDb252ZXJ0IHRoZSBkYXRhIHRvIGEgSlNPTiBzdHJpbmdcclxuY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG5cclxuXHJcblVwZGF0ZUZvcm1Db250ZW50KFwiYjVhMTFkNzctZmVmNy00MzMwLTg0NzktZGI1ZDdhZWEzYWZmXCIsIGNvbnRlbnQpXHJcbiAgLnRoZW4odXBkYXRlZEZvcm0gPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ0Zvcm0gdXBkYXRlZDonLCB1cGRhdGVkRm9ybSk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZm9ybTonLCBlcnJvcik7XHJcbiAgfSk7XHJcbiovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUHVibGlzaEZvcm0oaWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBzaGFyZVVSTDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuXHJcbiAgICBjb25zdCBmb3JtID0ge1xyXG4gICAgICBpZDogaWQsXHJcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXHJcbiAgICAgIHNoYXJlVVJMOiBzaGFyZVVSTCxcclxuICAgICAgcHVibGlzaGVkOiB0cnVlLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRGb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoZm9ybSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwdWJsaXNoIHRoZSBmb3JtLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXBkYXRlZEZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwdWJsaXNoaW5nIGZvcm06XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwdWJsaXNoIHRoZSBmb3JtLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdWJsaXNoRm9ybUFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpIHtcclxuICBjb25zdCBpZCA9IGZvcm1EYXRhLmdldChcImlkXCIpIGFzIHN0cmluZztcclxuICBjb25zdCBjb250ZW50ID0gZm9ybURhdGEuZ2V0KFwiY29udGVudFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3Qgc2hhcmVVUkwgPSBmb3JtRGF0YS5nZXQoXCJzaGFyZVVSTFwiKSBhcyBzdHJpbmc7XHJcblxyXG4gIGF3YWl0IFB1Ymxpc2hGb3JtKGlkLCBjb250ZW50LCBzaGFyZVVSTCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtQ29udGVudEJ5VXJsKGZvcm1Vcmw6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBcclxuICAgIC8vY29uc3QgZm9ybVVSTCA9IGAvc3VibWl0LyR7Zm9ybVVybH1gO1xyXG4gICAgY29uc3QgZm9ybVVSTCA9IGZvcm1Vcmwuc3RhcnRzV2l0aCgnL3N1Ym1pdC8nKSA/IGZvcm1VcmwgOiBgL3N1Ym1pdC8ke2Zvcm1Vcmx9YDtcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybXMsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHsgc2hhcmVVUkw6IHsgZXE6IGZvcm1VUkwgfSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycyB8fCAhZm9ybXMgfHwgZm9ybXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzIHx8IFwiRm9ybSBub3QgZm91bmQsIHBsZWFzZSB0cnkgYWdhaW4uXCIpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybSA9IGZvcm1zWzBdO1xyXG4gICAgY29uc3QgdXBkYXRlZFZpc2l0cyA9IGZvcm0udmlzaXRzID8gZm9ybS52aXNpdHMgKyAxIDogMTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVkRm9ybSA9IHtcclxuICAgICAgaWQ6IGZvcm0uaWQsXHJcbiAgICAgIHZpc2l0czogdXBkYXRlZFZpc2l0cyxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgeyBlcnJvcnM6IHVwZGF0ZUVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLnVwZGF0ZSh1cGRhdGVkRm9ybSk7XHJcblxyXG4gICAgaWYgKHVwZGF0ZUVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKHVwZGF0ZUVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSB2aXNpdHMuXCIpO1xyXG4gICAgfVxyXG4gICAgLy9jb25zb2xlLmxvZyhcImZvcm06XCIsIGZvcm0pO1xyXG4gICAgcmV0dXJuIGZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGNvbnRlbnQgYnkgVVJMOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGNvbnRlbnQgYnkgVVJMLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBTdWJtaXRGb3JtKGZvcm1JZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VibWlzc2lvbiA9IHtcclxuICAgICAgZm9ybUlkLFxyXG4gICAgICBjb250ZW50LFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgIH07XHJcblxyXG4gICBcclxuICAgIGNvbnN0IHsgZGF0YTogc3VibWlzc2lvbkRhdGEsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtU3VibWlzc2lvbnMuY3JlYXRlKHN1Ym1pc3Npb24pO1xyXG5cclxuICAgIGlmIChlcnJvcnMgfHwgIXN1Ym1pc3Npb25EYXRhPy5pZCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBjcmlhciBhIHN1Ym1pc3PDo286XCIsIGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm8gYW8gY3JpYXIgYSBzdWJtaXNzw6NvLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzdWJtaXNzaW9uSWQgPSBzdWJtaXNzaW9uRGF0YS5pZDtcclxuXHJcbiAgIFxyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtTGlzdCwgZXJyb3JzOiBmb3JtRXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCh7XHJcbiAgICAgIGZpbHRlcjogeyBpZDogeyBlcTogZm9ybUlkIH0gfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChmb3JtRXJyb3JzIHx8ICFmb3JtTGlzdD8ubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGJ1c2NhciBvIGZvcm11bMOhcmlvOlwiLCBmb3JtRXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybXVsw6FyaW8gbsOjbyBlbmNvbnRyYWRvLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtID0gZm9ybUxpc3RbMF07XHJcbiAgICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0udXBkYXRlKHtcclxuICAgICAgaWQ6IGZvcm0uaWQsXHJcbiAgICAgIHN1Ym1pc3Npb25zOiAoZm9ybS5zdWJtaXNzaW9ucyB8fCAwKSArIDEsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm1UYWdzLCBlcnJvcnM6IHRhZ0Vycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7IGZvcm1JRDogeyBlcTogZm9ybUlkIH0gfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0YWdFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYnVzY2FyIEZvcm1UYWcyOlwiLCB0YWdFcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvIGFvIGJ1c2NhciBGb3JtVGFnMi5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgIGZvcm1UYWdzLm1hcCh0YWcgPT5cclxuICAgICAgICBjbGllbnQubW9kZWxzLkZvcm1UYWcyLnVwZGF0ZSh7XHJcbiAgICAgICAgICBpZDogdGFnLmlkLFxyXG4gICAgICAgICAgY29udGVudFRlc3Q6IHN1Ym1pc3Npb25JZCxcclxuICAgICAgICB9KVxyXG4gICAgICApXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBzdWJtaXNzaW9uRGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm8gbm8gZW52aW8gZG8gZm9ybXVsw6FyaW86XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkVycm8gbm8gZW52aW8gZG8gZm9ybXVsw6FyaW8uXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdEZvcm1BY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKSB7XHJcbiAgY29uc3QgZm9ybUlkID0gZm9ybURhdGEuZ2V0KFwiZm9ybUlkXCIpIGFzIHN0cmluZztcclxuICBjb25zdCByYXdSZXNwb25zZXMgPSBmb3JtRGF0YS5nZXQoXCJyZXNwb25zZXNcIikgYXMgc3RyaW5nO1xyXG4gIGNvbnN0IHJhd0Zvcm1Db250ZW50ID0gZm9ybURhdGEuZ2V0KFwiZm9ybUNvbnRlbnRcIikgYXMgc3RyaW5nO1xyXG5cclxuICBjb25zdCBzdWJtaXNzaW9uID0ge1xyXG4gICAgcmVzcG9uc2VzOiBKU09OLnBhcnNlKHJhd1Jlc3BvbnNlcyksXHJcbiAgICBmb3JtQ29udGVudDogSlNPTi5wYXJzZShyYXdGb3JtQ29udGVudCksXHJcbiAgICBzdWJtaXR0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGpzb25Db250ZW50ID0gSlNPTi5zdHJpbmdpZnkoc3VibWlzc2lvbik7XHJcbiAgYXdhaXQgU3VibWl0Rm9ybShmb3JtSWQsIGpzb25Db250ZW50KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtV2l0aFN1Ym1pc3Npb25zKGlkOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5nZXQoeyBpZCB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZvcm0pIHtcclxuICAgICAgY29uc3QgeyBkYXRhOiBzdWJtaXNzaW9ucywgZXJyb3JzOiBzdWJtaXNzaW9uRXJyb3JzIH0gPVxyXG4gICAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVN1Ym1pc3Npb25zLmxpc3Qoe1xyXG4gICAgICAgICAgZmlsdGVyOiB7IGZvcm1JZDogeyBlcTogZm9ybS5pZCB9IH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoc3VibWlzc2lvbkVycm9ycykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3Ioc3VibWlzc2lvbkVycm9ycyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IGZvcm0sIHN1Ym1pc3Npb25zIH07XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybSBub3QgZm91bmQuXCIpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybSB3aXRoIHN1Ym1pc3Npb25zOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZm9ybSB3aXRoIHN1Ym1pc3Npb25zLlwiKTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1TdWJtaXNzaW9uQnlJZChzdWJtaXNzaW9uSWQ6IHN0cmluZykge1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBjb250ZW50LCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVN1Ym1pc3Npb25zLmdldCh7IGlkOiBzdWJtaXNzaW9uSWQgfSk7XHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtOlwiLCBlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGlmICghY29udGVudCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250ZW50IG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gIGNvbnRlbnQgO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gR2V0Rm9ybVN1Ym1pc3Npb25CeUlkOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRFcXVpcG1lbnRUYWdzRm9yRm9ybShpZDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIHRoZSBmb3JtIGRhdGFcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybSwgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0uZ2V0KHsgaWQgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybTpcIiwgZXJyb3JzKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFmb3JtKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm0gbm90IGZvdW5kLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBlcXVpcG1lbnQgdGFncyByZWxhdGVkIHRvIHRoZSBmb3JtXHJcbiAgICBjb25zdCB7IGRhdGE6IGVxdWlwbWVudFRhZ3MsIGVycm9yczogZXF1aXBtZW50VGFnc0Vycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgZm9ybUlEOiB7IGVxOiBmb3JtLmlkIH0gfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKGVxdWlwbWVudFRhZ3NFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVxdWlwbWVudCB0YWdzOlwiLCBlcXVpcG1lbnRUYWdzRXJyb3JzKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFlcXVpcG1lbnRUYWdzIHx8IGVxdWlwbWVudFRhZ3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gZXF1aXBtZW50IHRhZ3MgZm91bmQuXCIpO1xyXG4gICAgICByZXR1cm4geyBmb3JtLCBlcXVpcG1lbnRUYWdzOiBbXSB9O1xyXG4gICAgfVxyXG5cclxuICAgICAgLy8gRmV0Y2ggcmVsYXRlZCBlcXVpcG1lbnQgZGV0YWlscyBmb3IgZWFjaCB0YWdcclxuICAgIGNvbnN0IGVxdWlwbWVudERldGFpbHMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgZXF1aXBtZW50VGFncy5tYXAoYXN5bmMgKHRhZykgPT4ge1xyXG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHRhZy50YWdJRCBpcyB2YWxpZCBiZWZvcmUgbWFraW5nIHRoZSBBUEkgY2FsbFxyXG4gICAgICAgIGNvbnN0IGVxdWlwbWVudFRhZyA9IHRhZy50YWdJRCA/IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5nZXQoeyBpZDogdGFnLnRhZ0lEIH0pIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGVxdWlwbWVudFRhZykge1xyXG4gICAgICAgICAgcmV0dXJuIGVxdWlwbWVudFRhZztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgdGFnSUQ6XCIsIHRhZy50YWdJRCk7XHJcbiAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIFxyXG5cclxuICAgIHJldHVybiB7IGZvcm0sIGVxdWlwbWVudFRhZ3M6IGVxdWlwbWVudERldGFpbHMuZmlsdGVyKHRhZyA9PiB0YWcgIT09IG51bGwpIH07XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZXF1aXBtZW50IHRhZ3MgZm9yIGZvcm06XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRDbGllbnRXaXRoUHJvamVjdHMoQ2xpZW50SUQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQuZ2V0KHsgaWQ6IENsaWVudElEIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMgfHwgIWNsaWVudCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2xpZW50OlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgbm90IGZvdW5kLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBhbGwgcHJvamVjdHMgcmVsYXRlZCB0byB0aGlzIGNsaWVudFxyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9qZWN0cywgZXJyb3JzOiBwcm9qZWN0RXJyb3JzIH0gPVxyXG4gICAgICBhd2FpdCBjbGllbnQubW9kZWxzLlByb2plY3R0Lmxpc3Qoe1xyXG4gICAgICAgIGZpbHRlcjogeyBDbGllbnRJRDogeyBlcTogQ2xpZW50SUQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAocHJvamVjdEVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHM6XCIsIHByb2plY3RFcnJvcnMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IC4uLmRhdGEsIHByb2plY3RzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKkdldENsaWVudFdpdGhQcm9qZWN0cyhcIjFhZDc0YmNlLWJkOWQtNDEzMS04M2VmLWVmZmVjYmE3NGM3ZFwiKVxyXG4gIC50aGVuKChkYXRhKSA9PiBjb25zb2xlLmxvZyhcIkNsaWVudCB3aXRoIFByb2plY3RzOlwiLCBkYXRhKSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2xpZW50IHdpdGggcHJvamVjdHM6XCIsIGVycm9yKSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3Jtc1dpdGhDbGllbnQoQ2xpZW50SUQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHsgdXNlcklkIH0gPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gIGlmICghdXNlcklkKSB7XHJcbiAgICB0aHJvdyBuZXcgVXNlck5vdEZvdW5kRXJyKCk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8gRmV0Y2ggcHJvamVjdHMgbGlua2VkIHRvIHRoZSBDbGllbnRJRFxyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9qZWN0cywgZXJyb3JzOiBwcm9qZWN0RXJyb3JzIH0gPVxyXG4gICAgICBhd2FpdCBjbGllbnQubW9kZWxzLlByb2plY3R0Lmxpc3Qoe1xyXG4gICAgICAgIGZpbHRlcjogeyBDbGllbnRJRDogeyBlcTogQ2xpZW50SUQgfSB9LFxyXG4gICAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKFwiUHJvamVjdHMgRm91bmQ6XCIsIHByb2plY3RzKTtcclxuICAgIGlmIChwcm9qZWN0RXJyb3JzIHx8ICFwcm9qZWN0cyB8fCBwcm9qZWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5lcnJvcihwcm9qZWN0RXJyb3JzIHx8IFwiTm8gcHJvamVjdHMgZm91bmQgZm9yIHRoaXMgY2xpZW50LlwiKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcHJvamVjdHMgZm91bmQgZm9yIHRoaXMgY2xpZW50LlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGZXRjaCBmb3JtcyBmb3IgZWFjaCBwcm9qZWN0XHJcbiAgICBjb25zdCBmb3JtcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICBwcm9qZWN0cy5tYXAoYXN5bmMgKHByb2plY3QpID0+IHtcclxuICAgICAgICBjb25zdCB7IGRhdGE6IHByb2plY3RGb3JtcyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICAgICAgZmlsdGVyOiB7IHByb2pJRDogeyBlcTogcHJvamVjdC5wcm9qZWN0SUQgfSB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiUHJvamVjdCBJRDpcIiwgcHJvamVjdC5wcm9qZWN0SUQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBGb3JtcyBmb3IgUHJvamVjdCAke3Byb2plY3QucHJvamVjdE5hbWV9OmAsIHByb2plY3RGb3Jtcyk7XHJcblxyXG4gICAgICAgIHJldHVybiBwcm9qZWN0Rm9ybXMubWFwKChmb3JtKSA9PiAoe1xyXG4gICAgICAgICAgLi4uZm9ybSxcclxuICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0LnByb2plY3ROYW1lLFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgfSksXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBmb3Jtcy5mbGF0KCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtcyB3aXRoIGNsaWVudDpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGZvcm1zIGZvciB0aGUgY2xpZW50LlwiKTtcclxuICB9XHJcbn1cclxuXHJcbi8qR2V0Rm9ybXNXaXRoQ2xpZW50KFwiMWFkNzRiY2UtYmQ5ZC00MTMxLTgzZWYtZWZmZWNiYTc0YzdkXCIpXHJcbi50aGVuKChmb3JtcykgPT4gY29uc29sZS5sb2coXCJGb3JtczpcIiwgZm9ybXMpKVxyXG4uY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3Jtc0luZm9ybWF0aW9uKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9yczogY2xpZW50RXJyb3JzLCBkYXRhOiBjbGllbnRzRGF0YSB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQubGlzdCgpO1xyXG5cclxuICAgIGlmIChjbGllbnRFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBjbGllbnRFcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZm9ybXMuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHRzID0gW107XHJcblxyXG4gICAgZm9yIChjb25zdCBjbGllbnRJdGVtIG9mIGNsaWVudHNEYXRhKSB7XHJcbiAgICAgIGNvbnN0IHsgZXJyb3JzOiBwcm9qZWN0RXJyb3JzLCBkYXRhOiBwcm9qZWN0c0RhdGEgfSA9XHJcbiAgICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgICAgIGZpbHRlcjogeyBDbGllbnRJRDogeyBlcTogY2xpZW50SXRlbS5pZCB9IH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAocHJvamVjdEVycm9ycykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgcHJvamVjdEVycm9ycyk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHNcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAoY29uc3QgcHJvamVjdEl0ZW0gb2YgcHJvamVjdHNEYXRhKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhgRmV0Y2hpbmcgZm9ybXMgZm9yIHByb2plY3Q6ICR7cHJvamVjdEl0ZW0ucHJvamVjdE5hbWV9LCBJRDogJHtwcm9qZWN0SXRlbS5wcm9qZWN0SUR9YCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZXJyb3JzOiBmb3JtRXJyb3JzLCBkYXRhOiBmb3Jtc0RhdGEgfSA9XHJcbiAgICAgICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCh7XHJcbiAgICAgICAgICAgIGZpbHRlcjogeyBwcm9qSUQ6IHsgZXE6IHByb2plY3RJdGVtLnByb2plY3RJRCB9IH0sIC8vIEVuc3VyZSB0aGUgY29ycmVjdCBrZXkgaXMgdXNlZFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChmb3JtRXJyb3JzKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGZvcm1FcnJvcnMpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybXNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgY2xpZW50TmFtZTogY2xpZW50SXRlbS5DbGllbnROYW1lLFxyXG4gICAgICAgICAgcHJvamVjdE5hbWU6IHByb2plY3RJdGVtLnByb2plY3ROYW1lLFxyXG4gICAgICAgICAgcHJvamVjdElEOiBwcm9qZWN0SXRlbS5wcm9qZWN0SUQsXHJcbiAgICAgICAgICBmb3JtczogZm9ybXNEYXRhLm1hcCgoZm9ybSkgPT4gKHtcclxuICAgICAgICAgICAgaWQ6IGZvcm0uaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IGZvcm0ubmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGZvcm0uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHB1Ymxpc2hlZDogZm9ybS5wdWJsaXNoZWQsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGZvcm0uY29udGVudCxcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiBmb3JtLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgdmlzaXRzOiBmb3JtLnZpc2l0cyxcclxuICAgICAgICAgICAgc3VibWlzc2lvbnM6IGZvcm0uc3VibWlzc2lvbnMsXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vY29uc29sZS5sb2coXCJSZXN1bHRzOlwiLCByZXN1bHRzKTtcclxuICAgIHJldHVybiByZXN1bHRzO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKmNvbnN0IGZvcm1zSW5mbyA9IGF3YWl0IEdldEZvcm1zSW5mb3JtYXRpb24oKVxyXG5jb25zb2xlLmxvZygnRm9ybSBJbmZvOicsIGZvcm1zSW5mbyk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRQcm9qZWN0c0Zyb21DbGllbnROYW1lKENsaWVudE5hbWU6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGZXRjaCBDbGllbnQgYmFzZWQgb24gQ2xpZW50TmFtZVxyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGE6IGNsaWVudERhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50Lmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHsgQ2xpZW50TmFtZTogeyBlcTogQ2xpZW50TmFtZSB9IH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzIHx8IGNsaWVudERhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjbGllbnQgb3IgY2xpZW50IG5vdCBmb3VuZDpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXNzdW1pbmcgZWFjaCBjbGllbnQgaGFzIGFuIGFycmF5IG9mIHByb2plY3RzXHJcbiAgICBjb25zdCBDbGllbnRzID0gY2xpZW50RGF0YVswXTsgLy8gQXNzdW1pbmcgdGhlIGZpcnN0IGNsaWVudCBpbiB0aGUgbGlzdCBpcyB0aGUgb25lIHdlJ3JlIGludGVyZXN0ZWQgaW5cclxuICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdHMsIGVycm9yczogcHJvamVjdEVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IENsaWVudHMuaWQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAocHJvamVjdEVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHM6XCIsIHByb2plY3RFcnJvcnMpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvamVjdE5hbWVzID0gcHJvamVjdHMubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3ROYW1lKTtcclxuICAgIC8vIFJldHVybiBjbGllbnQgYW5kIGFzc29jaWF0ZWQgcHJvamVjdHNcclxuICAgIHJldHVybiB7IHByb2plY3ROYW1lcyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIENyZWF0ZUZvcm0oXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgcHJvamVjdE5hbWU6IHN0cmluZyxcclxuKSB7XHJcbiAgLy8gRmV0Y2ggdGhlIHByb2plY3QgZGV0YWlscyB1c2luZyBwcm9qZWN0TmFtZVxyXG4gIGNvbnN0IHsgZXJyb3JzOiBwcm9qZWN0RXJyb3JzLCBkYXRhOiBwcm9qZWN0c0RhdGEgfSA9XHJcbiAgICBhd2FpdCBjbGllbnQubW9kZWxzLlByb2plY3R0Lmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHsgcHJvamVjdE5hbWU6IHsgZXE6IHByb2plY3ROYW1lIH0gfSxcclxuICAgIH0pO1xyXG5cclxuICBpZiAocHJvamVjdEVycm9ycykge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzOlwiLCBwcm9qZWN0RXJyb3JzKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBwcm9qZWN0cy5cIik7XHJcbiAgfVxyXG5cclxuICBpZiAocHJvamVjdHNEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBQcm9qZWN0IHdpdGggbmFtZSBcIiR7cHJvamVjdE5hbWV9XCIgbm90IGZvdW5kLmApO1xyXG4gIH1cclxuXHJcbiAgLy8gR2V0IHRoZSBmaXJzdCBtYXRjaGluZyBwcm9qZWN0J3MgSURcclxuICBjb25zdCBwcm9qSUQgPSBwcm9qZWN0c0RhdGFbMF0ucHJvamVjdElEO1xyXG5cclxuICAvLyBOb3cgY3JlYXRlIHRoZSBmb3JtIHVzaW5nIHByb2pJRFxyXG4gIGNvbnN0IHsgZXJyb3JzOiBmb3JtZXJyb3JzLCBkYXRhOiBmb3JtIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0uY3JlYXRlKHtcclxuICAgIHByb2pJRDogcHJvaklELFxyXG4gICAgbmFtZTogbmFtZSxcclxuICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcclxuICB9KTtcclxuXHJcbiAgaWYgKGZvcm1lcnJvcnMpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBmb3JtOlwiLCBmb3JtZXJyb3JzKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlNvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIGNyZWF0aW5nIHRoZSBmb3JtXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGZvcm1JZDogZm9ybT8uaWQsXHJcbiAgICBwcm9qSUQ6IHByb2pJRCxcclxuICB9O1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHJ1bkZvcm0gPSBhc3luYyAoXHJcbiAgZm9ybVVybDpzdHJpbmcsXHJcbiAgRXF1aXBOYW1lOiBzdHJpbmcsXHJcbiAgRXF1aXBUYWc6IHN0cmluZyxcclxuKTogUHJvbWlzZTx7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICBjcmVhdGVkVGFnSUQ/OiBzdHJpbmc7XHJcbiAgdGFnQ3JlYXRlZEF0Pzogc3RyaW5nO1xyXG59PiA9PiB7XHJcbiAgLy9jb25zb2xlLmxvZyhcInJ1bkZvcm0gY2FsbGVkIHdpdGg6XCIsIGZvcm1VcmwsIEVxdWlwTmFtZSwgRXF1aXBUYWcpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBmb3JtUmVzcCA9IGF3YWl0IEdldEZvcm1Db250ZW50QnlVcmwoZm9ybVVybCk7XHJcbiAgICBcclxuICAgIGlmICghZm9ybVJlc3ApIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZvcm0gbm90IGZvdW5kIHdpdGggdGhlIHByb3ZpZGVkIFRlc3ROYW1lIGFuZCBQcm9qZWN0SURcIik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybSA9IGZvcm1SZXNwO1xyXG5cclxuICAgIGNvbnN0IGV4aXN0aW5nVGFnUmVzcCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgVGFnOiB7IGVxOiBFcXVpcFRhZyB9LFxyXG4gICAgICAgIEVxdWlwbWVudE5hbWU6IHsgZXE6IEVxdWlwTmFtZSB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZXhpc3RpbmdUYWcgPSBleGlzdGluZ1RhZ1Jlc3AuZGF0YT8uWzBdO1xyXG5cclxuICAgIGlmIChleGlzdGluZ1RhZykge1xyXG4gICAgICBjb25zdCBsaW5rZWRGb3JtUmVzcCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgICB0YWdJRDogeyBlcTogZXhpc3RpbmdUYWcuaWQgfSxcclxuICAgICAgICAgIGZvcm1JRDogeyBlcTogZm9ybS5pZCB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGxpbmtlZEZvcm1SZXNwLmRhdGE/Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgXCJUaGlzIGVxdWlwbWVudCBhbmQgdGFnIGFyZSBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGZvcm0gYW5kIHByb2plY3QuXCIsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBhbGVydChcclxuICAgICAgICAgIFwiRXJyb3I6IFRoaXMgZXF1aXBtZW50IGFuZCB0YWcgYXJlIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZm9ybSBhbmQgcHJvamVjdC5cIixcclxuICAgICAgICApO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgY3JlYXRlUmVzcCA9IG51bGw7XHJcbiAgICBsZXQgY3JlYXRlZFRhZ0lEOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcbiAgICBsZXQgdGFnQ3JlYXRlZEF0OiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgaWYgKCFleGlzdGluZ1RhZykge1xyXG4gICAgICBjcmVhdGVSZXNwID0gYXdhaXQgY2xpZW50Lm1vZGVscy5FcXVpcG1lbnRUYWcyLmNyZWF0ZSh7XHJcbiAgICAgICAgVGFnOiBFcXVpcFRhZyxcclxuICAgICAgICBFcXVpcG1lbnROYW1lOiBFcXVpcE5hbWUsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKCFjcmVhdGVSZXNwLmRhdGEpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBFcXVpcG1lbnRUYWdcIik7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY3JlYXRlZFRhZ0lEID0gY3JlYXRlUmVzcC5kYXRhLmlkO1xyXG4gICAgICB0YWdDcmVhdGVkQXQgPSBuZXcgRGF0ZShjcmVhdGVSZXNwLmRhdGEuY3JlYXRlZEF0KVxyXG4gICAgICAgIC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgLnNwbGl0KFwiVFwiKVswXTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtVGFnUmVzcCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIuY3JlYXRlKHtcclxuICAgICAgZm9ybUlEOiBmb3JtLmlkLFxyXG4gICAgICB0YWdJRDogZXhpc3RpbmdUYWcgPyBleGlzdGluZ1RhZy5pZCA6IGNyZWF0ZWRUYWdJRCxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghZm9ybVRhZ1Jlc3AuZGF0YSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBGb3JtVGFnXCIpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGNyZWF0ZWRUYWdJRCwgdGFnQ3JlYXRlZEF0IH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBleGVjdXRpbmcgcnVuRm9ybTpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBGZXRjaCBmb3JtSWQgYnkgVGVzdE5hbWUgYW5kIFByb2plY3RJRFxyXG5jb25zdCBmZXRjaEZvcm1CeU5hbWVBbmRQcm9qZWN0ID0gYXN5bmMgKFxyXG4gIFRlc3ROYW1lOiBzdHJpbmcsXHJcbiAgUHJvamVjdElEOiBzdHJpbmcsXHJcbikgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiRmV0Y2hpbmcgZm9ybSB3aXRoIFRlc3ROYW1lOlwiLCBUZXN0TmFtZSwgXCJhbmQgUHJvamVjdElEOlwiLCBQcm9qZWN0SUQpO1xyXG4gICAgY29uc3QgZm9ybVJlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCh7XHJcbiAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgIG5hbWU6IHsgZXE6IFRlc3ROYW1lIH0sXHJcbiAgICAgICAgcHJvaklEOiB7IGVxOiBQcm9qZWN0SUQgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vY29uc29sZS5sb2coXCJGb3JtIGZldGNoIHJlc3BvbnNlOlwiLCBmb3JtUmVzcCk7XHJcblxyXG4gICAgLy8gSWYgZm9ybSBleGlzdHMsIHJldHVybiB0aGUgZmlyc3QgcmVzdWx0XHJcbiAgICByZXR1cm4gZm9ybVJlc3AuZGF0YT8uWzBdO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybTpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuLyphd2FpdCBydW5Gb3JtKFwiVGVzdCBuYW1lIDFcIiwgXCJIRTEwMVAwMDFcIiwgXCJDb21wcmVzc29yIFhcIiwgXCJUQUctMDAxXCIpXHJcbi50aGVuKChuZXdFcXVpcG1lbnRUYWcpID0+IGNvbnNvbGUubG9nKFwiQ3JlYXRlZCBGb3JtVGFnOlwiLCBuZXdFcXVpcG1lbnRUYWcpKVxyXG4uY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKSk7IC8vIEhhbmRsZSBhbnkgZXJyb3JzICovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXNCeUNsaWVudE5hbWUoQ2xpZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgLy8gMS4gRmV0Y2ggdGhlIENsaWVudCBJRFxyXG4gIGNvbnN0IGNsaWVudFJlc3VsdCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50Lmxpc3Qoe1xyXG4gICAgZmlsdGVyOiB7IENsaWVudE5hbWU6IHsgZXE6IENsaWVudE5hbWUgfSB9LFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBjbGllbnREYXRhID0gY2xpZW50UmVzdWx0LmRhdGE/LlswXTtcclxuICBpZiAoIWNsaWVudERhdGEpIHJldHVybiBbXTtcclxuXHJcbiAgY29uc3QgY2xpZW50SUQgPSBjbGllbnREYXRhLmlkO1xyXG5cclxuICAvLyAyLiBGZXRjaCBhbGwgUHJvamVjdHMgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBDbGllbnRJRFxyXG4gIGNvbnN0IHByb2plY3RzUmVzdWx0ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgIGZpbHRlcjogeyBDbGllbnRJRDogeyBlcTogY2xpZW50SUQgfSB9LFxyXG4gIH0pO1xyXG5cclxuICBjb25zdCBwcm9qZWN0cyA9IHByb2plY3RzUmVzdWx0LmRhdGE7XHJcbiAgaWYgKCFwcm9qZWN0cy5sZW5ndGgpIHJldHVybiBbXTtcclxuXHJcbiAgY29uc3QgcHJvamVjdElEcyA9IHByb2plY3RzLm1hcCgocHJvamVjdCkgPT4gcHJvamVjdC5wcm9qZWN0SUQpO1xyXG5cclxuICAvLyAzLiBGZXRjaCBhbGwgRm9ybXMgZm9yIHRoZSBmb3VuZCBwcm9qZWN0c1xyXG4gIGNvbnN0IGFsbEZvcm1zID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICBwcm9qZWN0SURzLm1hcChhc3luYyAocHJvamVjdElEKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZvcm1zUmVzdWx0ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICAgIGZpbHRlcjogeyBwcm9qSUQ6IHsgZXE6IHByb2plY3RJRCB9IH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZm9ybXMgPSBmb3Jtc1Jlc3VsdC5kYXRhO1xyXG4gICAgICBjb25zdCBmb3JtSURzID0gZm9ybXMubWFwKChmb3JtKSA9PiBmb3JtLmlkKTtcclxuXHJcbiAgICAgIGNvbnN0IGZvcm1EZXRhaWxzV2l0aEVxdWlwbWVudCA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICAgIGZvcm1JRHMubWFwKGFzeW5jIChmb3JtSWQpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogZm9ybVRhZ3MsIGVycm9yczogZm9ybVRhZ3NFcnJvcnMgfSA9XHJcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIubGlzdCh7XHJcbiAgICAgICAgICAgICAgZmlsdGVyOiB7IGZvcm1JRDogeyBlcTogZm9ybUlkIH0gfSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaWYgKGZvcm1UYWdzRXJyb3JzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgYEVycm9yIGZldGNoaW5nIGZvcm0gdGFncyBmb3IgZm9ybSBJRCAke2Zvcm1JZH06YCxcclxuICAgICAgICAgICAgICBmb3JtVGFnc0Vycm9ycyxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc3QgdGFnSURzID0gZm9ybVRhZ3MubWFwKCh0YWcpID0+IHRhZy50YWdJRCk7XHJcblxyXG4gICAgICAgICAgY29uc3QgZXF1aXBtZW50QW5kVGFncyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICAgICAgICB0YWdJRHMubWFwKGFzeW5jICh0YWdJRCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogZXF1aXBtZW50RGF0YSwgZXJyb3JzOiBlcXVpcG1lbnRFcnJvcnMgfSA9XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkVxdWlwbWVudFRhZzIubGlzdCh7XHJcbiAgICAgICAgICAgICAgICAgIGZpbHRlcjogdGFnSUQgPyB7IGlkOiB7IGVxOiB0YWdJRCB9IH0gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGVxdWlwbWVudEVycm9ycykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgICAgICAgYEVycm9yIGZldGNoaW5nIGVxdWlwbWVudCBmb3IgdGFnSUQgJHt0YWdJRH06YCxcclxuICAgICAgICAgICAgICAgICAgZXF1aXBtZW50RXJyb3JzLFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGVxdWlwbWVudERhdGEubWFwKChlcXVpcG1lbnQpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBlcXVpcG1lbnROYW1lOiBlcXVpcG1lbnQuRXF1aXBtZW50TmFtZSxcclxuICAgICAgICAgICAgICAgIGVxdWlwbWVudFRhZzogZXF1aXBtZW50LlRhZyxcclxuICAgICAgICAgICAgICAgIHRhZ0NyZWF0ZWRBdDogbmV3IERhdGUoZXF1aXBtZW50LmNyZWF0ZWRBdClcclxuICAgICAgICAgICAgICAgICAgLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiVFwiKVswXSwgLy8gPC0tIEFkaWNpb25hZG8gYXF1aVxyXG4gICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gZm9ybXMuZmluZCgoZm9ybSkgPT4gZm9ybS5pZCA9PT0gZm9ybUlkKTtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNsaWVudE5hbWU6IGNsaWVudERhdGEuQ2xpZW50TmFtZSxcclxuICAgICAgICAgICAgcHJvamVjdE5hbWU6IHByb2plY3RzLmZpbmQoXHJcbiAgICAgICAgICAgICAgKHByb2plY3QpID0+IHByb2plY3QucHJvamVjdElEID09PSBwcm9qZWN0SUQsXHJcbiAgICAgICAgICAgICk/LnByb2plY3ROYW1lLFxyXG4gICAgICAgICAgICBwcm9qZWN0SUQsXHJcbiAgICAgICAgICAgIGZvcm1OYW1lOiBmb3JtRGF0YT8ubmFtZSxcclxuICAgICAgICAgICAgZXF1aXBtZW50OiBlcXVpcG1lbnRBbmRUYWdzLmZsYXQoKSxcclxuICAgICAgICAgICAgc3VibWlzc2lvbjogZm9ybURhdGE/LnN1Ym1pc3Npb25zIHx8IDAsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmb3JtRGF0YT8uZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIGZvcm1JZDogZm9ybUlkLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSxcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiBmb3JtRGV0YWlsc1dpdGhFcXVpcG1lbnQuZmlsdGVyKChkZXRhaWwpID0+IGRldGFpbCAhPT0gbnVsbCk7XHJcbiAgICB9KSxcclxuICApO1xyXG5cclxuICBjb25zdCBmbGF0dGVuZWRGb3JtcyA9IGFsbEZvcm1zLmZsYXQoKTtcclxuXHJcbiAgcmV0dXJuIGZsYXR0ZW5lZEZvcm1zLm1hcCgoZm9ybURldGFpbCkgPT4gKHtcclxuICAgIGNsaWVudE5hbWU6IGZvcm1EZXRhaWwuY2xpZW50TmFtZSxcclxuICAgIHByb2plY3ROYW1lOiBmb3JtRGV0YWlsLnByb2plY3ROYW1lLFxyXG4gICAgcHJvamVjdElEOiBmb3JtRGV0YWlsLnByb2plY3RJRCxcclxuICAgIGZvcm1JRDogZm9ybURldGFpbC5mb3JtSWQsXHJcbiAgICBmb3JtTmFtZTogZm9ybURldGFpbC5mb3JtTmFtZSxcclxuICAgIGRlc2NyaXB0aW9uOiBmb3JtRGV0YWlsLmRlc2NyaXB0aW9uLFxyXG4gICAgZXF1aXBtZW50RGV0YWlsczogZm9ybURldGFpbC5lcXVpcG1lbnQubWFwKChlcXVpcG1lbnQpID0+ICh7XHJcbiAgICAgIGVxdWlwbWVudE5hbWU6IGVxdWlwbWVudD8uZXF1aXBtZW50TmFtZSB8fCBcIlVua25vd25cIixcclxuICAgICAgZXF1aXBtZW50VGFnOiBlcXVpcG1lbnQ/LmVxdWlwbWVudFRhZyB8fCBcIlVua25vd25cIixcclxuICAgICAgdGFnQ3JlYXRlZEF0OiBlcXVpcG1lbnQ/LnRhZ0NyZWF0ZWRBdCB8fCBcIlVua25vd25cIiwgLy8gPC0tIEFkaWNpb25hZG8gYXF1aSB0YW1iw6ltXHJcbiAgICB9KSksXHJcbiAgICBzdWJtaXNzaW9uOiBmb3JtRGV0YWlsLnN1Ym1pc3Npb24sXHJcbiAgfSkpO1xyXG59XHJcblxyXG4vKmF3YWl0IEdldEZvcm1zQnlDbGllbnROYW1lKFwiUmlvIFRpbnRvXCIpXHJcbiAgLnRoZW4oKGZsYXR0ZW5lZEZvcm1zKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIuKchSBGb3JtcyBmcm9tIGNsaWVudDpcIiwgZmxhdHRlbmVkRm9ybXMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBmZXRjaGluZyBmb3JtczpcIiwgZXJyb3IpO1xyXG4gIH0pOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gU2F2ZUZvcm1BZnRlclRlc3QoXHJcbiAgRm9ybUlEOiBzdHJpbmcsXHJcbiAgVGFnSUQ6IHN0cmluZyxcclxuICBjb250ZW50OiBzdHJpbmcsXHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm1UYWdzLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIubGlzdCh7XHJcbiAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgIGZvcm1JRDogeyBlcTogRm9ybUlEIH0sXHJcbiAgICAgICAgdGFnSUQ6IHsgZXE6IFRhZ0lEIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm1UYWdUb1VwZGF0ZSA9IGZvcm1UYWdzWzBdO1xyXG5cclxuICAgIGlmICghZm9ybVRhZ1RvVXBkYXRlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJOb3RoaW5nIGZvdW5kIGZvciB0aGlzIGZvcm1JRCBhbmQgdGFnSURcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi51cGRhdGUoe1xyXG4gICAgICBpZDogZm9ybVRhZ1RvVXBkYXRlLmlkLFxyXG4gICAgICBjb250ZW50VGVzdDogY29udGVudCxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiVXBkYXRlZDpcIiwgdXBkYXRlZCk7XHJcbiAgICByZXR1cm4gdXBkYXRlZDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBTYXZlRm9ybUFmdGVyVGVzdDpcIiwgZXJyKTtcclxuICB9XHJcbn1cclxuXHJcbi8qICBTYXZlRm9ybUFmdGVyVGVzdChcIjk2YTM0Y2EwLTAzYTItNGY3OS04ODUzLTQ5NWU3ZWEzZDA2MFwiLCBcIjQwZGY1OTgxLWU4ZDAtNDVlMS1iOGY0LTk5MjJmNWNjY2U1MlwiLCBcIlRlc3QgY29udGVudFwiKVxyXG4udGhlbigodXBkYXRlZEZvcm0pID0+IHtcclxuICBjb25zb2xlLmxvZyhcIkZvcm0gdXBkYXRlZCBzdWNjZXNzZnVsbHk6XCIsIHVwZGF0ZWRGb3JtKTtcclxufSlcclxuLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBmb3JtOlwiLCBlcnJvcik7XHJcbn0pOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGVudEJ5Rm9ybUlEYW5kVGFnSUQoXHJcbiAgRm9ybUlEOiBzdHJpbmcsXHJcbiAgVGFnSUQ6IHN0cmluZyxcclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybVRhZ3MsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgZm9ybUlEOiB7IGVxOiBGb3JtSUQgfSxcclxuICAgICAgICB0YWdJRDogeyBlcTogVGFnSUQgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybVRhZyA9IGZvcm1UYWdzWzBdO1xyXG5cclxuICAgIGlmICghZm9ybVRhZykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiTm90aGluZyBmb3VuZCBmb3IgdGhpcyBmb3JtSUQgYW5kIHRhZ0lEXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29udGVudCA9IGZvcm1UYWcuY29udGVudFRlc3Q7XHJcblxyXG4gICAgLy9jb25zb2xlLmxvZyhcIkZldGNoZWQgY29udGVudDpcIiwgY29udGVudCk7XHJcbiAgICByZXR1cm4gY29udGVudDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXRDb250ZW50QnlGb3JtSURhbmRUYWdJRDpcIiwgZXJyKTtcclxuICB9XHJcbn1cclxuXHJcbi8qZ2V0Q29udGVudEJ5Rm9ybUlEYW5kVGFnSUQoXCIyZTA2OWRmYS0zZTZkLTQyZDItYmUwNi01NDRiNWFhOTliNDBcIiwgXCI5Mzk5OTM1YS01OWVhLTQxM2YtODMwMy00MWI4ZmM0Zjk3YjdcIilcclxuLnRoZW4oKHVwZGF0ZWRGb3JtKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJGb3JtIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5OlwiLCB1cGRhdGVkRm9ybSk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgZm9ybTpcIiwgZXJyb3IpO1xyXG59KTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVxdWlwbWVudFRhZ0lEKFxyXG4gIGVxdWlwbWVudE5hbWU6IHN0cmluZyxcclxuICBlcXVpcG1lbnRUYWc6IHN0cmluZyxcclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFF1ZXJ5IHRvIGZldGNoIGVxdWlwbWVudCBieSBpdHMgbmFtZSBhbmQgdGFnXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5FcXVpcG1lbnRUYWcyLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHtcclxuICAgICAgICBFcXVpcG1lbnROYW1lOiB7IGVxOiBlcXVpcG1lbnROYW1lIH0sXHJcbiAgICAgICAgVGFnOiB7IGVxOiBlcXVpcG1lbnRUYWcgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENoZWNrIGZvciBlcnJvcnNcclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVxdWlwbWVudCB0YWc6XCIsIGVycm9ycyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiBkYXRhIGV4aXN0c1xyXG4gICAgY29uc3QgZXF1aXBtZW50VGFnRGF0YSA9IGRhdGFbMF07IC8vIEFzc3VtaW5nIHRoZSBmaXJzdCBlbnRyeSBtYXRjaGVzIHRoZSBzZWFyY2hcclxuICAgIGlmICghZXF1aXBtZW50VGFnRGF0YSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiTm8gbWF0Y2hpbmcgZXF1aXBtZW50IGZvdW5kIGZvciBnaXZlbiBuYW1lIGFuZCB0YWcuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBlcXVpcG1lbnRUYWdJRFxyXG4gICAgcmV0dXJuIGVxdWlwbWVudFRhZ0RhdGEuaWQ7IC8vIEFzc3VtaW5nIGBpZGAgaXMgdGhlIGVxdWlwbWVudFRhZ0lEXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZ2V0RXF1aXBtZW50VGFnSUQ6XCIsIGVycik7XHJcbiAgfVxyXG59XHJcblxyXG4vKmdldEVxdWlwbWVudFRhZ0lEKFwiRXF1aXAxXCIsIFwiVGFnMVwiKVxyXG4udGhlbigodXBkYXRlZEZvcm0pID0+IHtcclxuICBjb25zb2xlLmxvZyhcIkVxdWlwIFRBRyBJRDpcIiwgdXBkYXRlZEZvcm0pO1xyXG59KVxyXG4uY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGZvcm06XCIsIGVycm9yKTtcclxufSk7Ki9cclxuIl0sIm5hbWVzIjpbIkdldENsaWVudHMiLCJHZXRQcm9qZWN0cyIsIkdldEZvcm1TdGF0cyIsIkdldEZvcm1zIiwiR2V0Rm9ybUJ5SWQiLCJVcGRhdGVGb3JtQ29udGVudCIsInNhdmVGb3JtQWN0aW9uIiwiUHVibGlzaEZvcm0iLCJwdWJsaXNoRm9ybUFjdGlvbiIsIkdldEZvcm1Db250ZW50QnlVcmwiLCJTdWJtaXRGb3JtIiwic3VibWl0Rm9ybUFjdGlvbiIsIkdldEZvcm1XaXRoU3VibWlzc2lvbnMiLCJHZXRGb3JtU3VibWlzc2lvbkJ5SWQiLCJHZXRFcXVpcG1lbnRUYWdzRm9yRm9ybSIsIkdldENsaWVudFdpdGhQcm9qZWN0cyIsIkdldEZvcm1zV2l0aENsaWVudCIsIkdldEZvcm1zSW5mb3JtYXRpb24iLCJHZXRQcm9qZWN0c0Zyb21DbGllbnROYW1lIiwiQ3JlYXRlRm9ybSIsInJ1bkZvcm0iLCJHZXRGb3Jtc0J5Q2xpZW50TmFtZSIsIlNhdmVGb3JtQWZ0ZXJUZXN0IiwiZ2V0Q29udGVudEJ5Rm9ybUlEYW5kVGFnSUQiLCJnZXRFcXVpcG1lbnRUYWdJRCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./actions/form.tsx\n"));

/***/ })

});