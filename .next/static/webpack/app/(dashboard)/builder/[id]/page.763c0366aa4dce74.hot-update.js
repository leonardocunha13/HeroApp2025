"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(dashboard)/builder/[id]/page",{

/***/ "(app-pages-browser)/./actions/form.tsx":
/*!**************************!*\
  !*** ./actions/form.tsx ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CreateForm: () => (/* binding */ CreateForm),\n/* harmony export */   GetClientWithProjects: () => (/* binding */ GetClientWithProjects),\n/* harmony export */   GetClients: () => (/* binding */ GetClients),\n/* harmony export */   GetEquipmentTagsForForm: () => (/* binding */ GetEquipmentTagsForForm),\n/* harmony export */   GetFormById: () => (/* binding */ GetFormById),\n/* harmony export */   GetFormContentByUrl: () => (/* binding */ GetFormContentByUrl),\n/* harmony export */   GetFormStats: () => (/* binding */ GetFormStats),\n/* harmony export */   GetFormSubmissionById: () => (/* binding */ GetFormSubmissionById),\n/* harmony export */   GetFormWithSubmissions: () => (/* binding */ GetFormWithSubmissions),\n/* harmony export */   GetForms: () => (/* binding */ GetForms),\n/* harmony export */   GetFormsByClientName: () => (/* binding */ GetFormsByClientName),\n/* harmony export */   GetFormsInformation: () => (/* binding */ GetFormsInformation),\n/* harmony export */   GetFormsWithClient: () => (/* binding */ GetFormsWithClient),\n/* harmony export */   GetProjects: () => (/* binding */ GetProjects),\n/* harmony export */   GetProjectsFromClientName: () => (/* binding */ GetProjectsFromClientName),\n/* harmony export */   PublishForm: () => (/* binding */ PublishForm),\n/* harmony export */   SaveFormAfterTest: () => (/* binding */ SaveFormAfterTest),\n/* harmony export */   SubmitForm: () => (/* binding */ SubmitForm),\n/* harmony export */   UpdateFormContent: () => (/* binding */ UpdateFormContent),\n/* harmony export */   getContentByFormIDandTagID: () => (/* binding */ getContentByFormIDandTagID),\n/* harmony export */   getEquipmentTagID: () => (/* binding */ getEquipmentTagID),\n/* harmony export */   publishFormAction: () => (/* binding */ publishFormAction),\n/* harmony export */   runForm: () => (/* binding */ runForm),\n/* harmony export */   saveFormAction: () => (/* binding */ saveFormAction),\n/* harmony export */   submitFormAction: () => (/* binding */ submitFormAction)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\":\"GetClients\",\"0056b66f5e0bfda60da83a467cac83458903790355\":\"GetProjects\",\"005890e9ace11382590dfe256d18a985d80ef53664\":\"GetFormStats\",\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\":\"GetFormsInformation\",\"00ad1843f1c28ec580071c5c56699400132f7f9d12\":\"GetForms\",\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\":\"publishFormAction\",\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\":\"saveFormAction\",\"40226b3b5d44a7254f49759d036f24d7c23272d040\":\"GetFormById\",\"403145f8835472f5e7741c1a435bba5cc897cb941f\":\"GetFormContentByUrl\",\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\":\"GetEquipmentTagsForForm\",\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\":\"GetFormsWithClient\",\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\":\"submitFormAction\",\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\":\"GetProjectsFromClientName\",\"408519304d22a0e05a5b296d09cb48801817b8def8\":\"GetFormSubmissionById\",\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\":\"GetFormWithSubmissions\",\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\":\"GetFormsByClientName\",\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\":\"GetClientWithProjects\",\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\":\"getEquipmentTagID\",\"60922447ba3f326fdf23eac6584943278d55d45d32\":\"getContentByFormIDandTagID\",\"60cb494246e13d01c97932a238a3d4622a74f55852\":\"UpdateFormContent\",\"702a21f6cf4717559298ad70c1798c88ee23f93130\":\"SubmitForm\",\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\":\"CreateForm\",\"70512de972c6c1b3fffa11e6c3274976b337deee8b\":\"PublishForm\",\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\":\"SaveFormAfterTest\",\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\":\"runForm\"} */ \nvar GetClients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClients\");\nvar GetProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"0056b66f5e0bfda60da83a467cac83458903790355\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjects\");\nvar GetFormStats = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"005890e9ace11382590dfe256d18a985d80ef53664\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormStats\");\nvar GetForms = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00ad1843f1c28ec580071c5c56699400132f7f9d12\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetForms\");\nvar GetFormById = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40226b3b5d44a7254f49759d036f24d7c23272d040\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormById\");\nvar UpdateFormContent = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60cb494246e13d01c97932a238a3d4622a74f55852\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"UpdateFormContent\");\nvar saveFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"saveFormAction\");\nvar PublishForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70512de972c6c1b3fffa11e6c3274976b337deee8b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"PublishForm\");\nvar publishFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"publishFormAction\");\nvar GetFormContentByUrl = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403145f8835472f5e7741c1a435bba5cc897cb941f\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormContentByUrl\");\nvar SubmitForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"702a21f6cf4717559298ad70c1798c88ee23f93130\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SubmitForm\");\nvar submitFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"submitFormAction\");\nvar GetFormWithSubmissions = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormWithSubmissions\");\nvar GetFormSubmissionById = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"408519304d22a0e05a5b296d09cb48801817b8def8\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormSubmissionById\");\nvar GetEquipmentTagsForForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetEquipmentTagsForForm\");\nvar GetClientWithProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClientWithProjects\");\nvar GetFormsWithClient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsWithClient\");\nvar GetFormsInformation = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsInformation\");\nvar GetProjectsFromClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjectsFromClientName\");\nvar CreateForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"CreateForm\");\nvar runForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"runForm\");\nvar GetFormsByClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsByClientName\");\nvar SaveFormAfterTest = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SaveFormAfterTest\");\nvar getContentByFormIDandTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60922447ba3f326fdf23eac6584943278d55d45d32\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getContentByFormIDandTagID\");\nvar getEquipmentTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getEquipmentTagID\");\n /*getEquipmentTagID(\"Equip1\", \"Tag1\")\r\n.then((updatedForm) => {\r\n  console.log(\"Equip TAG ID:\", updatedForm);\r\n})\r\n.catch((error) => {\r\n  console.error(\"Error updating form:\", error);\r\n});*/ \n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FjdGlvbnMvZm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXVJc0JBLDJCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUEwQ0FDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFxQkFDLDZCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFzQ0FDLHlCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFtQkFDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUE4REFDLGtDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFzQkFDLCtCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUEwQkFDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUF3QkFDLGtDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFRQUMsb0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXFDQUMsMkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBDQUMsaUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtCQUMsdUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTRCQUMsc0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtCQUMsd0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdEQUMsc0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQThCQUMsbUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZDQUMsb0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdFQUMsMENBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStCQUMsMkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBDVEMsd0JBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtIU0MscUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXVIQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZDQUMsMkNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXlDQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtDQWlDdEI7Ozs7OztHQU1HIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxkZWplc3VzLkhFUk9cXE9uZURyaXZlIC0gSGVybyBFbmdpbmVlcmluZ1xcRGVza3RvcFxcSGVyb0F1ZGl0QXBwMjAyNVxcSGVyb0F1ZGl0QXBwMjAyNVxcYWN0aW9uc1xcZm9ybS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XHJcblxyXG5pbXBvcnQgeyBBbXBsaWZ5IH0gZnJvbSBcImF3cy1hbXBsaWZ5XCI7XHJcbmltcG9ydCBvdXRwdXRzIGZyb20gXCIuLi9hbXBsaWZ5X291dHB1dHMuanNvblwiO1xyXG5pbXBvcnQgdHlwZSB7IFNjaGVtYSB9IGZyb20gXCIuLi9hbXBsaWZ5L2RhdGEvcmVzb3VyY2VcIjtcclxuaW1wb3J0IHsgZ2VuZXJhdGVDbGllbnQgfSBmcm9tIFwiYXdzLWFtcGxpZnkvZGF0YVwiO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlciB9IGZyb20gXCJhd3MtYW1wbGlmeS9hdXRoXCI7IC8vIEVuc3VyZSBnZXRDdXJyZW50VXNlciBpcyBpbXBvcnRlZCBjb3JyZWN0bHlcclxuLy8vaW1wb3J0IHsgdmkgfSBmcm9tIFwiZGF0ZS1mbnMvbG9jYWxlXCI7XHJcbi8vaW1wb3J0IHsgc3ViIH0gZnJvbSBcImRhdGUtZm5zXCI7XHJcbi8vaW1wb3J0IHsgc3RyaW5nIH0gZnJvbSAnem9kJztcclxuLy9pbXBvcnQgeyBmb3JtU2NoZW1hVHlwZSB9IGZyb20gXCIuLi9zY2hlbWFzL2Zvcm1cIjtcclxuXHJcbkFtcGxpZnkuY29uZmlndXJlKG91dHB1dHMpO1xyXG5cclxuY29uc3QgY2xpZW50ID0gZ2VuZXJhdGVDbGllbnQ8U2NoZW1hPigpO1xyXG5cclxuLy8gVXNlck5vdEZvdW5kRXJyIGNsYXNzIGZvciBjdXN0b20gZXJyb3IgaGFuZGxpbmdcclxuY2xhc3MgVXNlck5vdEZvdW5kRXJyIGV4dGVuZHMgRXJyb3Ige31cclxuXHJcbi8qZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEluc2VydENsaWVudChOYW1lQ2xpZW50OiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50LmNyZWF0ZSh7XHJcbiAgICAgIENsaWVudE5hbWU6IE5hbWVDbGllbnQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluc2VydCBjbGllbnQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybnMgdGhlIGluc2VydGVkIGNsaWVudCBkYXRhXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59Ki9cclxuLypJbnNlcnRDbGllbnQoXCJGb3J0ZXNjdWVcIilcclxuICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coXCJDbGllbnQ6XCIsIGRhdGEpKVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjbGllbnQgd2l0aCBwcm9qZWN0czpcIiwgZXJyb3IpKTsqL1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gaW5zZXJ0IGEgc2luZ2xlIHByb2plY3QgKHlvdSBtYXkgYWxyZWFkeSBoYXZlIHNvbWV0aGluZyBsaWtlIHRoaXMpXHJcbi8qZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEluc2VydFByb2plY3QobmFtZTogc3RyaW5nLCBwcm9qTnVtOiBzdHJpbmcsIGNsaWVudElEOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQuY3JlYXRlKHtcclxuICAgICAgcHJvamVjdElEOiBwcm9qTnVtLFxyXG4gICAgICBwcm9qZWN0TmFtZTogbmFtZSxcclxuICAgICAgQ2xpZW50SUQ6IGNsaWVudElEXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluc2VydCBjbGllbnQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybnMgdGhlIGluc2VydGVkIGNsaWVudCBkYXRhXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59Ki9cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGluc2VydCBtdWx0aXBsZSBwcm9qZWN0c1xyXG4vKmV4cG9ydCBhc3luYyBmdW5jdGlvbiBJbnNlcnRNdWx0aXBsZVByb2plY3RzKG5hbWVzOiBzdHJpbmdbXSwgcHJvak51bTogc3RyaW5nW10sIGNsaWVudElEczogc3RyaW5nW10pIHtcclxuICBjb25zdCBpbnNlcnRlZFByb2plY3RzOiBhbnlbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBzdWNjZXNzZnVsbHkgaW5zZXJ0ZWQgcHJvamVjdHNcclxuICBjb25zdCBmYWlsZWRQcm9qZWN0czogc3RyaW5nW10gPSBbXTsgLy8gQXJyYXkgdG8gc3RvcmUgcHJvamVjdCBuYW1lcyB0aGF0IGZhaWxlZCB0byBpbnNlcnRcclxuXHJcbiAgLy8gRW5zdXJlIHRoYXQgaW5wdXQgYXJyYXlzIGhhdmUgdGhlIHNhbWUgbGVuZ3RoXHJcbiAgaWYgKG5hbWVzLmxlbmd0aCAhPT0gcHJvak51bS5sZW5ndGggfHwgcHJvak51bS5sZW5ndGggIT09IGNsaWVudElEcy5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIklucHV0IGFycmF5cyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlwiKTtcclxuICB9XHJcblxyXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgYXJyYXlzIGFuZCBpbnNlcnQgcHJvamVjdHMgb25lIGJ5IG9uZVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IG5hbWUgPSBuYW1lc1tpXTtcclxuICAgIGNvbnN0IHByb2plY3ROdW1iZXIgPSBwcm9qTnVtW2ldO1xyXG4gICAgY29uc3QgY2xpZW50SUQgPSBjbGllbnRJRHNbaV07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcHJvamVjdERhdGEgPSBhd2FpdCBJbnNlcnRQcm9qZWN0KG5hbWUsIHByb2plY3ROdW1iZXIsIGNsaWVudElEKTsgLy8gQ2FsbCB0byBpbnNlcnQgYSBzaW5nbGUgcHJvamVjdFxyXG4gICAgICBpbnNlcnRlZFByb2plY3RzLnB1c2gocHJvamVjdERhdGEpOyAvLyBTdG9yZSB0aGUgc3VjY2Vzc2Z1bCBpbnNlcnQgcmVzdWx0XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gaW5zZXJ0IHByb2plY3Q6ICR7bmFtZX1gLCBlcnJvcik7XHJcbiAgICAgIGZhaWxlZFByb2plY3RzLnB1c2gobmFtZSk7IC8vIFN0b3JlIHRoZSBmYWlsZWQgcHJvamVjdCBuYW1lXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHM6IHN1Y2Nlc3NmdWwgaW5zZXJ0aW9ucyBhbmQgZmFpbGVkIG9uZXNcclxuICByZXR1cm4ge1xyXG4gICAgaW5zZXJ0ZWRQcm9qZWN0cyxcclxuICAgIGZhaWxlZFByb2plY3RzLFxyXG4gIH07XHJcbn0qL1xyXG5cclxuLypleHBvcnQgYXN5bmMgZnVuY3Rpb24gSW5zZXJ0TXVsdGlwbGVDbGllbnRzKG5hbWVzOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IGluc2VydGVkQ2xpZW50czogYW55W10gPSBbXTsgLy8gQXJyYXkgdG8gc3RvcmUgc3VjY2Vzc2Z1bGx5IGluc2VydGVkIGNsaWVudHNcclxuICBjb25zdCBmYWlsZWRDbGllbnRzOiBzdHJpbmdbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBjbGllbnQgbmFtZXMgdGhhdCBmYWlsZWQgdG8gaW5zZXJ0XHJcblxyXG4gIGZvciAobGV0IG5hbWUgb2YgbmFtZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsaWVudERhdGEgPSBhd2FpdCBJbnNlcnRDbGllbnQobmFtZSk7IC8vIENhbGwgdGhlIHNpbmdsZSBjbGllbnQgaW5zZXJ0IGZ1bmN0aW9uXHJcbiAgICAgIGluc2VydGVkQ2xpZW50cy5wdXNoKGNsaWVudERhdGEpOyAvLyBTdG9yZSB0aGUgc3VjY2Vzc2Z1bCBpbnNlcnQgcmVzdWx0XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gaW5zZXJ0IGNsaWVudDogJHtuYW1lfWAsIGVycm9yKTtcclxuICAgICAgZmFpbGVkQ2xpZW50cy5wdXNoKG5hbWUpOyAvLyBTdG9yZSB0aGUgZmFpbGVkIGNsaWVudCBuYW1lXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHNcclxuICByZXR1cm4ge1xyXG4gICAgaW5zZXJ0ZWRDbGllbnRzLFxyXG4gICAgZmFpbGVkQ2xpZW50cyxcclxuICB9O1xyXG59Ki9cclxuXHJcbi8qY29uc3QgY2xpZW50cyA9IGF3YWl0IEdldENsaWVudHMoKTsqL1xyXG5cclxuLypjb25zdCBjSUQgPSBjbGllbnRzLmNsaWVudElEcztcclxuY29uc29sZS5sb2coY0lEKTtcclxuY29uc3QgcHJvamVjdHMgPSBbXCJwcm9qZWN0MVwiLCBcInByb2plY3QyXCIsXCJwcm9qZWN0M1wiLFwicHJvamVjdDRcIl07XHJcbmNvbnN0ICBwcm9qTnVtYmVycyA9IFtcInByb2pOdW1iZXIxXCIsXCJwcm9qTnVtYmVyMlwiLFwicHJvak51bWJlcjNcIixcInByb2pOdW1iZXI0XCJdOyovXHJcblxyXG4vKkluc2VydFByb2plY3QocHJvamVjdHNbMF0scHJvak51bWJlcnNbMF0sY0lEWzBdKTtcclxuSW5zZXJ0UHJvamVjdChwcm9qZWN0c1sxXSxwcm9qTnVtYmVyc1sxXSxjSURbMV0pO1xyXG5JbnNlcnRQcm9qZWN0KHByb2plY3RzWzJdLHByb2pOdW1iZXJzWzJdLGNJRFsyXSk7XHJcbkluc2VydFByb2plY3QocHJvamVjdHNbM10scHJvak51bWJlcnNbM10sY0lEWzNdKTsqL1xyXG5cclxuLypjb25zdCBjbGllbnROYW1lcyA9IFtcIkNsaWVudDRcIl07IC8vIEV4YW1wbGUgY2xpZW50IG5hbWVzXHJcblxyXG5JbnNlcnRNdWx0aXBsZUNsaWVudHMoY2xpZW50TmFtZXMpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgaW5zZXJ0ZWQgY2xpZW50czpcIiwgcmVzdWx0Lmluc2VydGVkQ2xpZW50cyk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBpbnNlcnQgY2xpZW50czpcIiwgcmVzdWx0LmZhaWxlZENsaWVudHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluc2VydGluZyBjbGllbnRzOlwiLCBlcnJvcik7XHJcbiAgfSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRDbGllbnRzKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggY2xpZW50cy5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXh0cmFjdCBjbGllbnQgbmFtZXMgYW5kIGNsaWVudCBJRHNcclxuICAgIGNvbnN0IGNsaWVudE5hbWVzID0gZGF0YS5tYXAoKGNsaWVudCkgPT4gY2xpZW50LkNsaWVudE5hbWUpO1xyXG4gICAgY29uc3QgY2xpZW50SURzID0gZGF0YS5tYXAoKGNsaWVudCkgPT4gY2xpZW50LmlkKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gYm90aCBjbGllbnQgbmFtZXMgYW5kIElEcyBpbiBhbiBvYmplY3Qgb3IgYW4gYXJyYXlcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNsaWVudE5hbWVzLFxyXG4gICAgICBjbGllbnRJRHMsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEFsdGVybmF0aXZlbHksIGlmIHlvdSB3YW50IHRvIHJldHVybiBhbiBhcnJheTpcclxuICAgIC8vIHJldHVybiBbY2xpZW50TmFtZXMsIGNsaWVudElEc107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKmFzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHtcclxuICBjb25zdCBjbGllbnRzID0gYXdhaXQgR2V0Q2xpZW50cygpO1xyXG4gIGNvbnN0IGNJRCA9IGNsaWVudHMuY2xpZW50SURzO1xyXG4gIGNvbnNvbGUubG9nKGNJRCk7XHJcbiAgY29uc3QgcHJvamVjdHMgPSBbXCJwcm9qZWN0MVwiLCBcInByb2plY3QyXCIsIFwicHJvamVjdDNcIiwgXCJwcm9qZWN0NFwiXTtcclxuICBjb25zdCBwcm9qTnVtYmVycyA9IFtcInByb2pOdW1iZXIxXCIsIFwicHJvak51bWJlcjJcIiwgXCJwcm9qTnVtYmVyM1wiLCBcInByb2pOdW1iZXI0XCJdO1xyXG4gXHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1swXSwgcHJvak51bWJlcnNbMF0sIGNJRFswXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1sxXSwgcHJvak51bWJlcnNbMV0sIGNJRFsxXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1syXSwgcHJvak51bWJlcnNbMl0sIGNJRFsyXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1szXSwgcHJvak51bWJlcnNbM10sIGNJRFszXSk7XHJcbn0qL1xyXG5cclxuLy9mZXRjaERhdGEoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRQcm9qZWN0cygpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggcHJvamVjdHMuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlcGFyYXRlIHByb2plY3RJRHMgYW5kIHByb2plY3ROYW1lc1xyXG4gICAgY29uc3QgcHJvamVjdElEcyA9IGRhdGEubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3RJRCk7IC8vIExpc3Qgb2YgYWxsIHByb2plY3RJRHNcclxuICAgIGNvbnN0IHByb2plY3ROYW1lcyA9IGRhdGEubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3ROYW1lKTsgLy8gTGlzdCBvZiBhbGwgcHJvamVjdE5hbWVzXHJcblxyXG4gICAgLy8gUmV0dXJuIGJvdGggc2VwYXJhdGVseVxyXG4gICAgcmV0dXJuIHsgcHJvamVjdElEcywgcHJvamVjdE5hbWVzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybVN0YXRzKCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgZm9ybXNcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybXMsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3QoKTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcclxuICAgICAgcmV0dXJuIHsgdmlzaXRzOiAwLCBzdWJtaXNzaW9uczogMCwgc3VibWlzc2lvblJhdGU6IDAsIGJvdW5jZVJhdGU6IDAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhciBzdGF0cyBjb20gVE9ET1Mgb3MgZm9ybXMgKHNlbSBmaWx0cmFyIHVzZXJJZClcclxuICAgIGNvbnN0IHZpc2l0cyA9IGZvcm1zLnJlZHVjZSgoc3VtLCBmb3JtKSA9PiBzdW0gKyAoZm9ybS52aXNpdHMgfHwgMCksIDApO1xyXG4gICAgY29uc3Qgc3VibWlzc2lvbnMgPSBmb3Jtcy5yZWR1Y2UoXHJcbiAgICAgIChzdW0sIGZvcm0pID0+IHN1bSArIChmb3JtLnN1Ym1pc3Npb25zIHx8IDApLFxyXG4gICAgICAwLFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgc3VibWlzc2lvblJhdGUgPSAwO1xyXG4gICAgaWYgKHZpc2l0cyA+IDApIHtcclxuICAgICAgc3VibWlzc2lvblJhdGUgPSAoc3VibWlzc2lvbnMgLyB2aXNpdHMpICogMTAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvdW5jZVJhdGUgPSAxMDAgLSBzdWJtaXNzaW9uUmF0ZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2aXNpdHMsXHJcbiAgICAgIHN1Ym1pc3Npb25zLFxyXG4gICAgICBzdWJtaXNzaW9uUmF0ZSxcclxuICAgICAgYm91bmNlUmF0ZSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIHN0YXRzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyB2aXNpdHM6IDAsIHN1Ym1pc3Npb25zOiAwLCBzdWJtaXNzaW9uUmF0ZTogMCwgYm91bmNlUmF0ZTogMCB9O1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtcywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiRm9ybXM6XCIsIGZvcm1zKTtcclxuICAgIHJldHVybiBmb3JtcztcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybXM6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybUJ5SWQoaWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm0sIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmdldCh7IGlkIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZvcm0pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybSBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcm9qZWN0TmFtZSA9IG51bGw7XHJcbiAgICBsZXQgY2xpZW50TmFtZSA9IG51bGw7XHJcbiAgICBsZXQgc2hhcmVVUkwgPSBudWxsO1xyXG5cclxuICAgIGlmIChmb3JtLnByb2pJRCkge1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHByb2plY3REYXRhLCBlcnJvcnM6IHByb2plY3RFcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IHByb2plY3RJRDogeyBlcTogZm9ybS5wcm9qSUQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChwcm9qZWN0RXJyb3JzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihwcm9qZWN0RXJyb3JzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcHJvamVjdCA9IHByb2plY3REYXRhPy5bMF07XHJcbiAgICAgIGlmIChwcm9qZWN0KSB7XHJcbiAgICAgICAgcHJvamVjdE5hbWUgPSBwcm9qZWN0LnByb2plY3ROYW1lO1xyXG5cclxuICAgICAgICBpZiAocHJvamVjdC5DbGllbnRJRCkge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBjbGllbnREYXRhLCBlcnJvcnM6IGNsaWVudEVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQuZ2V0KHtcclxuICAgICAgICAgICAgaWQ6IHByb2plY3QuQ2xpZW50SUQsXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoY2xpZW50RXJyb3JzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2xpZW50RXJyb3JzKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoY2xpZW50RGF0YSkge1xyXG4gICAgICAgICAgICBjbGllbnROYW1lID0gY2xpZW50RGF0YS5DbGllbnROYW1lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldG9ybmFyIHRhbWLDqW0gdmlzaXRhcyBlIHN1Ym1pc3PDtWVzXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBmb3JtLFxyXG4gICAgICBwcm9qZWN0TmFtZSxcclxuICAgICAgY2xpZW50TmFtZSxcclxuICAgICAgc2hhcmVVUkw6IGZvcm0uc2hhcmVVUkwsXHJcbiAgICAgIHZpc2l0czogZm9ybS52aXNpdHMgPz8gMCxcclxuICAgICAgc3VibWlzc2lvbnM6IGZvcm0uc3VibWlzc2lvbnMgPz8gMCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGJ5IElEOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gVXBkYXRlRm9ybUNvbnRlbnQoaWQ6IHN0cmluZywgY29udGVudDogYW55KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZvcm0gPSB7XHJcbiAgICAgIGlkLFxyXG4gICAgICBjb250ZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRGb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoZm9ybSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSBjb250ZW50LlwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXBkYXRlZEZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBmb3JtIGNvbnRlbnQ6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSBjb250ZW50LlwiKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIERlZmluZSB5b3VyIHNlcnZlci1zaWRlIGFjdGlvblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUZvcm1BY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKSB7XHJcbiAgY29uc3QgaWQgPSBmb3JtRGF0YS5nZXQoXCJpZFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3QgY29udGVudCA9IGZvcm1EYXRhLmdldChcImNvbnRlbnRcIikgYXMgc3RyaW5nO1xyXG5cclxuICAvLyBDYWxsIHlvdXIgZXhpc3Rpbmcgc2VydmVyLXNpZGUgZnVuY3Rpb24gKFVwZGF0ZUZvcm1Db250ZW50KVxyXG4gIGF3YWl0IFVwZGF0ZUZvcm1Db250ZW50KGlkLCBjb250ZW50KTtcclxufVxyXG4vKmNvbnN0IGRhdGEgPSBbXHJcbiAgWydTZWN0aW9uIDEnLCAnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnXSxcclxuICBbJ0UnLCAnRicsICdHJywgJ0gnLCAnSSddLFxyXG4gIFsnSicsICdLJywgJ0wnLCAnTScsICdOJ10sXHJcbl07XHJcblxyXG4vLyBDb252ZXJ0IHRoZSBkYXRhIHRvIGEgSlNPTiBzdHJpbmdcclxuY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG5cclxuXHJcblVwZGF0ZUZvcm1Db250ZW50KFwiYjVhMTFkNzctZmVmNy00MzMwLTg0NzktZGI1ZDdhZWEzYWZmXCIsIGNvbnRlbnQpXHJcbiAgLnRoZW4odXBkYXRlZEZvcm0gPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ0Zvcm0gdXBkYXRlZDonLCB1cGRhdGVkRm9ybSk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZm9ybTonLCBlcnJvcik7XHJcbiAgfSk7XHJcbiovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUHVibGlzaEZvcm0oaWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBzaGFyZVVSTDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuXHJcbiAgICBjb25zdCBmb3JtID0ge1xyXG4gICAgICBpZDogaWQsXHJcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXHJcbiAgICAgIHNoYXJlVVJMOiBzaGFyZVVSTCxcclxuICAgICAgcHVibGlzaGVkOiB0cnVlLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRGb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoZm9ybSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwdWJsaXNoIHRoZSBmb3JtLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXBkYXRlZEZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwdWJsaXNoaW5nIGZvcm06XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwdWJsaXNoIHRoZSBmb3JtLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdWJsaXNoRm9ybUFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpIHtcclxuICBjb25zdCBpZCA9IGZvcm1EYXRhLmdldChcImlkXCIpIGFzIHN0cmluZztcclxuICBjb25zdCBjb250ZW50ID0gZm9ybURhdGEuZ2V0KFwiY29udGVudFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3Qgc2hhcmVVUkwgPSBmb3JtRGF0YS5nZXQoXCJzaGFyZVVSTFwiKSBhcyBzdHJpbmc7XHJcblxyXG4gIGF3YWl0IFB1Ymxpc2hGb3JtKGlkLCBjb250ZW50LCBzaGFyZVVSTCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtQ29udGVudEJ5VXJsKGZvcm1Vcmw6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBcclxuICAgIC8vY29uc3QgZm9ybVVSTCA9IGAvc3VibWl0LyR7Zm9ybVVybH1gO1xyXG4gICAgY29uc3QgZm9ybVVSTCA9IGZvcm1Vcmwuc3RhcnRzV2l0aCgnL3N1Ym1pdC8nKSA/IGZvcm1VcmwgOiBgL3N1Ym1pdC8ke2Zvcm1Vcmx9YDtcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybXMsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHsgc2hhcmVVUkw6IHsgZXE6IGZvcm1VUkwgfSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycyB8fCAhZm9ybXMgfHwgZm9ybXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzIHx8IFwiRm9ybSBub3QgZm91bmQsIHBsZWFzZSB0cnkgYWdhaW4uXCIpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybSA9IGZvcm1zWzBdO1xyXG4gICAgY29uc3QgdXBkYXRlZFZpc2l0cyA9IGZvcm0udmlzaXRzID8gZm9ybS52aXNpdHMgKyAxIDogMTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVkRm9ybSA9IHtcclxuICAgICAgaWQ6IGZvcm0uaWQsXHJcbiAgICAgIHZpc2l0czogdXBkYXRlZFZpc2l0cyxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgeyBlcnJvcnM6IHVwZGF0ZUVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLnVwZGF0ZSh1cGRhdGVkRm9ybSk7XHJcblxyXG4gICAgaWYgKHVwZGF0ZUVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKHVwZGF0ZUVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSB2aXNpdHMuXCIpO1xyXG4gICAgfVxyXG4gICAgLy9jb25zb2xlLmxvZyhcImZvcm06XCIsIGZvcm0pO1xyXG4gICAgcmV0dXJuIGZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGNvbnRlbnQgYnkgVVJMOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGNvbnRlbnQgYnkgVVJMLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBTdWJtaXRGb3JtKGZvcm1JZDogc3RyaW5nLCB0YWdJZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcclxuICBjb25zdCBzdWJtaXNzaW9uID0ge1xyXG4gICAgZm9ybUlkLFxyXG4gICAgY29udGVudCxcclxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gIH07XHJcbiAgY29uc29sZS5sb2coXCJGb3JtSWQ6XCIsIGZvcm1JZCk7XHJcbiAgY29uc29sZS5sb2coXCJUYWdJZDpcIiwgdGFnSWQpO1xyXG4gIFxyXG4gIGNvbnN0IHsgZGF0YTogc3VibWlzc2lvbkRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVN1Ym1pc3Npb25zLmNyZWF0ZShzdWJtaXNzaW9uKTtcclxuXHJcbiAgaWYgKCFzdWJtaXNzaW9uRGF0YT8uaWQpIHRocm93IG5ldyBFcnJvcihcIkVycm8gYW8gY3JpYXIgc3VibWlzc8Ojb1wiKTtcclxuXHJcbiAgY29uc3Qgc3VibWlzc2lvbklkID0gc3VibWlzc2lvbkRhdGEuaWQ7XHJcblxyXG4gIC8vIEF0dWFsaXphIG8gY29udGFkb3IgZGUgc3VibWlzc8O1ZXMgZG8gZm9ybXVsw6FyaW9cclxuICBjb25zdCB7IGRhdGE6IGZvcm1MaXN0IH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCh7XHJcbiAgICBmaWx0ZXI6IHsgaWQ6IHsgZXE6IGZvcm1JZCB9IH0sXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGZvcm0gPSBmb3JtTGlzdFswXTtcclxuICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0udXBkYXRlKHtcclxuICAgIGlkOiBmb3JtLmlkLFxyXG4gICAgc3VibWlzc2lvbnM6IChmb3JtLnN1Ym1pc3Npb25zIHx8IDApICsgMSxcclxuICB9KTtcclxuXHJcbiAgLy8gQXR1YWxpemEgbyBjYW1wbyBjb250ZW50VGVzdCBlbSBGb3JtVGFnMiBjb3JyZXNwb25kZW50ZSBhbyB0YWdJZFxyXG4gIGNvbnN0IHsgZGF0YTogZm9ybVRhZ3MgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIubGlzdCh7XHJcbiAgICBmaWx0ZXI6IHsgaWQ6IHsgZXE6IHRhZ0lkIH0gfSxcclxuICB9KTtcclxuXHJcbiAgaWYgKCFmb3JtVGFncy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihcIkZvcm1UYWcyIG7Do28gZW5jb250cmFkb1wiKTtcclxuXHJcbiAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi51cGRhdGUoe1xyXG4gICAgaWQ6IGZvcm1UYWdzWzBdLmlkLFxyXG4gICAgY29udGVudFRlc3Q6IHN1Ym1pc3Npb25JZCxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHN1Ym1pc3Npb25EYXRhO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdEZvcm1BY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKSB7XHJcbiAgY29uc3QgZm9ybUlkID0gZm9ybURhdGEuZ2V0KFwiZm9ybUlkXCIpIGFzIHN0cmluZztcclxuICBjb25zdCB0YWdJZCA9IGZvcm1EYXRhLmdldChcInRhZ0lkXCIpIGFzIHN0cmluZztcclxuICBjb25zdCByYXdSZXNwb25zZXMgPSBmb3JtRGF0YS5nZXQoXCJyZXNwb25zZXNcIikgYXMgc3RyaW5nO1xyXG4gIGNvbnN0IHJhd0Zvcm1Db250ZW50ID0gZm9ybURhdGEuZ2V0KFwiZm9ybUNvbnRlbnRcIikgYXMgc3RyaW5nO1xyXG5cclxuICBjb25zdCBzdWJtaXNzaW9uID0ge1xyXG4gICAgcmVzcG9uc2VzOiBKU09OLnBhcnNlKHJhd1Jlc3BvbnNlcyksXHJcbiAgICBmb3JtQ29udGVudDogSlNPTi5wYXJzZShyYXdGb3JtQ29udGVudCksXHJcbiAgICBzdWJtaXR0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGpzb25Db250ZW50ID0gSlNPTi5zdHJpbmdpZnkoc3VibWlzc2lvbik7XHJcbiAgYXdhaXQgU3VibWl0Rm9ybShmb3JtSWQsIHRhZ0lkLCBqc29uQ29udGVudCk7XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1XaXRoU3VibWlzc2lvbnMoaWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm0sIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmdldCh7IGlkIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm9ybSkge1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHN1Ym1pc3Npb25zLCBlcnJvcnM6IHN1Ym1pc3Npb25FcnJvcnMgfSA9XHJcbiAgICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtU3VibWlzc2lvbnMubGlzdCh7XHJcbiAgICAgICAgICBmaWx0ZXI6IHsgZm9ybUlkOiB7IGVxOiBmb3JtLmlkIH0gfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChzdWJtaXNzaW9uRXJyb3JzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihzdWJtaXNzaW9uRXJyb3JzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHsgZm9ybSwgc3VibWlzc2lvbnMgfTtcclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIG5vdCBmb3VuZC5cIik7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIHdpdGggc3VibWlzc2lvbnM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBmb3JtIHdpdGggc3VibWlzc2lvbnMuXCIpO1xyXG4gIH1cclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybVN1Ym1pc3Npb25CeUlkKHN1Ym1pc3Npb25JZDogc3RyaW5nKSB7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGNvbnRlbnQsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtU3VibWlzc2lvbnMuZ2V0KHsgaWQ6IHN1Ym1pc3Npb25JZCB9KTtcclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm06XCIsIGVycm9ycyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRlbnQgbm90IGZvdW5kLlwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiAgY29udGVudCA7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBHZXRGb3JtU3VibWlzc2lvbkJ5SWQ6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEVxdWlwbWVudFRhZ3NGb3JGb3JtKGlkOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgLy8gRmV0Y2ggdGhlIGZvcm0gZGF0YVxyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5nZXQoeyBpZCB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtOlwiLCBlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZvcm0pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybSBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGVxdWlwbWVudCB0YWdzIHJlbGF0ZWQgdG8gdGhlIGZvcm1cclxuICAgIGNvbnN0IHsgZGF0YTogZXF1aXBtZW50VGFncywgZXJyb3JzOiBlcXVpcG1lbnRUYWdzRXJyb3JzIH0gPVxyXG4gICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICAgIGZpbHRlcjogeyBmb3JtSUQ6IHsgZXE6IGZvcm0uaWQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAoZXF1aXBtZW50VGFnc0Vycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZXF1aXBtZW50IHRhZ3M6XCIsIGVxdWlwbWVudFRhZ3NFcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWVxdWlwbWVudFRhZ3MgfHwgZXF1aXBtZW50VGFncy5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5sb2coXCJObyBlcXVpcG1lbnQgdGFncyBmb3VuZC5cIik7XHJcbiAgICAgIHJldHVybiB7IGZvcm0sIGVxdWlwbWVudFRhZ3M6IFtdIH07XHJcbiAgICB9XHJcblxyXG4gICAgICAvLyBGZXRjaCByZWxhdGVkIGVxdWlwbWVudCBkZXRhaWxzIGZvciBlYWNoIHRhZ1xyXG4gICAgY29uc3QgZXF1aXBtZW50RGV0YWlscyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICBlcXVpcG1lbnRUYWdzLm1hcChhc3luYyAodGFnKSA9PiB7XHJcbiAgICAgICAgLy8gRW5zdXJlIHRoYXQgdGFnLnRhZ0lEIGlzIHZhbGlkIGJlZm9yZSBtYWtpbmcgdGhlIEFQSSBjYWxsXHJcbiAgICAgICAgY29uc3QgZXF1aXBtZW50VGFnID0gdGFnLnRhZ0lEID8gYXdhaXQgY2xpZW50Lm1vZGVscy5FcXVpcG1lbnRUYWcyLmdldCh7IGlkOiB0YWcudGFnSUQgfSkgOiBudWxsO1xyXG5cclxuICAgICAgICBpZiAoZXF1aXBtZW50VGFnKSB7XHJcbiAgICAgICAgICByZXR1cm4gZXF1aXBtZW50VGFnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCB0YWdJRDpcIiwgdGFnLnRhZ0lEKTtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgXHJcblxyXG4gICAgcmV0dXJuIHsgZm9ybSwgZXF1aXBtZW50VGFnczogZXF1aXBtZW50RGV0YWlscy5maWx0ZXIodGFnID0+IHRhZyAhPT0gbnVsbCkgfTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBlcXVpcG1lbnQgdGFncyBmb3IgZm9ybTpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldENsaWVudFdpdGhQcm9qZWN0cyhDbGllbnRJRDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXJyb3JzLCBkYXRhIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5nZXQoeyBpZDogQ2xpZW50SUQgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycyB8fCAhY2xpZW50KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjbGllbnQ6XCIsIGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNsaWVudCBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGFsbCBwcm9qZWN0cyByZWxhdGVkIHRvIHRoaXMgY2xpZW50XHJcbiAgICBjb25zdCB7IGRhdGE6IHByb2plY3RzLCBlcnJvcnM6IHByb2plY3RFcnJvcnMgfSA9XHJcbiAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IENsaWVudElEOiB7IGVxOiBDbGllbnRJRCB9IH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGlmIChwcm9qZWN0RXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9qZWN0czpcIiwgcHJvamVjdEVycm9ycyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgLi4uZGF0YSwgcHJvamVjdHMgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qR2V0Q2xpZW50V2l0aFByb2plY3RzKFwiMWFkNzRiY2UtYmQ5ZC00MTMxLTgzZWYtZWZmZWNiYTc0YzdkXCIpXHJcbiAgLnRoZW4oKGRhdGEpID0+IGNvbnNvbGUubG9nKFwiQ2xpZW50IHdpdGggUHJvamVjdHM6XCIsIGRhdGEpKVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjbGllbnQgd2l0aCBwcm9qZWN0czpcIiwgZXJyb3IpKTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1zV2l0aENsaWVudChDbGllbnRJRDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyB1c2VySWQgfSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgaWYgKCF1c2VySWQpIHtcclxuICAgIHRocm93IG5ldyBVc2VyTm90Rm91bmRFcnIoKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBGZXRjaCBwcm9qZWN0cyBsaW5rZWQgdG8gdGhlIENsaWVudElEXHJcbiAgICBjb25zdCB7IGRhdGE6IHByb2plY3RzLCBlcnJvcnM6IHByb2plY3RFcnJvcnMgfSA9XHJcbiAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IENsaWVudElEOiB7IGVxOiBDbGllbnRJRCB9IH0sXHJcbiAgICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coXCJQcm9qZWN0cyBGb3VuZDpcIiwgcHJvamVjdHMpO1xyXG4gICAgaWYgKHByb2plY3RFcnJvcnMgfHwgIXByb2plY3RzIHx8IHByb2plY3RzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKHByb2plY3RFcnJvcnMgfHwgXCJObyBwcm9qZWN0cyBmb3VuZCBmb3IgdGhpcyBjbGllbnQuXCIpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBwcm9qZWN0cyBmb3VuZCBmb3IgdGhpcyBjbGllbnQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZldGNoIGZvcm1zIGZvciBlYWNoIHByb2plY3RcclxuICAgIGNvbnN0IGZvcm1zID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgIHByb2plY3RzLm1hcChhc3luYyAocHJvamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdEZvcm1zIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCh7XHJcbiAgICAgICAgICBmaWx0ZXI6IHsgcHJvaklEOiB7IGVxOiBwcm9qZWN0LnByb2plY3RJRCB9IH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJQcm9qZWN0IElEOlwiLCBwcm9qZWN0LnByb2plY3RJRCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYEZvcm1zIGZvciBQcm9qZWN0ICR7cHJvamVjdC5wcm9qZWN0TmFtZX06YCwgcHJvamVjdEZvcm1zKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHByb2plY3RGb3Jtcy5tYXAoKGZvcm0pID0+ICh7XHJcbiAgICAgICAgICAuLi5mb3JtLFxyXG4gICAgICAgICAgcHJvamVjdE5hbWU6IHByb2plY3QucHJvamVjdE5hbWUsXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9KSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1zLmZsYXQoKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm1zIHdpdGggY2xpZW50OlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZm9ybXMgZm9yIHRoZSBjbGllbnQuXCIpO1xyXG4gIH1cclxufVxyXG5cclxuLypHZXRGb3Jtc1dpdGhDbGllbnQoXCIxYWQ3NGJjZS1iZDlkLTQxMzEtODNlZi1lZmZlY2JhNzRjN2RcIilcclxuLnRoZW4oKGZvcm1zKSA9PiBjb25zb2xlLmxvZyhcIkZvcm1zOlwiLCBmb3JtcykpXHJcbi5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpKTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1zSW5mb3JtYXRpb24oKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZXJyb3JzOiBjbGllbnRFcnJvcnMsIGRhdGE6IGNsaWVudHNEYXRhIH0gPVxyXG4gICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5saXN0KCk7XHJcblxyXG4gICAgaWYgKGNsaWVudEVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGNsaWVudEVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBmb3Jtcy5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHJlc3VsdHMgPSBbXTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGNsaWVudEl0ZW0gb2YgY2xpZW50c0RhdGEpIHtcclxuICAgICAgY29uc3QgeyBlcnJvcnM6IHByb2plY3RFcnJvcnMsIGRhdGE6IHByb2plY3RzRGF0YSB9ID1cclxuICAgICAgICBhd2FpdCBjbGllbnQubW9kZWxzLlByb2plY3R0Lmxpc3Qoe1xyXG4gICAgICAgICAgZmlsdGVyOiB7IENsaWVudElEOiB7IGVxOiBjbGllbnRJdGVtLmlkIH0gfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChwcm9qZWN0RXJyb3JzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBwcm9qZWN0RXJyb3JzKTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9qZWN0c1wiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChjb25zdCBwcm9qZWN0SXRlbSBvZiBwcm9qZWN0c0RhdGEpIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGBGZXRjaGluZyBmb3JtcyBmb3IgcHJvamVjdDogJHtwcm9qZWN0SXRlbS5wcm9qZWN0TmFtZX0sIElEOiAke3Byb2plY3RJdGVtLnByb2plY3RJRH1gKTtcclxuXHJcbiAgICAgICAgY29uc3QgeyBlcnJvcnM6IGZvcm1FcnJvcnMsIGRhdGE6IGZvcm1zRGF0YSB9ID1cclxuICAgICAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgICAgICAgICAgZmlsdGVyOiB7IHByb2pJRDogeyBlcTogcHJvamVjdEl0ZW0ucHJvamVjdElEIH0gfSwgLy8gRW5zdXJlIHRoZSBjb3JyZWN0IGtleSBpcyB1c2VkXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGZvcm1FcnJvcnMpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZm9ybUVycm9ycyk7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3Jtc1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICBjbGllbnROYW1lOiBjbGllbnRJdGVtLkNsaWVudE5hbWUsXHJcbiAgICAgICAgICBwcm9qZWN0TmFtZTogcHJvamVjdEl0ZW0ucHJvamVjdE5hbWUsXHJcbiAgICAgICAgICBwcm9qZWN0SUQ6IHByb2plY3RJdGVtLnByb2plY3RJRCxcclxuICAgICAgICAgIGZvcm1zOiBmb3Jtc0RhdGEubWFwKChmb3JtKSA9PiAoe1xyXG4gICAgICAgICAgICBpZDogZm9ybS5pZCxcclxuICAgICAgICAgICAgbmFtZTogZm9ybS5uYW1lLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZm9ybS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgcHVibGlzaGVkOiBmb3JtLnB1Ymxpc2hlZCxcclxuICAgICAgICAgICAgY29udGVudDogZm9ybS5jb250ZW50LFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IGZvcm0uY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICB2aXNpdHM6IGZvcm0udmlzaXRzLFxyXG4gICAgICAgICAgICBzdWJtaXNzaW9uczogZm9ybS5zdWJtaXNzaW9ucyxcclxuICAgICAgICAgIH0pKSxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9jb25zb2xlLmxvZyhcIlJlc3VsdHM6XCIsIHJlc3VsdHMpO1xyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvclwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qY29uc3QgZm9ybXNJbmZvID0gYXdhaXQgR2V0Rm9ybXNJbmZvcm1hdGlvbigpXHJcbmNvbnNvbGUubG9nKCdGb3JtIEluZm86JywgZm9ybXNJbmZvKTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldFByb2plY3RzRnJvbUNsaWVudE5hbWUoQ2xpZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIENsaWVudCBiYXNlZCBvbiBDbGllbnROYW1lXHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YTogY2xpZW50RGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQubGlzdCh7XHJcbiAgICAgIGZpbHRlcjogeyBDbGllbnROYW1lOiB7IGVxOiBDbGllbnROYW1lIH0gfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMgfHwgY2xpZW50RGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNsaWVudCBvciBjbGllbnQgbm90IGZvdW5kOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDbGllbnQgbm90IGZvdW5kLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBc3N1bWluZyBlYWNoIGNsaWVudCBoYXMgYW4gYXJyYXkgb2YgcHJvamVjdHNcclxuICAgIGNvbnN0IENsaWVudHMgPSBjbGllbnREYXRhWzBdOyAvLyBBc3N1bWluZyB0aGUgZmlyc3QgY2xpZW50IGluIHRoZSBsaXN0IGlzIHRoZSBvbmUgd2UncmUgaW50ZXJlc3RlZCBpblxyXG4gICAgY29uc3QgeyBkYXRhOiBwcm9qZWN0cywgZXJyb3JzOiBwcm9qZWN0RXJyb3JzIH0gPVxyXG4gICAgICBhd2FpdCBjbGllbnQubW9kZWxzLlByb2plY3R0Lmxpc3Qoe1xyXG4gICAgICAgIGZpbHRlcjogeyBDbGllbnRJRDogeyBlcTogQ2xpZW50cy5pZCB9IH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGlmIChwcm9qZWN0RXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9qZWN0czpcIiwgcHJvamVjdEVycm9ycyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwcm9qZWN0TmFtZXMgPSBwcm9qZWN0cy5tYXAoKHByb2plY3QpID0+IHByb2plY3QucHJvamVjdE5hbWUpO1xyXG4gICAgLy8gUmV0dXJuIGNsaWVudCBhbmQgYXNzb2NpYXRlZCBwcm9qZWN0c1xyXG4gICAgcmV0dXJuIHsgcHJvamVjdE5hbWVzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gQ3JlYXRlRm9ybShcclxuICBuYW1lOiBzdHJpbmcsXHJcbiAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICBwcm9qZWN0TmFtZTogc3RyaW5nLFxyXG4pIHtcclxuICAvLyBGZXRjaCB0aGUgcHJvamVjdCBkZXRhaWxzIHVzaW5nIHByb2plY3ROYW1lXHJcbiAgY29uc3QgeyBlcnJvcnM6IHByb2plY3RFcnJvcnMsIGRhdGE6IHByb2plY3RzRGF0YSB9ID1cclxuICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgIGZpbHRlcjogeyBwcm9qZWN0TmFtZTogeyBlcTogcHJvamVjdE5hbWUgfSB9LFxyXG4gICAgfSk7XHJcblxyXG4gIGlmIChwcm9qZWN0RXJyb3JzKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvamVjdHM6XCIsIHByb2plY3RFcnJvcnMpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHByb2plY3RzLlwiKTtcclxuICB9XHJcblxyXG4gIGlmIChwcm9qZWN0c0RhdGEubGVuZ3RoID09PSAwKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFByb2plY3Qgd2l0aCBuYW1lIFwiJHtwcm9qZWN0TmFtZX1cIiBub3QgZm91bmQuYCk7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgdGhlIGZpcnN0IG1hdGNoaW5nIHByb2plY3QncyBJRFxyXG4gIGNvbnN0IHByb2pJRCA9IHByb2plY3RzRGF0YVswXS5wcm9qZWN0SUQ7XHJcblxyXG4gIC8vIE5vdyBjcmVhdGUgdGhlIGZvcm0gdXNpbmcgcHJvaklEXHJcbiAgY29uc3QgeyBlcnJvcnM6IGZvcm1lcnJvcnMsIGRhdGE6IGZvcm0gfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5jcmVhdGUoe1xyXG4gICAgcHJvaklEOiBwcm9qSUQsXHJcbiAgICBuYW1lOiBuYW1lLFxyXG4gICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxyXG4gIH0pO1xyXG5cclxuICBpZiAoZm9ybWVycm9ycykge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIGZvcm06XCIsIGZvcm1lcnJvcnMpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgY3JlYXRpbmcgdGhlIGZvcm1cIik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZm9ybUlkOiBmb3JtPy5pZCxcclxuICAgIHByb2pJRDogcHJvaklELFxyXG4gIH07XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3QgcnVuRm9ybSA9IGFzeW5jIChcclxuICBmb3JtVXJsOnN0cmluZyxcclxuICBFcXVpcE5hbWU6IHN0cmluZyxcclxuICBFcXVpcFRhZzogc3RyaW5nLFxyXG4pOiBQcm9taXNlPHtcclxuICBzdWNjZXNzOiBib29sZWFuO1xyXG4gIGNyZWF0ZWRUYWdJRD86IHN0cmluZztcclxuICB0YWdDcmVhdGVkQXQ/OiBzdHJpbmc7XHJcbn0+ID0+IHtcclxuICAvL2NvbnNvbGUubG9nKFwicnVuRm9ybSBjYWxsZWQgd2l0aDpcIiwgZm9ybVVybCwgRXF1aXBOYW1lLCBFcXVpcFRhZyk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZvcm1SZXNwID0gYXdhaXQgR2V0Rm9ybUNvbnRlbnRCeVVybChmb3JtVXJsKTtcclxuICAgIFxyXG4gICAgaWYgKCFmb3JtUmVzcCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRm9ybSBub3QgZm91bmQgd2l0aCB0aGUgcHJvdmlkZWQgVGVzdE5hbWUgYW5kIFByb2plY3RJRFwiKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtID0gZm9ybVJlc3A7XHJcblxyXG4gICAgY29uc3QgZXhpc3RpbmdUYWdSZXNwID0gYXdhaXQgY2xpZW50Lm1vZGVscy5FcXVpcG1lbnRUYWcyLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHtcclxuICAgICAgICBUYWc6IHsgZXE6IEVxdWlwVGFnIH0sXHJcbiAgICAgICAgRXF1aXBtZW50TmFtZTogeyBlcTogRXF1aXBOYW1lIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBleGlzdGluZ1RhZyA9IGV4aXN0aW5nVGFnUmVzcC5kYXRhPy5bMF07XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nVGFnKSB7XHJcbiAgICAgIGNvbnN0IGxpbmtlZEZvcm1SZXNwID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHtcclxuICAgICAgICAgIHRhZ0lEOiB7IGVxOiBleGlzdGluZ1RhZy5pZCB9LFxyXG4gICAgICAgICAgZm9ybUlEOiB7IGVxOiBmb3JtLmlkIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAobGlua2VkRm9ybVJlc3AuZGF0YT8ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICBcIlRoaXMgZXF1aXBtZW50IGFuZCB0YWcgYXJlIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZm9ybSBhbmQgcHJvamVjdC5cIixcclxuICAgICAgICApO1xyXG4gICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgXCJFcnJvcjogVGhpcyBlcXVpcG1lbnQgYW5kIHRhZyBhcmUgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggdGhpcyBmb3JtIGFuZCBwcm9qZWN0LlwiLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBjcmVhdGVSZXNwID0gbnVsbDtcclxuICAgIGxldCBjcmVhdGVkVGFnSUQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuICAgIGxldCB0YWdDcmVhdGVkQXQ6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBpZiAoIWV4aXN0aW5nVGFnKSB7XHJcbiAgICAgIGNyZWF0ZVJlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkVxdWlwbWVudFRhZzIuY3JlYXRlKHtcclxuICAgICAgICBUYWc6IEVxdWlwVGFnLFxyXG4gICAgICAgIEVxdWlwbWVudE5hbWU6IEVxdWlwTmFtZSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIWNyZWF0ZVJlc3AuZGF0YSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIEVxdWlwbWVudFRhZ1wiKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjcmVhdGVkVGFnSUQgPSBjcmVhdGVSZXNwLmRhdGEuaWQ7XHJcbiAgICAgIHRhZ0NyZWF0ZWRBdCA9IG5ldyBEYXRlKGNyZWF0ZVJlc3AuZGF0YS5jcmVhdGVkQXQpXHJcbiAgICAgICAgLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAuc3BsaXQoXCJUXCIpWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm1UYWdSZXNwID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5jcmVhdGUoe1xyXG4gICAgICBmb3JtSUQ6IGZvcm0uaWQsXHJcbiAgICAgIHRhZ0lEOiBleGlzdGluZ1RhZyA/IGV4aXN0aW5nVGFnLmlkIDogY3JlYXRlZFRhZ0lELFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCFmb3JtVGFnUmVzcC5kYXRhKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIEZvcm1UYWdcIik7XHJcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgY3JlYXRlZFRhZ0lELCB0YWdDcmVhdGVkQXQgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGV4ZWN1dGluZyBydW5Gb3JtOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEZldGNoIGZvcm1JZCBieSBUZXN0TmFtZSBhbmQgUHJvamVjdElEXHJcbmNvbnN0IGZldGNoRm9ybUJ5TmFtZUFuZFByb2plY3QgPSBhc3luYyAoXHJcbiAgVGVzdE5hbWU6IHN0cmluZyxcclxuICBQcm9qZWN0SUQ6IHN0cmluZyxcclxuKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIC8vY29uc29sZS5sb2coXCJGZXRjaGluZyBmb3JtIHdpdGggVGVzdE5hbWU6XCIsIFRlc3ROYW1lLCBcImFuZCBQcm9qZWN0SUQ6XCIsIFByb2plY3RJRCk7XHJcbiAgICBjb25zdCBmb3JtUmVzcCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgbmFtZTogeyBlcTogVGVzdE5hbWUgfSxcclxuICAgICAgICBwcm9qSUQ6IHsgZXE6IFByb2plY3RJRCB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy9jb25zb2xlLmxvZyhcIkZvcm0gZmV0Y2ggcmVzcG9uc2U6XCIsIGZvcm1SZXNwKTtcclxuXHJcbiAgICAvLyBJZiBmb3JtIGV4aXN0cywgcmV0dXJuIHRoZSBmaXJzdCByZXN1bHRcclxuICAgIHJldHVybiBmb3JtUmVzcC5kYXRhPy5bMF07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG4vKmF3YWl0IHJ1bkZvcm0oXCJUZXN0IG5hbWUgMVwiLCBcIkhFMTAxUDAwMVwiLCBcIkNvbXByZXNzb3IgWFwiLCBcIlRBRy0wMDFcIilcclxuLnRoZW4oKG5ld0VxdWlwbWVudFRhZykgPT4gY29uc29sZS5sb2coXCJDcmVhdGVkIEZvcm1UYWc6XCIsIG5ld0VxdWlwbWVudFRhZykpXHJcbi5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpKTsgLy8gSGFuZGxlIGFueSBlcnJvcnMgKi9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3Jtc0J5Q2xpZW50TmFtZShDbGllbnROYW1lOiBzdHJpbmcpIHtcclxuICAvLyAxLiBGZXRjaCB0aGUgQ2xpZW50IElEXHJcbiAgY29uc3QgY2xpZW50UmVzdWx0ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQubGlzdCh7XHJcbiAgICBmaWx0ZXI6IHsgQ2xpZW50TmFtZTogeyBlcTogQ2xpZW50TmFtZSB9IH0sXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGNsaWVudERhdGEgPSBjbGllbnRSZXN1bHQuZGF0YT8uWzBdO1xyXG4gIGlmICghY2xpZW50RGF0YSkgcmV0dXJuIFtdO1xyXG5cclxuICBjb25zdCBjbGllbnRJRCA9IGNsaWVudERhdGEuaWQ7XHJcblxyXG4gIC8vIDIuIEZldGNoIGFsbCBQcm9qZWN0cyB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIENsaWVudElEXHJcbiAgY29uc3QgcHJvamVjdHNSZXN1bHQgPSBhd2FpdCBjbGllbnQubW9kZWxzLlByb2plY3R0Lmxpc3Qoe1xyXG4gICAgZmlsdGVyOiB7IENsaWVudElEOiB7IGVxOiBjbGllbnRJRCB9IH0sXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHByb2plY3RzID0gcHJvamVjdHNSZXN1bHQuZGF0YTtcclxuICBpZiAoIXByb2plY3RzLmxlbmd0aCkgcmV0dXJuIFtdO1xyXG5cclxuICBjb25zdCBwcm9qZWN0SURzID0gcHJvamVjdHMubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3RJRCk7XHJcblxyXG4gIC8vIDMuIEZldGNoIGFsbCBGb3JtcyBmb3IgdGhlIGZvdW5kIHByb2plY3RzXHJcbiAgY29uc3QgYWxsRm9ybXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgIHByb2plY3RJRHMubWFwKGFzeW5jIChwcm9qZWN0SUQpID0+IHtcclxuICAgICAgY29uc3QgZm9ybXNSZXN1bHQgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IHByb2pJRDogeyBlcTogcHJvamVjdElEIH0gfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBjb25zdCBmb3JtcyA9IGZvcm1zUmVzdWx0LmRhdGE7XHJcbiAgICAgIGNvbnN0IGZvcm1JRHMgPSBmb3Jtcy5tYXAoKGZvcm0pID0+IGZvcm0uaWQpO1xyXG5cclxuICAgICAgY29uc3QgZm9ybURldGFpbHNXaXRoRXF1aXBtZW50ID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgZm9ybUlEcy5tYXAoYXN5bmMgKGZvcm1JZCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBmb3JtVGFncywgZXJyb3JzOiBmb3JtVGFnc0Vycm9ycyB9ID1cclxuICAgICAgICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgICAgICAgICBmaWx0ZXI6IHsgZm9ybUlEOiB7IGVxOiBmb3JtSWQgfSB9LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoZm9ybVRhZ3NFcnJvcnMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgICAgICBgRXJyb3IgZmV0Y2hpbmcgZm9ybSB0YWdzIGZvciBmb3JtIElEICR7Zm9ybUlkfTpgLFxyXG4gICAgICAgICAgICAgIGZvcm1UYWdzRXJyb3JzLFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCB0YWdJRHMgPSBmb3JtVGFncy5tYXAoKHRhZykgPT4gdGFnLnRhZ0lEKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBlcXVpcG1lbnRBbmRUYWdzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgICAgICAgIHRhZ0lEcy5tYXAoYXN5bmMgKHRhZ0lEKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBlcXVpcG1lbnREYXRhLCBlcnJvcnM6IGVxdWlwbWVudEVycm9ycyB9ID1cclxuICAgICAgICAgICAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5saXN0KHtcclxuICAgICAgICAgICAgICAgICAgZmlsdGVyOiB0YWdJRCA/IHsgaWQ6IHsgZXE6IHRhZ0lEIH0gfSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoZXF1aXBtZW50RXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICAgICAgICBgRXJyb3IgZmV0Y2hpbmcgZXF1aXBtZW50IGZvciB0YWdJRCAke3RhZ0lEfTpgLFxyXG4gICAgICAgICAgICAgICAgICBlcXVpcG1lbnRFcnJvcnMsXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gZXF1aXBtZW50RGF0YS5tYXAoKGVxdWlwbWVudCkgPT4gKHtcclxuICAgICAgICAgICAgICAgIGVxdWlwbWVudE5hbWU6IGVxdWlwbWVudC5FcXVpcG1lbnROYW1lLFxyXG4gICAgICAgICAgICAgICAgZXF1aXBtZW50VGFnOiBlcXVpcG1lbnQuVGFnLFxyXG4gICAgICAgICAgICAgICAgdGFnQ3JlYXRlZEF0OiBuZXcgRGF0ZShlcXVpcG1lbnQuY3JlYXRlZEF0KVxyXG4gICAgICAgICAgICAgICAgICAudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAuc3BsaXQoXCJUXCIpWzBdLCAvLyA8LS0gQWRpY2lvbmFkbyBhcXVpXHJcbiAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBmb3Jtcy5maW5kKChmb3JtKSA9PiBmb3JtLmlkID09PSBmb3JtSWQpO1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY2xpZW50TmFtZTogY2xpZW50RGF0YS5DbGllbnROYW1lLFxyXG4gICAgICAgICAgICBwcm9qZWN0TmFtZTogcHJvamVjdHMuZmluZChcclxuICAgICAgICAgICAgICAocHJvamVjdCkgPT4gcHJvamVjdC5wcm9qZWN0SUQgPT09IHByb2plY3RJRCxcclxuICAgICAgICAgICAgKT8ucHJvamVjdE5hbWUsXHJcbiAgICAgICAgICAgIHByb2plY3RJRCxcclxuICAgICAgICAgICAgZm9ybU5hbWU6IGZvcm1EYXRhPy5uYW1lLFxyXG4gICAgICAgICAgICBlcXVpcG1lbnQ6IGVxdWlwbWVudEFuZFRhZ3MuZmxhdCgpLFxyXG4gICAgICAgICAgICBzdWJtaXNzaW9uOiBmb3JtRGF0YT8uc3VibWlzc2lvbnMgfHwgMCxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGZvcm1EYXRhPy5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgZm9ybUlkOiBmb3JtSWQsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0pLFxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm1EZXRhaWxzV2l0aEVxdWlwbWVudC5maWx0ZXIoKGRldGFpbCkgPT4gZGV0YWlsICE9PSBudWxsKTtcclxuICAgIH0pLFxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGZsYXR0ZW5lZEZvcm1zID0gYWxsRm9ybXMuZmxhdCgpO1xyXG5cclxuICByZXR1cm4gZmxhdHRlbmVkRm9ybXMubWFwKChmb3JtRGV0YWlsKSA9PiAoe1xyXG4gICAgY2xpZW50TmFtZTogZm9ybURldGFpbC5jbGllbnROYW1lLFxyXG4gICAgcHJvamVjdE5hbWU6IGZvcm1EZXRhaWwucHJvamVjdE5hbWUsXHJcbiAgICBwcm9qZWN0SUQ6IGZvcm1EZXRhaWwucHJvamVjdElELFxyXG4gICAgZm9ybUlEOiBmb3JtRGV0YWlsLmZvcm1JZCxcclxuICAgIGZvcm1OYW1lOiBmb3JtRGV0YWlsLmZvcm1OYW1lLFxyXG4gICAgZGVzY3JpcHRpb246IGZvcm1EZXRhaWwuZGVzY3JpcHRpb24sXHJcbiAgICBlcXVpcG1lbnREZXRhaWxzOiBmb3JtRGV0YWlsLmVxdWlwbWVudC5tYXAoKGVxdWlwbWVudCkgPT4gKHtcclxuICAgICAgZXF1aXBtZW50TmFtZTogZXF1aXBtZW50Py5lcXVpcG1lbnROYW1lIHx8IFwiVW5rbm93blwiLFxyXG4gICAgICBlcXVpcG1lbnRUYWc6IGVxdWlwbWVudD8uZXF1aXBtZW50VGFnIHx8IFwiVW5rbm93blwiLFxyXG4gICAgICB0YWdDcmVhdGVkQXQ6IGVxdWlwbWVudD8udGFnQ3JlYXRlZEF0IHx8IFwiVW5rbm93blwiLCAvLyA8LS0gQWRpY2lvbmFkbyBhcXVpIHRhbWLDqW1cclxuICAgIH0pKSxcclxuICAgIHN1Ym1pc3Npb246IGZvcm1EZXRhaWwuc3VibWlzc2lvbixcclxuICB9KSk7XHJcbn1cclxuXHJcbi8qYXdhaXQgR2V0Rm9ybXNCeUNsaWVudE5hbWUoXCJSaW8gVGludG9cIilcclxuICAudGhlbigoZmxhdHRlbmVkRm9ybXMpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwi4pyFIEZvcm1zIGZyb20gY2xpZW50OlwiLCBmbGF0dGVuZWRGb3Jtcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGZldGNoaW5nIGZvcm1zOlwiLCBlcnJvcik7XHJcbiAgfSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBTYXZlRm9ybUFmdGVyVGVzdChcclxuICBGb3JtSUQ6IHN0cmluZyxcclxuICBUYWdJRDogc3RyaW5nLFxyXG4gIGNvbnRlbnQ6IHN0cmluZyxcclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybVRhZ3MsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgZm9ybUlEOiB7IGVxOiBGb3JtSUQgfSxcclxuICAgICAgICB0YWdJRDogeyBlcTogVGFnSUQgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybVRhZ1RvVXBkYXRlID0gZm9ybVRhZ3NbMF07XHJcblxyXG4gICAgaWYgKCFmb3JtVGFnVG9VcGRhdGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk5vdGhpbmcgZm91bmQgZm9yIHRoaXMgZm9ybUlEIGFuZCB0YWdJRFwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLnVwZGF0ZSh7XHJcbiAgICAgIGlkOiBmb3JtVGFnVG9VcGRhdGUuaWQsXHJcbiAgICAgIGNvbnRlbnRUZXN0OiBjb250ZW50LFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJVcGRhdGVkOlwiLCB1cGRhdGVkKTtcclxuICAgIHJldHVybiB1cGRhdGVkO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIFNhdmVGb3JtQWZ0ZXJUZXN0OlwiLCBlcnIpO1xyXG4gIH1cclxufVxyXG5cclxuLyogIFNhdmVGb3JtQWZ0ZXJUZXN0KFwiOTZhMzRjYTAtMDNhMi00Zjc5LTg4NTMtNDk1ZTdlYTNkMDYwXCIsIFwiNDBkZjU5ODEtZThkMC00NWUxLWI4ZjQtOTkyMmY1Y2NjZTUyXCIsIFwiVGVzdCBjb250ZW50XCIpXHJcbi50aGVuKCh1cGRhdGVkRm9ybSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiRm9ybSB1cGRhdGVkIHN1Y2Nlc3NmdWxseTpcIiwgdXBkYXRlZEZvcm0pO1xyXG59KVxyXG4uY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGZvcm06XCIsIGVycm9yKTtcclxufSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb250ZW50QnlGb3JtSURhbmRUYWdJRChcclxuICBGb3JtSUQ6IHN0cmluZyxcclxuICBUYWdJRDogc3RyaW5nLFxyXG4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtVGFncywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHtcclxuICAgICAgICBmb3JtSUQ6IHsgZXE6IEZvcm1JRCB9LFxyXG4gICAgICAgIHRhZ0lEOiB7IGVxOiBUYWdJRCB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9ycyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtVGFnID0gZm9ybVRhZ3NbMF07XHJcblxyXG4gICAgaWYgKCFmb3JtVGFnKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJOb3RoaW5nIGZvdW5kIGZvciB0aGlzIGZvcm1JRCBhbmQgdGFnSURcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb250ZW50ID0gZm9ybVRhZy5jb250ZW50VGVzdDtcclxuXHJcbiAgICAvL2NvbnNvbGUubG9nKFwiRmV0Y2hlZCBjb250ZW50OlwiLCBjb250ZW50KTtcclxuICAgIHJldHVybiBjb250ZW50O1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldENvbnRlbnRCeUZvcm1JRGFuZFRhZ0lEOlwiLCBlcnIpO1xyXG4gIH1cclxufVxyXG5cclxuLypnZXRDb250ZW50QnlGb3JtSURhbmRUYWdJRChcIjJlMDY5ZGZhLTNlNmQtNDJkMi1iZTA2LTU0NGI1YWE5OWI0MFwiLCBcIjkzOTk5MzVhLTU5ZWEtNDEzZi04MzAzLTQxYjhmYzRmOTdiN1wiKVxyXG4udGhlbigodXBkYXRlZEZvcm0pID0+IHtcclxuICBjb25zb2xlLmxvZyhcIkZvcm0gdXBkYXRlZCBzdWNjZXNzZnVsbHk6XCIsIHVwZGF0ZWRGb3JtKTtcclxufSlcclxuLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBmb3JtOlwiLCBlcnJvcik7XHJcbn0pOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RXF1aXBtZW50VGFnSUQoXHJcbiAgZXF1aXBtZW50TmFtZTogc3RyaW5nLFxyXG4gIGVxdWlwbWVudFRhZzogc3RyaW5nLFxyXG4pIHtcclxuICB0cnkge1xyXG4gICAgLy8gUXVlcnkgdG8gZmV0Y2ggZXF1aXBtZW50IGJ5IGl0cyBuYW1lIGFuZCB0YWdcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkVxdWlwbWVudFRhZzIubGlzdCh7XHJcbiAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgIEVxdWlwbWVudE5hbWU6IHsgZXE6IGVxdWlwbWVudE5hbWUgfSxcclxuICAgICAgICBUYWc6IHsgZXE6IGVxdWlwbWVudFRhZyB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIGVycm9yc1xyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZXF1aXBtZW50IHRhZzpcIiwgZXJyb3JzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrIGlmIGRhdGEgZXhpc3RzXHJcbiAgICBjb25zdCBlcXVpcG1lbnRUYWdEYXRhID0gZGF0YVswXTsgLy8gQXNzdW1pbmcgdGhlIGZpcnN0IGVudHJ5IG1hdGNoZXMgdGhlIHNlYXJjaFxyXG4gICAgaWYgKCFlcXVpcG1lbnRUYWdEYXRhKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBtYXRjaGluZyBlcXVpcG1lbnQgZm91bmQgZm9yIGdpdmVuIG5hbWUgYW5kIHRhZy5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIGVxdWlwbWVudFRhZ0lEXHJcbiAgICByZXR1cm4gZXF1aXBtZW50VGFnRGF0YS5pZDsgLy8gQXNzdW1pbmcgYGlkYCBpcyB0aGUgZXF1aXBtZW50VGFnSURcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZXRFcXVpcG1lbnRUYWdJRDpcIiwgZXJyKTtcclxuICB9XHJcbn1cclxuXHJcbi8qZ2V0RXF1aXBtZW50VGFnSUQoXCJFcXVpcDFcIiwgXCJUYWcxXCIpXHJcbi50aGVuKCh1cGRhdGVkRm9ybSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiRXF1aXAgVEFHIElEOlwiLCB1cGRhdGVkRm9ybSk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgZm9ybTpcIiwgZXJyb3IpO1xyXG59KTsqL1xyXG4iXSwibmFtZXMiOlsiR2V0Q2xpZW50cyIsIkdldFByb2plY3RzIiwiR2V0Rm9ybVN0YXRzIiwiR2V0Rm9ybXMiLCJHZXRGb3JtQnlJZCIsIlVwZGF0ZUZvcm1Db250ZW50Iiwic2F2ZUZvcm1BY3Rpb24iLCJQdWJsaXNoRm9ybSIsInB1Ymxpc2hGb3JtQWN0aW9uIiwiR2V0Rm9ybUNvbnRlbnRCeVVybCIsIlN1Ym1pdEZvcm0iLCJzdWJtaXRGb3JtQWN0aW9uIiwiR2V0Rm9ybVdpdGhTdWJtaXNzaW9ucyIsIkdldEZvcm1TdWJtaXNzaW9uQnlJZCIsIkdldEVxdWlwbWVudFRhZ3NGb3JGb3JtIiwiR2V0Q2xpZW50V2l0aFByb2plY3RzIiwiR2V0Rm9ybXNXaXRoQ2xpZW50IiwiR2V0Rm9ybXNJbmZvcm1hdGlvbiIsIkdldFByb2plY3RzRnJvbUNsaWVudE5hbWUiLCJDcmVhdGVGb3JtIiwicnVuRm9ybSIsIkdldEZvcm1zQnlDbGllbnROYW1lIiwiU2F2ZUZvcm1BZnRlclRlc3QiLCJnZXRDb250ZW50QnlGb3JtSURhbmRUYWdJRCIsImdldEVxdWlwbWVudFRhZ0lEIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./actions/form.tsx\n"));

/***/ })

});