"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(dashboard)/builder/[id]/page",{

/***/ "(app-pages-browser)/./actions/form.tsx":
/*!**************************!*\
  !*** ./actions/form.tsx ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CreateForm: () => (/* binding */ CreateForm),\n/* harmony export */   GetClientWithProjects: () => (/* binding */ GetClientWithProjects),\n/* harmony export */   GetClients: () => (/* binding */ GetClients),\n/* harmony export */   GetEquipmentTagsForForm: () => (/* binding */ GetEquipmentTagsForForm),\n/* harmony export */   GetFormById: () => (/* binding */ GetFormById),\n/* harmony export */   GetFormContentByUrl: () => (/* binding */ GetFormContentByUrl),\n/* harmony export */   GetFormStats: () => (/* binding */ GetFormStats),\n/* harmony export */   GetFormWithSubmissions: () => (/* binding */ GetFormWithSubmissions),\n/* harmony export */   GetForms: () => (/* binding */ GetForms),\n/* harmony export */   GetFormsByClientName: () => (/* binding */ GetFormsByClientName),\n/* harmony export */   GetFormsInformation: () => (/* binding */ GetFormsInformation),\n/* harmony export */   GetFormsWithClient: () => (/* binding */ GetFormsWithClient),\n/* harmony export */   GetProjects: () => (/* binding */ GetProjects),\n/* harmony export */   GetProjectsFromClientName: () => (/* binding */ GetProjectsFromClientName),\n/* harmony export */   GetSubmissionWithTagInfo: () => (/* binding */ GetSubmissionWithTagInfo),\n/* harmony export */   PublishForm: () => (/* binding */ PublishForm),\n/* harmony export */   SaveFormAfterTest: () => (/* binding */ SaveFormAfterTest),\n/* harmony export */   SubmitForm: () => (/* binding */ SubmitForm),\n/* harmony export */   UpdateFormContent: () => (/* binding */ UpdateFormContent),\n/* harmony export */   getContentByFormIDandTagID: () => (/* binding */ getContentByFormIDandTagID),\n/* harmony export */   getEquipmentTagID: () => (/* binding */ getEquipmentTagID),\n/* harmony export */   publishFormAction: () => (/* binding */ publishFormAction),\n/* harmony export */   runForm: () => (/* binding */ runForm),\n/* harmony export */   saveFormAction: () => (/* binding */ saveFormAction),\n/* harmony export */   submitFormAction: () => (/* binding */ submitFormAction)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\":\"GetClients\",\"0056b66f5e0bfda60da83a467cac83458903790355\":\"GetProjects\",\"005890e9ace11382590dfe256d18a985d80ef53664\":\"GetFormStats\",\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\":\"GetFormsInformation\",\"00ad1843f1c28ec580071c5c56699400132f7f9d12\":\"GetForms\",\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\":\"publishFormAction\",\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\":\"saveFormAction\",\"40226b3b5d44a7254f49759d036f24d7c23272d040\":\"GetFormById\",\"403145f8835472f5e7741c1a435bba5cc897cb941f\":\"GetFormContentByUrl\",\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\":\"GetEquipmentTagsForForm\",\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\":\"GetFormsWithClient\",\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\":\"submitFormAction\",\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\":\"GetProjectsFromClientName\",\"40c066748347b8b677aeb8f39299abc748f5c0f25e\":\"GetSubmissionWithTagInfo\",\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\":\"GetFormWithSubmissions\",\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\":\"GetFormsByClientName\",\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\":\"GetClientWithProjects\",\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\":\"getEquipmentTagID\",\"60922447ba3f326fdf23eac6584943278d55d45d32\":\"getContentByFormIDandTagID\",\"60cb494246e13d01c97932a238a3d4622a74f55852\":\"UpdateFormContent\",\"702a21f6cf4717559298ad70c1798c88ee23f93130\":\"SubmitForm\",\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\":\"CreateForm\",\"70512de972c6c1b3fffa11e6c3274976b337deee8b\":\"PublishForm\",\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\":\"SaveFormAfterTest\",\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\":\"runForm\"} */ \nvar GetClients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00369e8ec83ab1bd2124fd1278f96da57fcc983b0d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClients\");\nvar GetProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"0056b66f5e0bfda60da83a467cac83458903790355\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjects\");\nvar GetFormStats = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"005890e9ace11382590dfe256d18a985d80ef53664\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormStats\");\nvar GetForms = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00ad1843f1c28ec580071c5c56699400132f7f9d12\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetForms\");\nvar GetFormById = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40226b3b5d44a7254f49759d036f24d7c23272d040\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormById\");\nvar UpdateFormContent = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60cb494246e13d01c97932a238a3d4622a74f55852\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"UpdateFormContent\");\nvar saveFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"401ebe00f05c551128eb9d6c75ea1bdbba798b238a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"saveFormAction\");\nvar PublishForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70512de972c6c1b3fffa11e6c3274976b337deee8b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"PublishForm\");\nvar publishFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"400e3e5833031e9d07aca6f53303ca77d0d2e18145\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"publishFormAction\");\nvar GetFormContentByUrl = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403145f8835472f5e7741c1a435bba5cc897cb941f\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormContentByUrl\");\nvar SubmitForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"702a21f6cf4717559298ad70c1798c88ee23f93130\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SubmitForm\");\nvar submitFormAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"405c6f446a3b1abb852dc49ff1980b1db3e3f83630\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"submitFormAction\");\nvar GetFormWithSubmissions = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d850fd14e1b9f97007830d74533abd1b2b998c5a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormWithSubmissions\");\nvar GetSubmissionWithTagInfo = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40c066748347b8b677aeb8f39299abc748f5c0f25e\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetSubmissionWithTagInfo\");\nvar GetEquipmentTagsForForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403b90fa7a3d9fa11b4a930b74a54039aa3ad1cd8d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetEquipmentTagsForForm\");\nvar GetClientWithProjects = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ffc290e11218328d68e3f5866f1a8fb2cb77cddc\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetClientWithProjects\");\nvar GetFormsWithClient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"404a8fb6c649d11bc0a07b97e817ba79e1e78b43fb\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsWithClient\");\nvar GetFormsInformation = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"00a91fed0e98ab3125c1c8169ace482bdb26cc0548\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsInformation\");\nvar GetProjectsFromClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4068ecb9b942a6b5fed7a58d307434a4cd226cc865\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetProjectsFromClientName\");\nvar CreateForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7035ce3c6c8f8889bce5f235aaf672a24636cf064a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"CreateForm\");\nvar runForm = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"7f3d15c2293b367b25bd6fde2116c045b5dca5b542\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"runForm\");\nvar GetFormsByClientName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ed1a63a644cfd2d361fd292636b2fb466efe82b6\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"GetFormsByClientName\");\nvar SaveFormAfterTest = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70670f5b317aefa057bffee35f3ac0d5a67af0e014\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"SaveFormAfterTest\");\nvar getContentByFormIDandTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60922447ba3f326fdf23eac6584943278d55d45d32\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getContentByFormIDandTagID\");\nvar getEquipmentTagID = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6066c4603ae30a49e16a5a29faa271602a4f375e0c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getEquipmentTagID\");\n /*getEquipmentTagID(\"Equip1\", \"Tag1\")\r\n.then((updatedForm) => {\r\n  console.log(\"Equip TAG ID:\", updatedForm);\r\n})\r\n.catch((error) => {\r\n  console.error(\"Error updating form:\", error);\r\n});*/ \n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FjdGlvbnMvZm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXVJc0JBLDJCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUEwQ0FDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFxQkFDLDZCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFzQ0FDLHlCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFtQkFDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUE4REFDLGtDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFzQkFDLCtCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUEwQkFDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUF3QkFDLGtDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFRQUMsb0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXFDQUMsMkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdDQUMsaUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtCQUMsdUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZCQUMseUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQW1EQUMsd0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdEQUMsc0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQThCQUMsbUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZDQUMsb0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdFQUMsMENBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStCQUMsMkJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBDVEMsd0JBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtIU0MscUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXVIQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZDQUMsMkNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXlDQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtDQWlDdEI7Ozs7OztHQU1HIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGxkZWplc3VzLkhFUk9cXE9uZURyaXZlIC0gSGVybyBFbmdpbmVlcmluZ1xcRGVza3RvcFxcSGVyb0F1ZGl0QXBwMjAyNVxcSGVyb0F1ZGl0QXBwMjAyNVxcYWN0aW9uc1xcZm9ybS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XHJcblxyXG5pbXBvcnQgeyBBbXBsaWZ5IH0gZnJvbSBcImF3cy1hbXBsaWZ5XCI7XHJcbmltcG9ydCBvdXRwdXRzIGZyb20gXCIuLi9hbXBsaWZ5X291dHB1dHMuanNvblwiO1xyXG5pbXBvcnQgdHlwZSB7IFNjaGVtYSB9IGZyb20gXCIuLi9hbXBsaWZ5L2RhdGEvcmVzb3VyY2VcIjtcclxuaW1wb3J0IHsgZ2VuZXJhdGVDbGllbnQgfSBmcm9tIFwiYXdzLWFtcGxpZnkvZGF0YVwiO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlciB9IGZyb20gXCJhd3MtYW1wbGlmeS9hdXRoXCI7IC8vIEVuc3VyZSBnZXRDdXJyZW50VXNlciBpcyBpbXBvcnRlZCBjb3JyZWN0bHlcclxuLy8vaW1wb3J0IHsgdmkgfSBmcm9tIFwiZGF0ZS1mbnMvbG9jYWxlXCI7XHJcbi8vaW1wb3J0IHsgc3ViIH0gZnJvbSBcImRhdGUtZm5zXCI7XHJcbi8vaW1wb3J0IHsgc3RyaW5nIH0gZnJvbSAnem9kJztcclxuLy9pbXBvcnQgeyBmb3JtU2NoZW1hVHlwZSB9IGZyb20gXCIuLi9zY2hlbWFzL2Zvcm1cIjtcclxuXHJcbkFtcGxpZnkuY29uZmlndXJlKG91dHB1dHMpO1xyXG5cclxuY29uc3QgY2xpZW50ID0gZ2VuZXJhdGVDbGllbnQ8U2NoZW1hPigpO1xyXG5cclxuLy8gVXNlck5vdEZvdW5kRXJyIGNsYXNzIGZvciBjdXN0b20gZXJyb3IgaGFuZGxpbmdcclxuY2xhc3MgVXNlck5vdEZvdW5kRXJyIGV4dGVuZHMgRXJyb3Ige31cclxuXHJcbi8qZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEluc2VydENsaWVudChOYW1lQ2xpZW50OiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50LmNyZWF0ZSh7XHJcbiAgICAgIENsaWVudE5hbWU6IE5hbWVDbGllbnQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluc2VydCBjbGllbnQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybnMgdGhlIGluc2VydGVkIGNsaWVudCBkYXRhXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59Ki9cclxuLypJbnNlcnRDbGllbnQoXCJGb3J0ZXNjdWVcIilcclxuICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coXCJDbGllbnQ6XCIsIGRhdGEpKVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBjbGllbnQgd2l0aCBwcm9qZWN0czpcIiwgZXJyb3IpKTsqL1xyXG5cclxuLy8gRnVuY3Rpb24gdG8gaW5zZXJ0IGEgc2luZ2xlIHByb2plY3QgKHlvdSBtYXkgYWxyZWFkeSBoYXZlIHNvbWV0aGluZyBsaWtlIHRoaXMpXHJcbi8qZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEluc2VydFByb2plY3QobmFtZTogc3RyaW5nLCBwcm9qTnVtOiBzdHJpbmcsIGNsaWVudElEOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQuY3JlYXRlKHtcclxuICAgICAgcHJvamVjdElEOiBwcm9qTnVtLFxyXG4gICAgICBwcm9qZWN0TmFtZTogbmFtZSxcclxuICAgICAgQ2xpZW50SUQ6IGNsaWVudElEXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluc2VydCBjbGllbnQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybnMgdGhlIGluc2VydGVkIGNsaWVudCBkYXRhXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59Ki9cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGluc2VydCBtdWx0aXBsZSBwcm9qZWN0c1xyXG4vKmV4cG9ydCBhc3luYyBmdW5jdGlvbiBJbnNlcnRNdWx0aXBsZVByb2plY3RzKG5hbWVzOiBzdHJpbmdbXSwgcHJvak51bTogc3RyaW5nW10sIGNsaWVudElEczogc3RyaW5nW10pIHtcclxuICBjb25zdCBpbnNlcnRlZFByb2plY3RzOiBhbnlbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBzdWNjZXNzZnVsbHkgaW5zZXJ0ZWQgcHJvamVjdHNcclxuICBjb25zdCBmYWlsZWRQcm9qZWN0czogc3RyaW5nW10gPSBbXTsgLy8gQXJyYXkgdG8gc3RvcmUgcHJvamVjdCBuYW1lcyB0aGF0IGZhaWxlZCB0byBpbnNlcnRcclxuXHJcbiAgLy8gRW5zdXJlIHRoYXQgaW5wdXQgYXJyYXlzIGhhdmUgdGhlIHNhbWUgbGVuZ3RoXHJcbiAgaWYgKG5hbWVzLmxlbmd0aCAhPT0gcHJvak51bS5sZW5ndGggfHwgcHJvak51bS5sZW5ndGggIT09IGNsaWVudElEcy5sZW5ndGgpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIklucHV0IGFycmF5cyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoLlwiKTtcclxuICB9XHJcblxyXG4gIC8vIExvb3AgdGhyb3VnaCB0aGUgYXJyYXlzIGFuZCBpbnNlcnQgcHJvamVjdHMgb25lIGJ5IG9uZVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IG5hbWUgPSBuYW1lc1tpXTtcclxuICAgIGNvbnN0IHByb2plY3ROdW1iZXIgPSBwcm9qTnVtW2ldO1xyXG4gICAgY29uc3QgY2xpZW50SUQgPSBjbGllbnRJRHNbaV07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcHJvamVjdERhdGEgPSBhd2FpdCBJbnNlcnRQcm9qZWN0KG5hbWUsIHByb2plY3ROdW1iZXIsIGNsaWVudElEKTsgLy8gQ2FsbCB0byBpbnNlcnQgYSBzaW5nbGUgcHJvamVjdFxyXG4gICAgICBpbnNlcnRlZFByb2plY3RzLnB1c2gocHJvamVjdERhdGEpOyAvLyBTdG9yZSB0aGUgc3VjY2Vzc2Z1bCBpbnNlcnQgcmVzdWx0XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gaW5zZXJ0IHByb2plY3Q6ICR7bmFtZX1gLCBlcnJvcik7XHJcbiAgICAgIGZhaWxlZFByb2plY3RzLnB1c2gobmFtZSk7IC8vIFN0b3JlIHRoZSBmYWlsZWQgcHJvamVjdCBuYW1lXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHM6IHN1Y2Nlc3NmdWwgaW5zZXJ0aW9ucyBhbmQgZmFpbGVkIG9uZXNcclxuICByZXR1cm4ge1xyXG4gICAgaW5zZXJ0ZWRQcm9qZWN0cyxcclxuICAgIGZhaWxlZFByb2plY3RzLFxyXG4gIH07XHJcbn0qL1xyXG5cclxuLypleHBvcnQgYXN5bmMgZnVuY3Rpb24gSW5zZXJ0TXVsdGlwbGVDbGllbnRzKG5hbWVzOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IGluc2VydGVkQ2xpZW50czogYW55W10gPSBbXTsgLy8gQXJyYXkgdG8gc3RvcmUgc3VjY2Vzc2Z1bGx5IGluc2VydGVkIGNsaWVudHNcclxuICBjb25zdCBmYWlsZWRDbGllbnRzOiBzdHJpbmdbXSA9IFtdOyAvLyBBcnJheSB0byBzdG9yZSBjbGllbnQgbmFtZXMgdGhhdCBmYWlsZWQgdG8gaW5zZXJ0XHJcblxyXG4gIGZvciAobGV0IG5hbWUgb2YgbmFtZXMpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsaWVudERhdGEgPSBhd2FpdCBJbnNlcnRDbGllbnQobmFtZSk7IC8vIENhbGwgdGhlIHNpbmdsZSBjbGllbnQgaW5zZXJ0IGZ1bmN0aW9uXHJcbiAgICAgIGluc2VydGVkQ2xpZW50cy5wdXNoKGNsaWVudERhdGEpOyAvLyBTdG9yZSB0aGUgc3VjY2Vzc2Z1bCBpbnNlcnQgcmVzdWx0XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gaW5zZXJ0IGNsaWVudDogJHtuYW1lfWAsIGVycm9yKTtcclxuICAgICAgZmFpbGVkQ2xpZW50cy5wdXNoKG5hbWUpOyAvLyBTdG9yZSB0aGUgZmFpbGVkIGNsaWVudCBuYW1lXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHNcclxuICByZXR1cm4ge1xyXG4gICAgaW5zZXJ0ZWRDbGllbnRzLFxyXG4gICAgZmFpbGVkQ2xpZW50cyxcclxuICB9O1xyXG59Ki9cclxuXHJcbi8qY29uc3QgY2xpZW50cyA9IGF3YWl0IEdldENsaWVudHMoKTsqL1xyXG5cclxuLypjb25zdCBjSUQgPSBjbGllbnRzLmNsaWVudElEcztcclxuY29uc29sZS5sb2coY0lEKTtcclxuY29uc3QgcHJvamVjdHMgPSBbXCJwcm9qZWN0MVwiLCBcInByb2plY3QyXCIsXCJwcm9qZWN0M1wiLFwicHJvamVjdDRcIl07XHJcbmNvbnN0ICBwcm9qTnVtYmVycyA9IFtcInByb2pOdW1iZXIxXCIsXCJwcm9qTnVtYmVyMlwiLFwicHJvak51bWJlcjNcIixcInByb2pOdW1iZXI0XCJdOyovXHJcblxyXG4vKkluc2VydFByb2plY3QocHJvamVjdHNbMF0scHJvak51bWJlcnNbMF0sY0lEWzBdKTtcclxuSW5zZXJ0UHJvamVjdChwcm9qZWN0c1sxXSxwcm9qTnVtYmVyc1sxXSxjSURbMV0pO1xyXG5JbnNlcnRQcm9qZWN0KHByb2plY3RzWzJdLHByb2pOdW1iZXJzWzJdLGNJRFsyXSk7XHJcbkluc2VydFByb2plY3QocHJvamVjdHNbM10scHJvak51bWJlcnNbM10sY0lEWzNdKTsqL1xyXG5cclxuLypjb25zdCBjbGllbnROYW1lcyA9IFtcIkNsaWVudDRcIl07IC8vIEV4YW1wbGUgY2xpZW50IG5hbWVzXHJcblxyXG5JbnNlcnRNdWx0aXBsZUNsaWVudHMoY2xpZW50TmFtZXMpXHJcbiAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJTdWNjZXNzZnVsbHkgaW5zZXJ0ZWQgY2xpZW50czpcIiwgcmVzdWx0Lmluc2VydGVkQ2xpZW50cyk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkZhaWxlZCB0byBpbnNlcnQgY2xpZW50czpcIiwgcmVzdWx0LmZhaWxlZENsaWVudHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluc2VydGluZyBjbGllbnRzOlwiLCBlcnJvcik7XHJcbiAgfSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRDbGllbnRzKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGVycm9ycywgZGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggY2xpZW50cy5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRXh0cmFjdCBjbGllbnQgbmFtZXMgYW5kIGNsaWVudCBJRHNcclxuICAgIGNvbnN0IGNsaWVudE5hbWVzID0gZGF0YS5tYXAoKGNsaWVudCkgPT4gY2xpZW50LkNsaWVudE5hbWUpO1xyXG4gICAgY29uc3QgY2xpZW50SURzID0gZGF0YS5tYXAoKGNsaWVudCkgPT4gY2xpZW50LmlkKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gYm90aCBjbGllbnQgbmFtZXMgYW5kIElEcyBpbiBhbiBvYmplY3Qgb3IgYW4gYXJyYXlcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNsaWVudE5hbWVzLFxyXG4gICAgICBjbGllbnRJRHMsXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEFsdGVybmF0aXZlbHksIGlmIHlvdSB3YW50IHRvIHJldHVybiBhbiBhcnJheTpcclxuICAgIC8vIHJldHVybiBbY2xpZW50TmFtZXMsIGNsaWVudElEc107XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKmFzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSgpIHtcclxuICBjb25zdCBjbGllbnRzID0gYXdhaXQgR2V0Q2xpZW50cygpO1xyXG4gIGNvbnN0IGNJRCA9IGNsaWVudHMuY2xpZW50SURzO1xyXG4gIGNvbnNvbGUubG9nKGNJRCk7XHJcbiAgY29uc3QgcHJvamVjdHMgPSBbXCJwcm9qZWN0MVwiLCBcInByb2plY3QyXCIsIFwicHJvamVjdDNcIiwgXCJwcm9qZWN0NFwiXTtcclxuICBjb25zdCBwcm9qTnVtYmVycyA9IFtcInByb2pOdW1iZXIxXCIsIFwicHJvak51bWJlcjJcIiwgXCJwcm9qTnVtYmVyM1wiLCBcInByb2pOdW1iZXI0XCJdO1xyXG4gXHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1swXSwgcHJvak51bWJlcnNbMF0sIGNJRFswXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1sxXSwgcHJvak51bWJlcnNbMV0sIGNJRFsxXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1syXSwgcHJvak51bWJlcnNbMl0sIGNJRFsyXSk7XHJcbiAgYXdhaXQgSW5zZXJ0UHJvamVjdChwcm9qZWN0c1szXSwgcHJvak51bWJlcnNbM10sIGNJRFszXSk7XHJcbn0qL1xyXG5cclxuLy9mZXRjaERhdGEoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRQcm9qZWN0cygpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcnMpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggcHJvamVjdHMuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlcGFyYXRlIHByb2plY3RJRHMgYW5kIHByb2plY3ROYW1lc1xyXG4gICAgY29uc3QgcHJvamVjdElEcyA9IGRhdGEubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3RJRCk7IC8vIExpc3Qgb2YgYWxsIHByb2plY3RJRHNcclxuICAgIGNvbnN0IHByb2plY3ROYW1lcyA9IGRhdGEubWFwKChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3ROYW1lKTsgLy8gTGlzdCBvZiBhbGwgcHJvamVjdE5hbWVzXHJcblxyXG4gICAgLy8gUmV0dXJuIGJvdGggc2VwYXJhdGVseVxyXG4gICAgcmV0dXJuIHsgcHJvamVjdElEcywgcHJvamVjdE5hbWVzIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybVN0YXRzKCkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGZXRjaCBhbGwgZm9ybXNcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybXMsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3QoKTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzKTtcclxuICAgICAgcmV0dXJuIHsgdmlzaXRzOiAwLCBzdWJtaXNzaW9uczogMCwgc3VibWlzc2lvblJhdGU6IDAsIGJvdW5jZVJhdGU6IDAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhciBzdGF0cyBjb20gVE9ET1Mgb3MgZm9ybXMgKHNlbSBmaWx0cmFyIHVzZXJJZClcclxuICAgIGNvbnN0IHZpc2l0cyA9IGZvcm1zLnJlZHVjZSgoc3VtLCBmb3JtKSA9PiBzdW0gKyAoZm9ybS52aXNpdHMgfHwgMCksIDApO1xyXG4gICAgY29uc3Qgc3VibWlzc2lvbnMgPSBmb3Jtcy5yZWR1Y2UoXHJcbiAgICAgIChzdW0sIGZvcm0pID0+IHN1bSArIChmb3JtLnN1Ym1pc3Npb25zIHx8IDApLFxyXG4gICAgICAwLFxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgc3VibWlzc2lvblJhdGUgPSAwO1xyXG4gICAgaWYgKHZpc2l0cyA+IDApIHtcclxuICAgICAgc3VibWlzc2lvblJhdGUgPSAoc3VibWlzc2lvbnMgLyB2aXNpdHMpICogMTAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGJvdW5jZVJhdGUgPSAxMDAgLSBzdWJtaXNzaW9uUmF0ZTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2aXNpdHMsXHJcbiAgICAgIHN1Ym1pc3Npb25zLFxyXG4gICAgICBzdWJtaXNzaW9uUmF0ZSxcclxuICAgICAgYm91bmNlUmF0ZSxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIHN0YXRzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4geyB2aXNpdHM6IDAsIHN1Ym1pc3Npb25zOiAwLCBzdWJtaXNzaW9uUmF0ZTogMCwgYm91bmNlUmF0ZTogMCB9O1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIFxyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtcywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0ubGlzdCgpO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiRm9ybXM6XCIsIGZvcm1zKTtcclxuICAgIHJldHVybiBmb3JtcztcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybXM6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybUJ5SWQoaWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm0sIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmdldCh7IGlkIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcnMpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZvcm0pIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybSBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBwcm9qZWN0TmFtZSA9IG51bGw7XHJcbiAgICBsZXQgY2xpZW50TmFtZSA9IG51bGw7XHJcbiAgICBsZXQgc2hhcmVVUkwgPSBudWxsO1xyXG5cclxuICAgIGlmIChmb3JtLnByb2pJRCkge1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHByb2plY3REYXRhLCBlcnJvcnM6IHByb2plY3RFcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IHByb2plY3RJRDogeyBlcTogZm9ybS5wcm9qSUQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChwcm9qZWN0RXJyb3JzKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihwcm9qZWN0RXJyb3JzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcHJvamVjdCA9IHByb2plY3REYXRhPy5bMF07XHJcbiAgICAgIGlmIChwcm9qZWN0KSB7XHJcbiAgICAgICAgcHJvamVjdE5hbWUgPSBwcm9qZWN0LnByb2plY3ROYW1lO1xyXG5cclxuICAgICAgICBpZiAocHJvamVjdC5DbGllbnRJRCkge1xyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiBjbGllbnREYXRhLCBlcnJvcnM6IGNsaWVudEVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5DbGllbnQuZ2V0KHtcclxuICAgICAgICAgICAgaWQ6IHByb2plY3QuQ2xpZW50SUQsXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBpZiAoY2xpZW50RXJyb3JzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2xpZW50RXJyb3JzKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoY2xpZW50RGF0YSkge1xyXG4gICAgICAgICAgICBjbGllbnROYW1lID0gY2xpZW50RGF0YS5DbGllbnROYW1lO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldG9ybmFyIHRhbWLDqW0gdmlzaXRhcyBlIHN1Ym1pc3PDtWVzXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBmb3JtLFxyXG4gICAgICBwcm9qZWN0TmFtZSxcclxuICAgICAgY2xpZW50TmFtZSxcclxuICAgICAgc2hhcmVVUkw6IGZvcm0uc2hhcmVVUkwsXHJcbiAgICAgIHZpc2l0czogZm9ybS52aXNpdHMgPz8gMCxcclxuICAgICAgc3VibWlzc2lvbnM6IGZvcm0uc3VibWlzc2lvbnMgPz8gMCxcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGJ5IElEOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gVXBkYXRlRm9ybUNvbnRlbnQoaWQ6IHN0cmluZywgY29udGVudDogYW55KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGZvcm0gPSB7XHJcbiAgICAgIGlkLFxyXG4gICAgICBjb250ZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRGb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoZm9ybSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSBjb250ZW50LlwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXBkYXRlZEZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBmb3JtIGNvbnRlbnQ6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSBjb250ZW50LlwiKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIERlZmluZSB5b3VyIHNlcnZlci1zaWRlIGFjdGlvblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUZvcm1BY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKSB7XHJcbiAgY29uc3QgaWQgPSBmb3JtRGF0YS5nZXQoXCJpZFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3QgY29udGVudCA9IGZvcm1EYXRhLmdldChcImNvbnRlbnRcIikgYXMgc3RyaW5nO1xyXG5cclxuICAvLyBDYWxsIHlvdXIgZXhpc3Rpbmcgc2VydmVyLXNpZGUgZnVuY3Rpb24gKFVwZGF0ZUZvcm1Db250ZW50KVxyXG4gIGF3YWl0IFVwZGF0ZUZvcm1Db250ZW50KGlkLCBjb250ZW50KTtcclxufVxyXG4vKmNvbnN0IGRhdGEgPSBbXHJcbiAgWydTZWN0aW9uIDEnLCAnQScsICdCJywgJ0MnLCAnRCcsICdFJywgJ0YnXSxcclxuICBbJ0UnLCAnRicsICdHJywgJ0gnLCAnSSddLFxyXG4gIFsnSicsICdLJywgJ0wnLCAnTScsICdOJ10sXHJcbl07XHJcblxyXG4vLyBDb252ZXJ0IHRoZSBkYXRhIHRvIGEgSlNPTiBzdHJpbmdcclxuY29uc3QgY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG5cclxuXHJcblVwZGF0ZUZvcm1Db250ZW50KFwiYjVhMTFkNzctZmVmNy00MzMwLTg0NzktZGI1ZDdhZWEzYWZmXCIsIGNvbnRlbnQpXHJcbiAgLnRoZW4odXBkYXRlZEZvcm0gPT4ge1xyXG4gICAgY29uc29sZS5sb2coJ0Zvcm0gdXBkYXRlZDonLCB1cGRhdGVkRm9ybSk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgZm9ybTonLCBlcnJvcik7XHJcbiAgfSk7XHJcbiovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUHVibGlzaEZvcm0oaWQ6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBzaGFyZVVSTDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuXHJcbiAgICBjb25zdCBmb3JtID0ge1xyXG4gICAgICBpZDogaWQsXHJcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXHJcbiAgICAgIHNoYXJlVVJMOiBzaGFyZVVSTCxcclxuICAgICAgcHVibGlzaGVkOiB0cnVlLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRGb3JtLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoZm9ybSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwdWJsaXNoIHRoZSBmb3JtLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXBkYXRlZEZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwdWJsaXNoaW5nIGZvcm06XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwdWJsaXNoIHRoZSBmb3JtLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdWJsaXNoRm9ybUFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpIHtcclxuICBjb25zdCBpZCA9IGZvcm1EYXRhLmdldChcImlkXCIpIGFzIHN0cmluZztcclxuICBjb25zdCBjb250ZW50ID0gZm9ybURhdGEuZ2V0KFwiY29udGVudFwiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3Qgc2hhcmVVUkwgPSBmb3JtRGF0YS5nZXQoXCJzaGFyZVVSTFwiKSBhcyBzdHJpbmc7XHJcblxyXG4gIGF3YWl0IFB1Ymxpc2hGb3JtKGlkLCBjb250ZW50LCBzaGFyZVVSTCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHZXRGb3JtQ29udGVudEJ5VXJsKGZvcm1Vcmw6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICBcclxuICAgIC8vY29uc3QgZm9ybVVSTCA9IGAvc3VibWl0LyR7Zm9ybVVybH1gO1xyXG4gICAgY29uc3QgZm9ybVVSTCA9IGZvcm1Vcmwuc3RhcnRzV2l0aCgnL3N1Ym1pdC8nKSA/IGZvcm1VcmwgOiBgL3N1Ym1pdC8ke2Zvcm1Vcmx9YDtcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybXMsIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHsgc2hhcmVVUkw6IHsgZXE6IGZvcm1VUkwgfSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycyB8fCAhZm9ybXMgfHwgZm9ybXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JzIHx8IFwiRm9ybSBub3QgZm91bmQsIHBsZWFzZSB0cnkgYWdhaW4uXCIpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybSA9IGZvcm1zWzBdO1xyXG4gICAgY29uc3QgdXBkYXRlZFZpc2l0cyA9IGZvcm0udmlzaXRzID8gZm9ybS52aXNpdHMgKyAxIDogMTtcclxuXHJcbiAgICBjb25zdCB1cGRhdGVkRm9ybSA9IHtcclxuICAgICAgaWQ6IGZvcm0uaWQsXHJcbiAgICAgIHZpc2l0czogdXBkYXRlZFZpc2l0cyxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgeyBlcnJvcnM6IHVwZGF0ZUVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLnVwZGF0ZSh1cGRhdGVkRm9ybSk7XHJcblxyXG4gICAgaWYgKHVwZGF0ZUVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKHVwZGF0ZUVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZm9ybSB2aXNpdHMuXCIpO1xyXG4gICAgfVxyXG4gICAgLy9jb25zb2xlLmxvZyhcImZvcm06XCIsIGZvcm0pO1xyXG4gICAgcmV0dXJuIGZvcm07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGNvbnRlbnQgYnkgVVJMOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBmZXRjaGluZyBmb3JtIGNvbnRlbnQgYnkgVVJMLlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBTdWJtaXRGb3JtKGZvcm1JZDogc3RyaW5nLCB0YWdJZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcclxuICBjb25zdCBzdWJtaXNzaW9uID0ge1xyXG4gICAgZm9ybUlkLFxyXG4gICAgY29udGVudCxcclxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gIH07XHJcbiAgXHJcbiAgY29uc3QgeyBkYXRhOiBzdWJtaXNzaW9uRGF0YSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtU3VibWlzc2lvbnMuY3JlYXRlKHN1Ym1pc3Npb24pO1xyXG5cclxuICBpZiAoIXN1Ym1pc3Npb25EYXRhPy5pZCkgdGhyb3cgbmV3IEVycm9yKFwiRXJybyBhbyBjcmlhciBzdWJtaXNzw6NvXCIpO1xyXG5cclxuICBjb25zdCBzdWJtaXNzaW9uSWQgPSBzdWJtaXNzaW9uRGF0YS5pZDtcclxuXHJcbiAgLy8gQXR1YWxpemEgbyBjb250YWRvciBkZSBzdWJtaXNzw7VlcyBkbyBmb3JtdWzDoXJpb1xyXG4gIGNvbnN0IHsgZGF0YTogZm9ybUxpc3QgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgIGZpbHRlcjogeyBpZDogeyBlcTogZm9ybUlkIH0gfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgZm9ybSA9IGZvcm1MaXN0WzBdO1xyXG4gIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS51cGRhdGUoe1xyXG4gICAgaWQ6IGZvcm0uaWQsXHJcbiAgICBzdWJtaXNzaW9uczogKGZvcm0uc3VibWlzc2lvbnMgfHwgMCkgKyAxLFxyXG4gIH0pO1xyXG5cclxuICAvLyBBdHVhbGl6YSBvIGNhbXBvIGNvbnRlbnRUZXN0IGVtIEZvcm1UYWcyIGNvcnJlc3BvbmRlbnRlIGFvIHRhZ0lkXHJcbiAgY29uc3QgeyBkYXRhOiBmb3JtVGFncyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtVGFnMi5saXN0KHtcclxuICAgIGZpbHRlcjogeyB0YWdJRDogeyBlcTogdGFnSWQgfSB9LFxyXG4gIH0pO1xyXG5cclxuICBpZiAoIWZvcm1UYWdzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiRm9ybVRhZzIgbsOjbyBlbmNvbnRyYWRvXCIpO1xyXG5cclxuICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLnVwZGF0ZSh7XHJcbiAgICBpZDogZm9ybVRhZ3NbMF0uaWQsXHJcbiAgICBjb250ZW50VGVzdDogc3VibWlzc2lvbklkLFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gc3VibWlzc2lvbkRhdGE7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3VibWl0Rm9ybUFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpIHtcclxuICBjb25zdCBmb3JtSWQgPSBmb3JtRGF0YS5nZXQoXCJmb3JtSWRcIikgYXMgc3RyaW5nO1xyXG4gIGNvbnN0IHRhZ0lkID0gZm9ybURhdGEuZ2V0KFwidGFnSWRcIikgYXMgc3RyaW5nO1xyXG4gIGNvbnN0IHJhd1Jlc3BvbnNlcyA9IGZvcm1EYXRhLmdldChcInJlc3BvbnNlc1wiKSBhcyBzdHJpbmc7XHJcbiAgY29uc3QgcmF3Rm9ybUNvbnRlbnQgPSBmb3JtRGF0YS5nZXQoXCJmb3JtQ29udGVudFwiKSBhcyBzdHJpbmc7XHJcblxyXG4gIGNvbnN0IHN1Ym1pc3Npb24gPSB7XHJcbiAgICByZXNwb25zZXM6IEpTT04ucGFyc2UocmF3UmVzcG9uc2VzKSxcclxuICAgIGZvcm1Db250ZW50OiBKU09OLnBhcnNlKHJhd0Zvcm1Db250ZW50KSxcclxuICAgIHN1Ym1pdHRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgfTtcclxuXHJcbiAgY29uc3QganNvbkNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShzdWJtaXNzaW9uKTtcclxuICBhd2FpdCBTdWJtaXRGb3JtKGZvcm1JZCwgdGFnSWQsIGpzb25Db250ZW50KTtcclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybVdpdGhTdWJtaXNzaW9ucyhpZDogc3RyaW5nKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YTogZm9ybSwgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm0uZ2V0KHsgaWQgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9ycyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChmb3JtKSB7XHJcbiAgICAgIGNvbnN0IHsgZGF0YTogc3VibWlzc2lvbnMsIGVycm9yczogc3VibWlzc2lvbkVycm9ycyB9ID1cclxuICAgICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1TdWJtaXNzaW9ucy5saXN0KHtcclxuICAgICAgICAgIGZpbHRlcjogeyBmb3JtSWQ6IHsgZXE6IGZvcm0uaWQgfSB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHN1Ym1pc3Npb25FcnJvcnMpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHN1Ym1pc3Npb25FcnJvcnMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4geyBmb3JtLCBzdWJtaXNzaW9ucyB9O1xyXG4gICAgfVxyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm0gbm90IGZvdW5kLlwiKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm0gd2l0aCBzdWJtaXNzaW9uczpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGZvcm0gd2l0aCBzdWJtaXNzaW9ucy5cIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0U3VibWlzc2lvbldpdGhUYWdJbmZvKHN1Ym1pc3Npb25JZDogc3RyaW5nKSB7XHJcbiAgLy8gT2J0ZW5oYSBhIHN1Ym1pc3PDo29cclxuICBjb25zdCBzdWJtaXNzaW9uUmVzcG9uc2UgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1TdWJtaXNzaW9ucy5nZXQoeyBpZDogc3VibWlzc2lvbklkIH0pO1xyXG5cclxuICAvLyBWZXJpZmlxdWUgc2UgYSByZXNwb3N0YSBjb250w6ltIGEgc3VibWlzc8Ojb1xyXG4gIGNvbnN0IHN1Ym1pc3Npb24gPSBzdWJtaXNzaW9uUmVzcG9uc2UuZGF0YTtcclxuICBpZiAoIXN1Ym1pc3Npb24pIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZvcm1TdWJtaXNzaW9uIG7Do28gZW5jb250cmFkby5cIik7XHJcbiAgfVxyXG5cclxuICAvLyBBY2Vzc2FuZG8gbyBmb3JtSWQgZGEgc3VibWlzc8Ojb1xyXG4gIGNvbnN0IGZvcm1JZCA9IHN1Ym1pc3Npb24uZm9ybUlkO1xyXG4gIGlmICghZm9ybUlkKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmb3JtSWQgbsOjbyBlbmNvbnRyYWRvIG5hIHN1Ym1pc3PDo28uXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gT2J0ZW5oYSBvcyBGb3JtVGFnMiBxdWUgdGVtIGNvbnRlbnRUZXN0IHJlbGFjaW9uYWRvIGFvIHN1Ym1pc3Npb25JZFxyXG4gIGNvbnN0IGZvcm1UYWdzUmVzcG9uc2UgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgZmlsdGVyOiB7XHJcbiAgICAgIGNvbnRlbnRUZXN0OiB7IGNvbnRhaW5zOiBzdWJtaXNzaW9uSWQgfSwgLy8gQXF1aSBlc3RhbW9zIGJ1c2NhbmRvIGRlbnRybyBkbyBjYW1wbyBjb250ZW50VGVzdFxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBWZXJpZmlxdWUgc2UgbyBGb3JtVGFnMiBmb2kgZW5jb250cmFkb1xyXG4gIGlmICghZm9ybVRhZ3NSZXNwb25zZS5kYXRhLmxlbmd0aCkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRm9ybVRhZzIgbsOjbyBlbmNvbnRyYWRvIGNvbSBvIGNvbnRlbnRUZXN0IGFzc29jaWFkby5cIik7XHJcbiAgfVxyXG5cclxuICAvLyBQZWd1ZSBvIHByaW1laXJvIEZvcm1UYWcyIGVuY29udHJhZG9cclxuICBjb25zdCBmb3JtVGFnID0gZm9ybVRhZ3NSZXNwb25zZS5kYXRhWzBdO1xyXG5cclxuICAvLyBPYnRlbmhhIG8gRXF1aXBtZW50VGFnMiBhc3NvY2lhZG8gYW8gRm9ybVRhZzJcclxuICBjb25zdCBlcXVpcG1lbnRUYWdSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5nZXQoe1xyXG4gICAgaWQ6IGZvcm1UYWcudGFnSUQgPz8gXCJcIiwgIC8vIFVzYW5kbyBvIHRhZ0lEIGRlIEZvcm1UYWcyLCBmYWxsYmFjayB0byBlbXB0eSBzdHJpbmcgaWYgbnVsbFxyXG4gIH0pO1xyXG5cclxuICBpZiAoIWVxdWlwbWVudFRhZ1Jlc3BvbnNlLmRhdGEpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkVxdWlwbWVudFRhZzIgbsOjbyBlbmNvbnRyYWRvLlwiKTtcclxuICB9XHJcblxyXG4gIC8vIFJldG9ybmUgYXMgaW5mb3JtYcOnw7Vlc1xyXG4gIHJldHVybiB7XHJcbiAgICBmb3JtSWQ6IGZvcm1JZCxcclxuICAgIHN1Ym1pc3Npb25JZDogc3VibWlzc2lvbi5pZCxcclxuICAgIHN1Ym1pdHRlZEF0OiBzdWJtaXNzaW9uLmNyZWF0ZWRBdCxcclxuICAgIGVxdWlwbWVudE5hbWU6IGVxdWlwbWVudFRhZ1Jlc3BvbnNlLmRhdGEuRXF1aXBtZW50TmFtZSA/PyBcIlNlbSBub21lXCIsXHJcbiAgICB0YWc6IGVxdWlwbWVudFRhZ1Jlc3BvbnNlLmRhdGEuVGFnID8/IFwiU2VtIHRhZ1wiLFxyXG4gIH07XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0RXF1aXBtZW50VGFnc0ZvckZvcm0oaWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGZXRjaCB0aGUgZm9ybSBkYXRhXHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm0sIGVycm9ycyB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmdldCh7IGlkIH0pO1xyXG5cclxuICAgIGlmIChlcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm06XCIsIGVycm9ycyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZm9ybSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3JtIG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggZXF1aXBtZW50IHRhZ3MgcmVsYXRlZCB0byB0aGUgZm9ybVxyXG4gICAgY29uc3QgeyBkYXRhOiBlcXVpcG1lbnRUYWdzLCBlcnJvcnM6IGVxdWlwbWVudFRhZ3NFcnJvcnMgfSA9XHJcbiAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IGZvcm1JRDogeyBlcTogZm9ybS5pZCB9IH0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIGlmIChlcXVpcG1lbnRUYWdzRXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBlcXVpcG1lbnQgdGFnczpcIiwgZXF1aXBtZW50VGFnc0Vycm9ycyk7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZXF1aXBtZW50VGFncyB8fCBlcXVpcG1lbnRUYWdzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk5vIGVxdWlwbWVudCB0YWdzIGZvdW5kLlwiKTtcclxuICAgICAgcmV0dXJuIHsgZm9ybSwgZXF1aXBtZW50VGFnczogW10gfTtcclxuICAgIH1cclxuXHJcbiAgICAgIC8vIEZldGNoIHJlbGF0ZWQgZXF1aXBtZW50IGRldGFpbHMgZm9yIGVhY2ggdGFnXHJcbiAgICBjb25zdCBlcXVpcG1lbnREZXRhaWxzID0gYXdhaXQgUHJvbWlzZS5hbGwoXHJcbiAgICAgIGVxdWlwbWVudFRhZ3MubWFwKGFzeW5jICh0YWcpID0+IHtcclxuICAgICAgICAvLyBFbnN1cmUgdGhhdCB0YWcudGFnSUQgaXMgdmFsaWQgYmVmb3JlIG1ha2luZyB0aGUgQVBJIGNhbGxcclxuICAgICAgICBjb25zdCBlcXVpcG1lbnRUYWcgPSB0YWcudGFnSUQgPyBhd2FpdCBjbGllbnQubW9kZWxzLkVxdWlwbWVudFRhZzIuZ2V0KHsgaWQ6IHRhZy50YWdJRCB9KSA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChlcXVpcG1lbnRUYWcpIHtcclxuICAgICAgICAgIHJldHVybiBlcXVpcG1lbnRUYWc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHRhZ0lEOlwiLCB0YWcudGFnSUQpO1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICBcclxuXHJcbiAgICByZXR1cm4geyBmb3JtLCBlcXVpcG1lbnRUYWdzOiBlcXVpcG1lbnREZXRhaWxzLmZpbHRlcih0YWcgPT4gdGFnICE9PSBudWxsKSB9O1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGVxdWlwbWVudCB0YWdzIGZvciBmb3JtOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Q2xpZW50V2l0aFByb2plY3RzKENsaWVudElEOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnMsIGRhdGEgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50LmdldCh7IGlkOiBDbGllbnRJRCB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzIHx8ICFjbGllbnQpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNsaWVudDpcIiwgZXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2xpZW50IG5vdCBmb3VuZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggYWxsIHByb2plY3RzIHJlbGF0ZWQgdG8gdGhpcyBjbGllbnRcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdHMsIGVycm9yczogcHJvamVjdEVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IENsaWVudElEIH0gfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzOlwiLCBwcm9qZWN0RXJyb3JzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyAuLi5kYXRhLCBwcm9qZWN0cyB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLypHZXRDbGllbnRXaXRoUHJvamVjdHMoXCIxYWQ3NGJjZS1iZDlkLTQxMzEtODNlZi1lZmZlY2JhNzRjN2RcIilcclxuICAudGhlbigoZGF0YSkgPT4gY29uc29sZS5sb2coXCJDbGllbnQgd2l0aCBQcm9qZWN0czpcIiwgZGF0YSkpXHJcbiAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGNsaWVudCB3aXRoIHByb2plY3RzOlwiLCBlcnJvcikpOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXNXaXRoQ2xpZW50KENsaWVudElEOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IHVzZXJJZCB9ID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcclxuICBpZiAoIXVzZXJJZCkge1xyXG4gICAgdGhyb3cgbmV3IFVzZXJOb3RGb3VuZEVycigpO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEZldGNoIHByb2plY3RzIGxpbmtlZCB0byB0aGUgQ2xpZW50SURcclxuICAgIGNvbnN0IHsgZGF0YTogcHJvamVjdHMsIGVycm9yczogcHJvamVjdEVycm9ycyB9ID1cclxuICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IENsaWVudElEIH0gfSxcclxuICAgICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhcIlByb2plY3RzIEZvdW5kOlwiLCBwcm9qZWN0cyk7XHJcbiAgICBpZiAocHJvamVjdEVycm9ycyB8fCAhcHJvamVjdHMgfHwgcHJvamVjdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IocHJvamVjdEVycm9ycyB8fCBcIk5vIHByb2plY3RzIGZvdW5kIGZvciB0aGlzIGNsaWVudC5cIik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHByb2plY3RzIGZvdW5kIGZvciB0aGlzIGNsaWVudC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmV0Y2ggZm9ybXMgZm9yIGVhY2ggcHJvamVjdFxyXG4gICAgY29uc3QgZm9ybXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgcHJvamVjdHMubWFwKGFzeW5jIChwcm9qZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwcm9qZWN0Rm9ybXMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgICAgICAgIGZpbHRlcjogeyBwcm9qSUQ6IHsgZXE6IHByb2plY3QucHJvamVjdElEIH0gfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlByb2plY3QgSUQ6XCIsIHByb2plY3QucHJvamVjdElEKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgRm9ybXMgZm9yIFByb2plY3QgJHtwcm9qZWN0LnByb2plY3ROYW1lfTpgLCBwcm9qZWN0Rm9ybXMpO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvamVjdEZvcm1zLm1hcCgoZm9ybSkgPT4gKHtcclxuICAgICAgICAgIC4uLmZvcm0sXHJcbiAgICAgICAgICBwcm9qZWN0TmFtZTogcHJvamVjdC5wcm9qZWN0TmFtZSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH0pLFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gZm9ybXMuZmxhdCgpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZm9ybXMgd2l0aCBjbGllbnQ6XCIsIGVycm9yKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBmb3JtcyBmb3IgdGhlIGNsaWVudC5cIik7XHJcbiAgfVxyXG59XHJcblxyXG4vKkdldEZvcm1zV2l0aENsaWVudChcIjFhZDc0YmNlLWJkOWQtNDEzMS04M2VmLWVmZmVjYmE3NGM3ZFwiKVxyXG4udGhlbigoZm9ybXMpID0+IGNvbnNvbGUubG9nKFwiRm9ybXM6XCIsIGZvcm1zKSlcclxuLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcikpOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0Rm9ybXNJbmZvcm1hdGlvbigpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBlcnJvcnM6IGNsaWVudEVycm9ycywgZGF0YTogY2xpZW50c0RhdGEgfSA9XHJcbiAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuQ2xpZW50Lmxpc3QoKTtcclxuXHJcbiAgICBpZiAoY2xpZW50RXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgY2xpZW50RXJyb3JzKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGZvcm1zLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgcmVzdWx0cyA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgY2xpZW50SXRlbSBvZiBjbGllbnRzRGF0YSkge1xyXG4gICAgICBjb25zdCB7IGVycm9yczogcHJvamVjdEVycm9ycywgZGF0YTogcHJvamVjdHNEYXRhIH0gPVxyXG4gICAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IGNsaWVudEl0ZW0uaWQgfSB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIHByb2plY3RFcnJvcnMpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IHByb2plY3RJdGVtIG9mIHByb2plY3RzRGF0YSkge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coYEZldGNoaW5nIGZvcm1zIGZvciBwcm9qZWN0OiAke3Byb2plY3RJdGVtLnByb2plY3ROYW1lfSwgSUQ6ICR7cHJvamVjdEl0ZW0ucHJvamVjdElEfWApO1xyXG5cclxuICAgICAgICBjb25zdCB7IGVycm9yczogZm9ybUVycm9ycywgZGF0YTogZm9ybXNEYXRhIH0gPVxyXG4gICAgICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICAgICAgICBmaWx0ZXI6IHsgcHJvaklEOiB7IGVxOiBwcm9qZWN0SXRlbS5wcm9qZWN0SUQgfSB9LCAvLyBFbnN1cmUgdGhlIGNvcnJlY3Qga2V5IGlzIHVzZWRcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZm9ybUVycm9ycykge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBmb3JtRXJyb3JzKTtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm1zXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgIGNsaWVudE5hbWU6IGNsaWVudEl0ZW0uQ2xpZW50TmFtZSxcclxuICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0SXRlbS5wcm9qZWN0TmFtZSxcclxuICAgICAgICAgIHByb2plY3RJRDogcHJvamVjdEl0ZW0ucHJvamVjdElELFxyXG4gICAgICAgICAgZm9ybXM6IGZvcm1zRGF0YS5tYXAoKGZvcm0pID0+ICh7XHJcbiAgICAgICAgICAgIGlkOiBmb3JtLmlkLFxyXG4gICAgICAgICAgICBuYW1lOiBmb3JtLm5hbWUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmb3JtLmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBwdWJsaXNoZWQ6IGZvcm0ucHVibGlzaGVkLFxyXG4gICAgICAgICAgICBjb250ZW50OiBmb3JtLmNvbnRlbnQsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogZm9ybS5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIHZpc2l0czogZm9ybS52aXNpdHMsXHJcbiAgICAgICAgICAgIHN1Ym1pc3Npb25zOiBmb3JtLnN1Ym1pc3Npb25zLFxyXG4gICAgICAgICAgfSkpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiUmVzdWx0czpcIiwgcmVzdWx0cyk7XHJcbiAgICByZXR1cm4gcmVzdWx0cztcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yXCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLypjb25zdCBmb3Jtc0luZm8gPSBhd2FpdCBHZXRGb3Jtc0luZm9ybWF0aW9uKClcclxuY29uc29sZS5sb2coJ0Zvcm0gSW5mbzonLCBmb3Jtc0luZm8pOyovXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR2V0UHJvamVjdHNGcm9tQ2xpZW50TmFtZShDbGllbnROYW1lOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgLy8gRmV0Y2ggQ2xpZW50IGJhc2VkIG9uIENsaWVudE5hbWVcclxuICAgIGNvbnN0IHsgZXJyb3JzLCBkYXRhOiBjbGllbnREYXRhIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7IENsaWVudE5hbWU6IHsgZXE6IENsaWVudE5hbWUgfSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycyB8fCBjbGllbnREYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgY2xpZW50IG9yIGNsaWVudCBub3QgZm91bmQ6XCIsIGVycm9ycyk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNsaWVudCBub3QgZm91bmQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFzc3VtaW5nIGVhY2ggY2xpZW50IGhhcyBhbiBhcnJheSBvZiBwcm9qZWN0c1xyXG4gICAgY29uc3QgQ2xpZW50cyA9IGNsaWVudERhdGFbMF07IC8vIEFzc3VtaW5nIHRoZSBmaXJzdCBjbGllbnQgaW4gdGhlIGxpc3QgaXMgdGhlIG9uZSB3ZSdyZSBpbnRlcmVzdGVkIGluXHJcbiAgICBjb25zdCB7IGRhdGE6IHByb2plY3RzLCBlcnJvcnM6IHByb2plY3RFcnJvcnMgfSA9XHJcbiAgICAgIGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICAgICAgZmlsdGVyOiB7IENsaWVudElEOiB7IGVxOiBDbGllbnRzLmlkIH0gfSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2plY3RzOlwiLCBwcm9qZWN0RXJyb3JzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHByb2plY3ROYW1lcyA9IHByb2plY3RzLm1hcCgocHJvamVjdCkgPT4gcHJvamVjdC5wcm9qZWN0TmFtZSk7XHJcbiAgICAvLyBSZXR1cm4gY2xpZW50IGFuZCBhc3NvY2lhdGVkIHByb2plY3RzXHJcbiAgICByZXR1cm4geyBwcm9qZWN0TmFtZXMgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBDcmVhdGVGb3JtKFxyXG4gIG5hbWU6IHN0cmluZyxcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG4gIHByb2plY3ROYW1lOiBzdHJpbmcsXHJcbikge1xyXG4gIC8vIEZldGNoIHRoZSBwcm9qZWN0IGRldGFpbHMgdXNpbmcgcHJvamVjdE5hbWVcclxuICBjb25zdCB7IGVycm9yczogcHJvamVjdEVycm9ycywgZGF0YTogcHJvamVjdHNEYXRhIH0gPVxyXG4gICAgYXdhaXQgY2xpZW50Lm1vZGVscy5Qcm9qZWN0dC5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7IHByb2plY3ROYW1lOiB7IGVxOiBwcm9qZWN0TmFtZSB9IH0sXHJcbiAgICB9KTtcclxuXHJcbiAgaWYgKHByb2plY3RFcnJvcnMpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9qZWN0czpcIiwgcHJvamVjdEVycm9ycyk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggcHJvamVjdHMuXCIpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHByb2plY3RzRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgUHJvamVjdCB3aXRoIG5hbWUgXCIke3Byb2plY3ROYW1lfVwiIG5vdCBmb3VuZC5gKTtcclxuICB9XHJcblxyXG4gIC8vIEdldCB0aGUgZmlyc3QgbWF0Y2hpbmcgcHJvamVjdCdzIElEXHJcbiAgY29uc3QgcHJvaklEID0gcHJvamVjdHNEYXRhWzBdLnByb2plY3RJRDtcclxuXHJcbiAgLy8gTm93IGNyZWF0ZSB0aGUgZm9ybSB1c2luZyBwcm9qSURcclxuICBjb25zdCB7IGVycm9yczogZm9ybWVycm9ycywgZGF0YTogZm9ybSB9ID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmNyZWF0ZSh7XHJcbiAgICBwcm9qSUQ6IHByb2pJRCxcclxuICAgIG5hbWU6IG5hbWUsXHJcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXHJcbiAgfSk7XHJcblxyXG4gIGlmIChmb3JtZXJyb3JzKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYXRpbmcgZm9ybTpcIiwgZm9ybWVycm9ycyk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb21ldGhpbmcgd2VudCB3cm9uZyB3aGlsZSBjcmVhdGluZyB0aGUgZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBmb3JtSWQ6IGZvcm0/LmlkLFxyXG4gICAgcHJvaklEOiBwcm9qSUQsXHJcbiAgfTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBydW5Gb3JtID0gYXN5bmMgKFxyXG4gIGZvcm1Vcmw6c3RyaW5nLFxyXG4gIEVxdWlwTmFtZTogc3RyaW5nLFxyXG4gIEVxdWlwVGFnOiBzdHJpbmcsXHJcbik6IFByb21pc2U8e1xyXG4gIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgY3JlYXRlZFRhZ0lEPzogc3RyaW5nO1xyXG4gIHRhZ0NyZWF0ZWRBdD86IHN0cmluZztcclxufT4gPT4ge1xyXG4gIC8vY29uc29sZS5sb2coXCJydW5Gb3JtIGNhbGxlZCB3aXRoOlwiLCBmb3JtVXJsLCBFcXVpcE5hbWUsIEVxdWlwVGFnKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybVJlc3AgPSBhd2FpdCBHZXRGb3JtQ29udGVudEJ5VXJsKGZvcm1VcmwpO1xyXG4gICAgXHJcbiAgICBpZiAoIWZvcm1SZXNwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGb3JtIG5vdCBmb3VuZCB3aXRoIHRoZSBwcm92aWRlZCBUZXN0TmFtZSBhbmQgUHJvamVjdElEXCIpO1xyXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm0gPSBmb3JtUmVzcDtcclxuXHJcbiAgICBjb25zdCBleGlzdGluZ1RhZ1Jlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkVxdWlwbWVudFRhZzIubGlzdCh7XHJcbiAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgIFRhZzogeyBlcTogRXF1aXBUYWcgfSxcclxuICAgICAgICBFcXVpcG1lbnROYW1lOiB7IGVxOiBFcXVpcE5hbWUgfSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGV4aXN0aW5nVGFnID0gZXhpc3RpbmdUYWdSZXNwLmRhdGE/LlswXTtcclxuXHJcbiAgICBpZiAoZXhpc3RpbmdUYWcpIHtcclxuICAgICAgY29uc3QgbGlua2VkRm9ybVJlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgICAgdGFnSUQ6IHsgZXE6IGV4aXN0aW5nVGFnLmlkIH0sXHJcbiAgICAgICAgICBmb3JtSUQ6IHsgZXE6IGZvcm0uaWQgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChsaW5rZWRGb3JtUmVzcC5kYXRhPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICAgIFwiVGhpcyBlcXVpcG1lbnQgYW5kIHRhZyBhcmUgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggdGhpcyBmb3JtIGFuZCBwcm9qZWN0LlwiLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYWxlcnQoXHJcbiAgICAgICAgICBcIkVycm9yOiBUaGlzIGVxdWlwbWVudCBhbmQgdGFnIGFyZSBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGZvcm0gYW5kIHByb2plY3QuXCIsXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNyZWF0ZVJlc3AgPSBudWxsO1xyXG4gICAgbGV0IGNyZWF0ZWRUYWdJRDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG4gICAgbGV0IHRhZ0NyZWF0ZWRBdDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGlmICghZXhpc3RpbmdUYWcpIHtcclxuICAgICAgY3JlYXRlUmVzcCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5jcmVhdGUoe1xyXG4gICAgICAgIFRhZzogRXF1aXBUYWcsXHJcbiAgICAgICAgRXF1aXBtZW50TmFtZTogRXF1aXBOYW1lLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghY3JlYXRlUmVzcC5kYXRhKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgRXF1aXBtZW50VGFnXCIpO1xyXG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNyZWF0ZWRUYWdJRCA9IGNyZWF0ZVJlc3AuZGF0YS5pZDtcclxuICAgICAgdGFnQ3JlYXRlZEF0ID0gbmV3IERhdGUoY3JlYXRlUmVzcC5kYXRhLmNyZWF0ZWRBdClcclxuICAgICAgICAudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIC5zcGxpdChcIlRcIilbMF07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZm9ybVRhZ1Jlc3AgPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmNyZWF0ZSh7XHJcbiAgICAgIGZvcm1JRDogZm9ybS5pZCxcclxuICAgICAgdGFnSUQ6IGV4aXN0aW5nVGFnID8gZXhpc3RpbmdUYWcuaWQgOiBjcmVhdGVkVGFnSUQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoIWZvcm1UYWdSZXNwLmRhdGEpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgRm9ybVRhZ1wiKTtcclxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UgfTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBjcmVhdGVkVGFnSUQsIHRhZ0NyZWF0ZWRBdCB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZXhlY3V0aW5nIHJ1bkZvcm06XCIsIGVycm9yKTtcclxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gRmV0Y2ggZm9ybUlkIGJ5IFRlc3ROYW1lIGFuZCBQcm9qZWN0SURcclxuY29uc3QgZmV0Y2hGb3JtQnlOYW1lQW5kUHJvamVjdCA9IGFzeW5jIChcclxuICBUZXN0TmFtZTogc3RyaW5nLFxyXG4gIFByb2plY3RJRDogc3RyaW5nLFxyXG4pID0+IHtcclxuICB0cnkge1xyXG4gICAgLy9jb25zb2xlLmxvZyhcIkZldGNoaW5nIGZvcm0gd2l0aCBUZXN0TmFtZTpcIiwgVGVzdE5hbWUsIFwiYW5kIFByb2plY3RJRDpcIiwgUHJvamVjdElEKTtcclxuICAgIGNvbnN0IGZvcm1SZXNwID0gYXdhaXQgY2xpZW50Lm1vZGVscy5Gb3JtLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHtcclxuICAgICAgICBuYW1lOiB7IGVxOiBUZXN0TmFtZSB9LFxyXG4gICAgICAgIHByb2pJRDogeyBlcTogUHJvamVjdElEIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL2NvbnNvbGUubG9nKFwiRm9ybSBmZXRjaCByZXNwb25zZTpcIiwgZm9ybVJlc3ApO1xyXG5cclxuICAgIC8vIElmIGZvcm0gZXhpc3RzLCByZXR1cm4gdGhlIGZpcnN0IHJlc3VsdFxyXG4gICAgcmV0dXJuIGZvcm1SZXNwLmRhdGE/LlswXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGZvcm06XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufTtcclxuXHJcbi8qYXdhaXQgcnVuRm9ybShcIlRlc3QgbmFtZSAxXCIsIFwiSEUxMDFQMDAxXCIsIFwiQ29tcHJlc3NvciBYXCIsIFwiVEFHLTAwMVwiKVxyXG4udGhlbigobmV3RXF1aXBtZW50VGFnKSA9PiBjb25zb2xlLmxvZyhcIkNyZWF0ZWQgRm9ybVRhZzpcIiwgbmV3RXF1aXBtZW50VGFnKSlcclxuLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5lcnJvcihcIkVycm9yOlwiLCBlcnJvcikpOyAvLyBIYW5kbGUgYW55IGVycm9ycyAqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdldEZvcm1zQnlDbGllbnROYW1lKENsaWVudE5hbWU6IHN0cmluZykge1xyXG4gIC8vIDEuIEZldGNoIHRoZSBDbGllbnQgSURcclxuICBjb25zdCBjbGllbnRSZXN1bHQgPSBhd2FpdCBjbGllbnQubW9kZWxzLkNsaWVudC5saXN0KHtcclxuICAgIGZpbHRlcjogeyBDbGllbnROYW1lOiB7IGVxOiBDbGllbnROYW1lIH0gfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgY2xpZW50RGF0YSA9IGNsaWVudFJlc3VsdC5kYXRhPy5bMF07XHJcbiAgaWYgKCFjbGllbnREYXRhKSByZXR1cm4gW107XHJcblxyXG4gIGNvbnN0IGNsaWVudElEID0gY2xpZW50RGF0YS5pZDtcclxuXHJcbiAgLy8gMi4gRmV0Y2ggYWxsIFByb2plY3RzIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgQ2xpZW50SURcclxuICBjb25zdCBwcm9qZWN0c1Jlc3VsdCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuUHJvamVjdHQubGlzdCh7XHJcbiAgICBmaWx0ZXI6IHsgQ2xpZW50SUQ6IHsgZXE6IGNsaWVudElEIH0gfSxcclxuICB9KTtcclxuXHJcbiAgY29uc3QgcHJvamVjdHMgPSBwcm9qZWN0c1Jlc3VsdC5kYXRhO1xyXG4gIGlmICghcHJvamVjdHMubGVuZ3RoKSByZXR1cm4gW107XHJcblxyXG4gIGNvbnN0IHByb2plY3RJRHMgPSBwcm9qZWN0cy5tYXAoKHByb2plY3QpID0+IHByb2plY3QucHJvamVjdElEKTtcclxuXHJcbiAgLy8gMy4gRmV0Y2ggYWxsIEZvcm1zIGZvciB0aGUgZm91bmQgcHJvamVjdHNcclxuICBjb25zdCBhbGxGb3JtcyA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgcHJvamVjdElEcy5tYXAoYXN5bmMgKHByb2plY3RJRCkgPT4ge1xyXG4gICAgICBjb25zdCBmb3Jtc1Jlc3VsdCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybS5saXN0KHtcclxuICAgICAgICBmaWx0ZXI6IHsgcHJvaklEOiB7IGVxOiBwcm9qZWN0SUQgfSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGZvcm1zID0gZm9ybXNSZXN1bHQuZGF0YTtcclxuICAgICAgY29uc3QgZm9ybUlEcyA9IGZvcm1zLm1hcCgoZm9ybSkgPT4gZm9ybS5pZCk7XHJcblxyXG4gICAgICBjb25zdCBmb3JtRGV0YWlsc1dpdGhFcXVpcG1lbnQgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICBmb3JtSURzLm1hcChhc3luYyAoZm9ybUlkKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IGZvcm1UYWdzLCBlcnJvcnM6IGZvcm1UYWdzRXJyb3JzIH0gPVxyXG4gICAgICAgICAgICBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICAgICAgICAgIGZpbHRlcjogeyBmb3JtSUQ6IHsgZXE6IGZvcm1JZCB9IH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGlmIChmb3JtVGFnc0Vycm9ycykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgICAgICAgIGBFcnJvciBmZXRjaGluZyBmb3JtIHRhZ3MgZm9yIGZvcm0gSUQgJHtmb3JtSWR9OmAsXHJcbiAgICAgICAgICAgICAgZm9ybVRhZ3NFcnJvcnMsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IHRhZ0lEcyA9IGZvcm1UYWdzLm1hcCgodGFnKSA9PiB0YWcudGFnSUQpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGVxdWlwbWVudEFuZFRhZ3MgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgdGFnSURzLm1hcChhc3luYyAodGFnSUQpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IGVxdWlwbWVudERhdGEsIGVycm9yczogZXF1aXBtZW50RXJyb3JzIH0gPVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgY2xpZW50Lm1vZGVscy5FcXVpcG1lbnRUYWcyLmxpc3Qoe1xyXG4gICAgICAgICAgICAgICAgICBmaWx0ZXI6IHRhZ0lEID8geyBpZDogeyBlcTogdGFnSUQgfSB9IDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChlcXVpcG1lbnRFcnJvcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgIGBFcnJvciBmZXRjaGluZyBlcXVpcG1lbnQgZm9yIHRhZ0lEICR7dGFnSUR9OmAsXHJcbiAgICAgICAgICAgICAgICAgIGVxdWlwbWVudEVycm9ycyxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBlcXVpcG1lbnREYXRhLm1hcCgoZXF1aXBtZW50KSA9PiAoe1xyXG4gICAgICAgICAgICAgICAgZXF1aXBtZW50TmFtZTogZXF1aXBtZW50LkVxdWlwbWVudE5hbWUsXHJcbiAgICAgICAgICAgICAgICBlcXVpcG1lbnRUYWc6IGVxdWlwbWVudC5UYWcsXHJcbiAgICAgICAgICAgICAgICB0YWdDcmVhdGVkQXQ6IG5ldyBEYXRlKGVxdWlwbWVudC5jcmVhdGVkQXQpXHJcbiAgICAgICAgICAgICAgICAgIC50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAgIC5zcGxpdChcIlRcIilbMF0sIC8vIDwtLSBBZGljaW9uYWRvIGFxdWlcclxuICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IGZvcm1zLmZpbmQoKGZvcm0pID0+IGZvcm0uaWQgPT09IGZvcm1JZCk7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjbGllbnROYW1lOiBjbGllbnREYXRhLkNsaWVudE5hbWUsXHJcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0cy5maW5kKFxyXG4gICAgICAgICAgICAgIChwcm9qZWN0KSA9PiBwcm9qZWN0LnByb2plY3RJRCA9PT0gcHJvamVjdElELFxyXG4gICAgICAgICAgICApPy5wcm9qZWN0TmFtZSxcclxuICAgICAgICAgICAgcHJvamVjdElELFxyXG4gICAgICAgICAgICBmb3JtTmFtZTogZm9ybURhdGE/Lm5hbWUsXHJcbiAgICAgICAgICAgIGVxdWlwbWVudDogZXF1aXBtZW50QW5kVGFncy5mbGF0KCksXHJcbiAgICAgICAgICAgIHN1Ym1pc3Npb246IGZvcm1EYXRhPy5zdWJtaXNzaW9ucyB8fCAwLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogZm9ybURhdGE/LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgICBmb3JtSWQ6IGZvcm1JZCxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfSksXHJcbiAgICAgICk7XHJcblxyXG4gICAgICByZXR1cm4gZm9ybURldGFpbHNXaXRoRXF1aXBtZW50LmZpbHRlcigoZGV0YWlsKSA9PiBkZXRhaWwgIT09IG51bGwpO1xyXG4gICAgfSksXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgZmxhdHRlbmVkRm9ybXMgPSBhbGxGb3Jtcy5mbGF0KCk7XHJcblxyXG4gIHJldHVybiBmbGF0dGVuZWRGb3Jtcy5tYXAoKGZvcm1EZXRhaWwpID0+ICh7XHJcbiAgICBjbGllbnROYW1lOiBmb3JtRGV0YWlsLmNsaWVudE5hbWUsXHJcbiAgICBwcm9qZWN0TmFtZTogZm9ybURldGFpbC5wcm9qZWN0TmFtZSxcclxuICAgIHByb2plY3RJRDogZm9ybURldGFpbC5wcm9qZWN0SUQsXHJcbiAgICBmb3JtSUQ6IGZvcm1EZXRhaWwuZm9ybUlkLFxyXG4gICAgZm9ybU5hbWU6IGZvcm1EZXRhaWwuZm9ybU5hbWUsXHJcbiAgICBkZXNjcmlwdGlvbjogZm9ybURldGFpbC5kZXNjcmlwdGlvbixcclxuICAgIGVxdWlwbWVudERldGFpbHM6IGZvcm1EZXRhaWwuZXF1aXBtZW50Lm1hcCgoZXF1aXBtZW50KSA9PiAoe1xyXG4gICAgICBlcXVpcG1lbnROYW1lOiBlcXVpcG1lbnQ/LmVxdWlwbWVudE5hbWUgfHwgXCJVbmtub3duXCIsXHJcbiAgICAgIGVxdWlwbWVudFRhZzogZXF1aXBtZW50Py5lcXVpcG1lbnRUYWcgfHwgXCJVbmtub3duXCIsXHJcbiAgICAgIHRhZ0NyZWF0ZWRBdDogZXF1aXBtZW50Py50YWdDcmVhdGVkQXQgfHwgXCJVbmtub3duXCIsIC8vIDwtLSBBZGljaW9uYWRvIGFxdWkgdGFtYsOpbVxyXG4gICAgfSkpLFxyXG4gICAgc3VibWlzc2lvbjogZm9ybURldGFpbC5zdWJtaXNzaW9uLFxyXG4gIH0pKTtcclxufVxyXG5cclxuLyphd2FpdCBHZXRGb3Jtc0J5Q2xpZW50TmFtZShcIlJpbyBUaW50b1wiKVxyXG4gIC50aGVuKChmbGF0dGVuZWRGb3JtcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCLinIUgRm9ybXMgZnJvbSBjbGllbnQ6XCIsIGZsYXR0ZW5lZEZvcm1zKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZmV0Y2hpbmcgZm9ybXM6XCIsIGVycm9yKTtcclxuICB9KTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFNhdmVGb3JtQWZ0ZXJUZXN0KFxyXG4gIEZvcm1JRDogc3RyaW5nLFxyXG4gIFRhZ0lEOiBzdHJpbmcsXHJcbiAgY29udGVudDogc3RyaW5nLFxyXG4pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBkYXRhOiBmb3JtVGFncywgZXJyb3JzIH0gPSBhd2FpdCBjbGllbnQubW9kZWxzLkZvcm1UYWcyLmxpc3Qoe1xyXG4gICAgICBmaWx0ZXI6IHtcclxuICAgICAgICBmb3JtSUQ6IHsgZXE6IEZvcm1JRCB9LFxyXG4gICAgICAgIHRhZ0lEOiB7IGVxOiBUYWdJRCB9LFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGVycm9ycykge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6XCIsIGVycm9ycyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb3JtVGFnVG9VcGRhdGUgPSBmb3JtVGFnc1swXTtcclxuXHJcbiAgICBpZiAoIWZvcm1UYWdUb1VwZGF0ZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiTm90aGluZyBmb3VuZCBmb3IgdGhpcyBmb3JtSUQgYW5kIHRhZ0lEXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZCA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIudXBkYXRlKHtcclxuICAgICAgaWQ6IGZvcm1UYWdUb1VwZGF0ZS5pZCxcclxuICAgICAgY29udGVudFRlc3Q6IGNvbnRlbnQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZWQ6XCIsIHVwZGF0ZWQpO1xyXG4gICAgcmV0dXJuIHVwZGF0ZWQ7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgU2F2ZUZvcm1BZnRlclRlc3Q6XCIsIGVycik7XHJcbiAgfVxyXG59XHJcblxyXG4vKiAgU2F2ZUZvcm1BZnRlclRlc3QoXCI5NmEzNGNhMC0wM2EyLTRmNzktODg1My00OTVlN2VhM2QwNjBcIiwgXCI0MGRmNTk4MS1lOGQwLTQ1ZTEtYjhmNC05OTIyZjVjY2NlNTJcIiwgXCJUZXN0IGNvbnRlbnRcIilcclxuLnRoZW4oKHVwZGF0ZWRGb3JtKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJGb3JtIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5OlwiLCB1cGRhdGVkRm9ybSk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgZm9ybTpcIiwgZXJyb3IpO1xyXG59KTsqL1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnRlbnRCeUZvcm1JRGFuZFRhZ0lEKFxyXG4gIEZvcm1JRDogc3RyaW5nLFxyXG4gIFRhZ0lEOiBzdHJpbmcsXHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGE6IGZvcm1UYWdzLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRm9ybVRhZzIubGlzdCh7XHJcbiAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgIGZvcm1JRDogeyBlcTogRm9ybUlEIH0sXHJcbiAgICAgICAgdGFnSUQ6IHsgZXE6IFRhZ0lEIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjpcIiwgZXJyb3JzKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZvcm1UYWcgPSBmb3JtVGFnc1swXTtcclxuXHJcbiAgICBpZiAoIWZvcm1UYWcpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk5vdGhpbmcgZm91bmQgZm9yIHRoaXMgZm9ybUlEIGFuZCB0YWdJRFwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbnRlbnQgPSBmb3JtVGFnLmNvbnRlbnRUZXN0O1xyXG5cclxuICAgIC8vY29uc29sZS5sb2coXCJGZXRjaGVkIGNvbnRlbnQ6XCIsIGNvbnRlbnQpO1xyXG4gICAgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0Q29udGVudEJ5Rm9ybUlEYW5kVGFnSUQ6XCIsIGVycik7XHJcbiAgfVxyXG59XHJcblxyXG4vKmdldENvbnRlbnRCeUZvcm1JRGFuZFRhZ0lEKFwiMmUwNjlkZmEtM2U2ZC00MmQyLWJlMDYtNTQ0YjVhYTk5YjQwXCIsIFwiOTM5OTkzNWEtNTllYS00MTNmLTgzMDMtNDFiOGZjNGY5N2I3XCIpXHJcbi50aGVuKCh1cGRhdGVkRm9ybSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiRm9ybSB1cGRhdGVkIHN1Y2Nlc3NmdWxseTpcIiwgdXBkYXRlZEZvcm0pO1xyXG59KVxyXG4uY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGZvcm06XCIsIGVycm9yKTtcclxufSk7Ki9cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRFcXVpcG1lbnRUYWdJRChcclxuICBlcXVpcG1lbnROYW1lOiBzdHJpbmcsXHJcbiAgZXF1aXBtZW50VGFnOiBzdHJpbmcsXHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBRdWVyeSB0byBmZXRjaCBlcXVpcG1lbnQgYnkgaXRzIG5hbWUgYW5kIHRhZ1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvcnMgfSA9IGF3YWl0IGNsaWVudC5tb2RlbHMuRXF1aXBtZW50VGFnMi5saXN0KHtcclxuICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgRXF1aXBtZW50TmFtZTogeyBlcTogZXF1aXBtZW50TmFtZSB9LFxyXG4gICAgICAgIFRhZzogeyBlcTogZXF1aXBtZW50VGFnIH0sXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDaGVjayBmb3IgZXJyb3JzXHJcbiAgICBpZiAoZXJyb3JzKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBlcXVpcG1lbnQgdGFnOlwiLCBlcnJvcnMpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgZGF0YSBleGlzdHNcclxuICAgIGNvbnN0IGVxdWlwbWVudFRhZ0RhdGEgPSBkYXRhWzBdOyAvLyBBc3N1bWluZyB0aGUgZmlyc3QgZW50cnkgbWF0Y2hlcyB0aGUgc2VhcmNoXHJcbiAgICBpZiAoIWVxdWlwbWVudFRhZ0RhdGEpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIk5vIG1hdGNoaW5nIGVxdWlwbWVudCBmb3VuZCBmb3IgZ2l2ZW4gbmFtZSBhbmQgdGFnLlwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgZXF1aXBtZW50VGFnSURcclxuICAgIHJldHVybiBlcXVpcG1lbnRUYWdEYXRhLmlkOyAvLyBBc3N1bWluZyBgaWRgIGlzIHRoZSBlcXVpcG1lbnRUYWdJRFxyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldEVxdWlwbWVudFRhZ0lEOlwiLCBlcnIpO1xyXG4gIH1cclxufVxyXG5cclxuLypnZXRFcXVpcG1lbnRUYWdJRChcIkVxdWlwMVwiLCBcIlRhZzFcIilcclxuLnRoZW4oKHVwZGF0ZWRGb3JtKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJFcXVpcCBUQUcgSUQ6XCIsIHVwZGF0ZWRGb3JtKTtcclxufSlcclxuLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyBmb3JtOlwiLCBlcnJvcik7XHJcbn0pOyovXHJcbiJdLCJuYW1lcyI6WyJHZXRDbGllbnRzIiwiR2V0UHJvamVjdHMiLCJHZXRGb3JtU3RhdHMiLCJHZXRGb3JtcyIsIkdldEZvcm1CeUlkIiwiVXBkYXRlRm9ybUNvbnRlbnQiLCJzYXZlRm9ybUFjdGlvbiIsIlB1Ymxpc2hGb3JtIiwicHVibGlzaEZvcm1BY3Rpb24iLCJHZXRGb3JtQ29udGVudEJ5VXJsIiwiU3VibWl0Rm9ybSIsInN1Ym1pdEZvcm1BY3Rpb24iLCJHZXRGb3JtV2l0aFN1Ym1pc3Npb25zIiwiR2V0U3VibWlzc2lvbldpdGhUYWdJbmZvIiwiR2V0RXF1aXBtZW50VGFnc0ZvckZvcm0iLCJHZXRDbGllbnRXaXRoUHJvamVjdHMiLCJHZXRGb3Jtc1dpdGhDbGllbnQiLCJHZXRGb3Jtc0luZm9ybWF0aW9uIiwiR2V0UHJvamVjdHNGcm9tQ2xpZW50TmFtZSIsIkNyZWF0ZUZvcm0iLCJydW5Gb3JtIiwiR2V0Rm9ybXNCeUNsaWVudE5hbWUiLCJTYXZlRm9ybUFmdGVyVGVzdCIsImdldENvbnRlbnRCeUZvcm1JRGFuZFRhZ0lEIiwiZ2V0RXF1aXBtZW50VGFnSUQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./actions/form.tsx\n"));

/***/ })

});